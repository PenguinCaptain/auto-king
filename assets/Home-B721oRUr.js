var om=Object.defineProperty;var am=(n,e,t)=>e in n?om(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Oi=(n,e,t)=>am(n,typeof e!="symbol"?e+"":e,t);import{p as au,t as lu,u as lm,a as um,r as ct,c as Pr,w as _i,o as un,b as Nr,s as Ca,d as cm,i as Gh,e as hm,f as uu,C as dm,B as jn,y as pm,T as fm,V as Te,E as Kh,R as mm,P as $h,M as wi,A as vm,g as gm,h as Sa,j as Xs,k as Wh,l as Gt,m as Pa,I as Xh,n as yl,q as cu,v as hu,U as Ho,x as je,S as _m,z as du,D as hr,L as wm,F as qh,G as bm,H as ym,J as xm,K as Tm,N as yt,O as Cm,Q as xl,W as Dn,X as Hi,Y as Ea,Z as pu,_ as li,$ as ho,a0 as Yt,a1 as Bn,a2 as Tl,a3 as W,a4 as ji,a5 as bc,a6 as ja,a7 as Sm,a8 as Pm,a9 as dr,aa as Ms,ab as Em,ac as fu,ad as Yh,ae as ui,af as oa,ag as Mm,ah as Am,ai as km,aj as Gr,ak as Rm,al as Zh,am as Lm,an as Om,ao as rs,ap as Qh,aq as qs,ar as aa,as as Dm,at as Bs,au as Bm,av as Jh,aw as Im,ax as Um,ay as Fm,az as Nm,aA as Vm,aB as zm,aC as Ga,aD as Hm,aE as ed,aF as jm,aG as Gm,aH as Km,aI as Cl,aJ as td,aK as Ma,aL as nd,aM as Ys,aN as $m,aO as Wm,aP as Xm,aQ as qm,aR as Ym,aS as Zm,aT as rd,aU as Qm,aV as yc,aW as Jm,aX as ev,aY as tv,aZ as mu,a_ as nv,a$ as id,b0 as sd,b1 as rv,b2 as iv,b3 as sv,b4 as ov,b5 as ps,b6 as be,b7 as od,b8 as ad,b9 as Ei,ba as xc,bb as av,bc as lv,bd as vu,be as uv,bf as cv,bg as ld,bh as ud,bi as cd,bj as As,bk as _n,bl as hv,bm as jo,bn as hd,bo as dd,bp as dv,bq as rr,br as pv,bs as fv}from"./index-SoqotssI.js";import{m as mv,a as vv,s as gv,i as _v}from"./inspection-DmoT0QCA.js";const wv={__name:"MouseParallax",props:{disabled:{type:Boolean,default:!1},factor:{type:Number,default:2.5},ease:{type:Number,default:.1}},setup(n){const e=n,{camera:t}=au(),{disabled:r,factor:i,ease:s}=lu(e),{x:o,y:a}=lm(),{width:l,height:u}=um(),c=ct(),h=Pr(()=>(o.value/l.value-.5)*i.value),{onLoop:p}=Ca();return p(({delta:d})=>{r.value||!c.value||(c.value.position.x+=(h.value-c.value.position.x)*s.value*d)}),_i(()=>c.value,d=>d==null?void 0:d.add(t.value)),(d,g)=>(un(),Nr("TresGroup",{ref_key:"cameraGroupRef",ref:c},null,512))}},pd=uu(),fd=uu(),gu=uu(),Is=new dm;let Go=0,Ko=0;const{pause:bv,resume:yv,isActive:xv}=cm(()=>{pd.trigger({delta:Go,elapsed:Ko,clock:Is}),fd.trigger({delta:Go,elapsed:Ko,clock:Is}),gu.trigger({delta:Go,elapsed:Ko,clock:Is})},{immediate:!1});gu.on(()=>{Go=Is.getDelta(),Ko=Is.getElapsedTime()});const md=()=>({onBeforeLoop:pd.on,onLoop:fd.on,onAfterLoop:gu.on,pause:bv,resume:yv,isActive:xv}),Tc="[TresJS ▲ ■ ●] ";function vd(){function n(r,i){console.error(`${Tc} ${r}`,i||"")}function e(r){console.warn(`${Tc} ${r}`)}function t(r,i){}return{logError:n,logWarning:e,logMessage:t}}const Tv="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",Cv=Sv(Tv);function Cc(n){return n&&n.nodeType===1}function So(n){return n.replace(/-([a-z])/g,(e,t)=>t.toUpperCase())}function Sv(n,e){const t=Object.create(null),r=n.split(",");for(let i=0;i<r.length;i++)t[r[i]]=!0;return i=>!!t[i]}function gd(n,e){if(Cc(n)&&Cc(e)){const i=n.attributes,s=e.attributes;return i.length!==s.length?!1:Array.from(i).every(({name:o,value:a})=>e.getAttribute(o)===a)}if(n===e)return!0;if(n===null||typeof n!="object"||e===null||typeof e!="object")return!1;const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(const i of t)if(!r.includes(i)||!gd(n[i],e[i]))return!1;return!0}function Pv(n,e){if(!Array.isArray(n)||!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!gd(n[t],e[t]))return!1;return!0}const Sc=n=>typeof n=="function",Ev=n=>!!n&&n.constructor===Array;function Mv(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}async function Av(n,e,t,r,i){const{logError:s}=vd(),o=new n;t&&t(o);const a=(Array.isArray(e)?e:[e]).map(l=>new Promise((u,c)=>{o.load(l,h=>{h.scene&&Object.assign(h,Mv(h.scene)),u(h)},r,h=>c(s("[useLoader] - Failed to load resource",h)))}));return Ev(e)?await Promise.all(a):await a[0]}const Sl=ct({}),kv=n=>Object.assign(Sl.value,n);function _d(){const n=Gh("useTres");if(!n)throw new Error("useTresContext must be used together with useTresContextProvider");return n}let He=null;const{logError:Pc}=vd(),Rv={createElement(n,e,t,r){var i,s;if(r||(r={}),r.args||(r.args=[]),n==="template"||Cv(n))return null;let o=n.replace("Tres",""),a;if(n==="primitive"){(r==null?void 0:r.object)===void 0&&Pc("Tres primitives need a prop 'object'");const l=r.object;o=l.type,a=Object.assign(l,{type:o,attach:r.attach,primitive:!0})}else{const l=Sl.value[o];l||Pc(`${o} is not defined on the THREE namespace. Use extend to add it to the catalog.`),a=new l(...r.args)}return a.isCamera&&(r!=null&&r.position||a.position.set(3,3,3),r!=null&&r.lookAt||a.lookAt(0,0,0)),(r==null?void 0:r.attach)===void 0&&(a.isMaterial?a.attach="material":a.isBufferGeometry&&(a.attach="geometry")),a.isObject3D&&((i=r==null?void 0:r.material)!=null&&i.isMaterial&&(a.userData.tres__materialViaProp=!0),(s=r==null?void 0:r.geometry)!=null&&s.isBufferGeometry&&(a.userData.tres__geometryViaProp=!0)),a.userData={...a.userData,tres__name:o},a},insert(n,e){var t,r,i,s;e&&e.isScene&&(He=e);const o=e||He;if(n!=null&&n.isObject3D){if(n!=null&&n.isCamera){if(!(He!=null&&He.userData.tres__registerCamera))throw"could not find tres__registerCamera on scene's userData";(r=He==null?void 0:(t=He.userData).tres__registerCamera)==null||r.call(t,n)}if(n!=null&&n.onClick||n!=null&&n.onPointerMove||n!=null&&n.onPointerEnter||n!=null&&n.onPointerLeave){if(!(He!=null&&He.userData.tres__registerAtPointerEventHandler))throw"could not find tres__registerAtPointerEventHandler on scene's userData";(s=He==null?void 0:(i=He.userData).tres__registerAtPointerEventHandler)==null||s.call(i,n)}}n!=null&&n.isObject3D&&o!=null&&o.isObject3D?(o.add(n),n.dispatchEvent({type:"added"})):n!=null&&n.isFog?o.fog=n:typeof(n==null?void 0:n.attach)=="string"&&(n.__previousAttach=n[o==null?void 0:o.attach],o&&(o[n.attach]=n))},remove(n){var e,t;if(n){if(n.isObject3D){const r=n,i=u=>{var c,h;const p=u;u.userData.tres__materialViaProp||(c=p.material)==null||c.dispose(),u.userData.tres__geometryViaProp||(h=p.geometry)==null||h.dispose()},s=He==null?void 0:He.userData.tres__deregisterAtPointerEventHandler,o=He==null?void 0:He.userData.tres__deregisterBlockingObjectAtPointerEventHandler,a=u=>{var c,h;if(!o)throw"could not find tres__deregisterBlockingObjectAtPointerEventHandler on scene's userData";if((h=He==null?void 0:(c=He.userData).tres__deregisterBlockingObjectAtPointerEventHandler)==null||h.call(c,u),!s)throw"could not find tres__deregisterAtPointerEventHandler on scene's userData";(u!=null&&u.onClick||u!=null&&u.onPointerMove||u!=null&&u.onPointerEnter||u!=null&&u.onPointerLeave)&&(s==null||s(u))},l=u=>{const c=He==null?void 0:He.userData.tres__deregisterCamera;if(!c)throw"could not find tres__deregisterCamera on scene's userData";u.isCamera&&(c==null||c(u))};r.traverse(u=>{i(u),l(u),a==null||a(u)}),i(r),l(r),a==null||a(r)}(e=n.removeFromParent)==null||e.call(n),(t=n.dispose)==null||t.call(n)}},patchProp(n,e,t,r){var i,s,o,a;if(n){let l=n,u=e;if(n.isObject3D&&u==="blocks-pointer-events"){r||r===""?(s=He==null?void 0:(i=He.userData).tres__registerBlockingObjectAtPointerEventHandler)==null||s.call(i,n):(a=He==null?void 0:(o=He.userData).tres__deregisterBlockingObjectAtPointerEventHandler)==null||a.call(o,n);return}let c=So(u),h=l==null?void 0:l[c];if(u==="args"){const d=n,g=t??[],f=r??[],v=n.userData.tres__name||n.type;v&&g.length&&!Pv(g,f)&&(l=Object.assign(d,new Sl.value[v](...r)));return}if(l.type==="BufferGeometry"){if(u==="args")return;l.setAttribute(So(u),new jn(...r));return}if(u.includes("-")&&h===void 0){const d=u.split("-");h=d.reduce((g,f)=>g[So(f)],l),u=d.pop(),c=u.toLowerCase(),h!=null&&h.set||(l=d.reduce((g,f)=>g[So(f)],l))}let p=r;if(p===""&&(p=!0),Sc(h)){Array.isArray(p)?n[c](...p):n[c](p);return}!(h!=null&&h.set)&&!Sc(h)?l[c]=p:h.constructor===p.constructor&&h!=null&&h.copy?h==null||h.copy(p):Array.isArray(p)?h.set(...p):!h.isColor&&h.setScalar?h.setScalar(p):h.set(p)}},parentNode(n){return(n==null?void 0:n.parent)||null},createText:()=>{},createComment:()=>{},setText:()=>{},setElementText:()=>{},nextSibling:()=>{},querySelector:()=>{},setScopeId:()=>{},cloneNode:()=>{},insertStaticContent:()=>{}};hm(Rv);kv(pm);/*! Tweakpane 4.0.3 (c) 2016 cocopon, licensed under the MIT license. */function ze(n){return n==null}function _u(n){return n!==null&&typeof n=="object"}function Pl(n){return n!==null&&typeof n=="object"}function Lv(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function bi(n,e){return Array.from(new Set([...Object.keys(n),...Object.keys(e)])).reduce((r,i)=>{const s=n[i],o=e[i];return Pl(s)&&Pl(o)?Object.assign(Object.assign({},r),{[i]:bi(s,o)}):Object.assign(Object.assign({},r),{[i]:i in e?o:s})},{})}function Ov(n){return _u(n)?"target"in n:!1}const Dv={alreadydisposed:()=>"View has been already disposed",invalidparams:n=>`Invalid parameters for '${n.name}'`,nomatchingcontroller:n=>`No matching controller for '${n.key}'`,nomatchingview:n=>`No matching view for '${JSON.stringify(n.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:n=>`Not compatible with  plugin '${n.id}'`,propertynotfound:n=>`Property '${n.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class on{static alreadyDisposed(){return new on({type:"alreadydisposed"})}static notBindable(){return new on({type:"notbindable"})}static notCompatible(e,t){return new on({type:"notcompatible",context:{id:`${e}.${t}`}})}static propertyNotFound(e){return new on({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new on({type:"shouldneverhappen"})}constructor(e){var t;this.message=(t=Dv[e.type](e.context))!==null&&t!==void 0?t:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}}class la{constructor(e,t){this.obj_=e,this.key=t}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,t){const r=this.read();if(!la.isBindable(r))throw on.notBindable();if(!(e in r))throw on.propertyNotFound(e);r[e]=t}}class pn{constructor(){this.observers_={}}on(e,t,r){var i;let s=this.observers_[e];return s||(s=this.observers_[e]=[]),s.push({handler:t,key:(i=r==null?void 0:r.key)!==null&&i!==void 0?i:t}),this}off(e,t){const r=this.observers_[e];return r&&(this.observers_[e]=r.filter(i=>i.key!==t)),this}emit(e,t){const r=this.observers_[e];r&&r.forEach(i=>{i.handler(t)})}}class Bv{constructor(e,t){var r;this.constraint_=t==null?void 0:t.constraint,this.equals_=(r=t==null?void 0:t.equals)!==null&&r!==void 0?r:(i,s)=>i===s,this.emitter=new pn,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const r=t??{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(e):e,s=this.rawValue_;this.equals_(s,i)&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:r,previousRawValue:s,rawValue:i,sender:this}))}}class Iv{constructor(e){this.emitter=new pn,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const r=t??{forceEmit:!1,last:!0},i=this.value_;i===e&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:r,previousRawValue:i,rawValue:this.value_,sender:this}))}}class Uv{constructor(e){this.emitter=new pn,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function pt(n,e){const t=e==null?void 0:e.constraint,r=e==null?void 0:e.equals;return!t&&!r?new Iv(n):new Bv(n,e)}function Fv(n){return[new Uv(n),(e,t)=>{n.setRawValue(e,t)}]}class ge{constructor(e){this.emitter=new pn,this.valMap_=e;for(const t in this.valMap_)this.valMap_[t].emitter.on("change",()=>{this.emitter.emit("change",{key:t,sender:this})})}static createCore(e){return Object.keys(e).reduce((r,i)=>Object.assign(r,{[i]:pt(e[i])}),{})}static fromObject(e){const t=this.createCore(e);return new ge(t)}get(e){return this.valMap_[e].rawValue}set(e,t){this.valMap_[e].rawValue=t}value(e){return this.valMap_[e]}}class Aa{constructor(e){this.values=ge.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),r=this.values.get("min");return Math.min(Math.max(e,r),t)}}class Nv{constructor(e){this.values=ge.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),r=this.values.get("min");let i=e;return ze(r)||(i=Math.max(i,r)),ze(t)||(i=Math.min(i,t)),i}}class Vv{constructor(e,t=0){this.step=e,this.origin=t}constrain(e){const t=this.origin%this.step,r=Math.round((e-t)/this.step);return t+r*this.step}}class zv{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const Hv={"**":(n,e)=>Math.pow(n,e),"*":(n,e)=>n*e,"/":(n,e)=>n/e,"%":(n,e)=>n%e,"+":(n,e)=>n+e,"-":(n,e)=>n-e,"<<":(n,e)=>n<<e,">>":(n,e)=>n>>e,">>>":(n,e)=>n>>>e,"&":(n,e)=>n&e,"^":(n,e)=>n^e,"|":(n,e)=>n|e};class jv{constructor(e,t,r){this.left=t,this.operator=e,this.right=r}evaluate(){const e=Hv[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const Gv={"+":n=>n,"-":n=>-n,"~":n=>~n};class Kv{constructor(e,t){this.operator=e,this.expression=t}evaluate(){const e=Gv[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function wu(n){return(e,t)=>{for(let r=0;r<n.length;r++){const i=n[r](e,t);if(i!=="")return i}return""}}function Zs(n,e){var t;const r=n.substr(e).match(/^\s+/);return(t=r&&r[0])!==null&&t!==void 0?t:""}function $v(n,e){const t=n.substr(e,1);return t.match(/^[1-9]$/)?t:""}function Qs(n,e){var t;const r=n.substr(e).match(/^[0-9]+/);return(t=r&&r[0])!==null&&t!==void 0?t:""}function Wv(n,e){const t=Qs(n,e);if(t!=="")return t;const r=n.substr(e,1);if(e+=1,r!=="-"&&r!=="+")return"";const i=Qs(n,e);return i===""?"":r+i}function bu(n,e){const t=n.substr(e,1);if(e+=1,t.toLowerCase()!=="e")return"";const r=Wv(n,e);return r===""?"":t+r}function wd(n,e){const t=n.substr(e,1);if(t==="0")return t;const r=$v(n,e);return e+=r.length,r===""?"":r+Qs(n,e)}function Xv(n,e){const t=wd(n,e);if(e+=t.length,t==="")return"";const r=n.substr(e,1);if(e+=r.length,r!==".")return"";const i=Qs(n,e);return e+=i.length,t+r+i+bu(n,e)}function qv(n,e){const t=n.substr(e,1);if(e+=t.length,t!==".")return"";const r=Qs(n,e);return e+=r.length,r===""?"":t+r+bu(n,e)}function Yv(n,e){const t=wd(n,e);return e+=t.length,t===""?"":t+bu(n,e)}const Zv=wu([Xv,qv,Yv]);function Qv(n,e){var t;const r=n.substr(e).match(/^[01]+/);return(t=r&&r[0])!==null&&t!==void 0?t:""}function Jv(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0b")return"";const r=Qv(n,e);return r===""?"":t+r}function eg(n,e){var t;const r=n.substr(e).match(/^[0-7]+/);return(t=r&&r[0])!==null&&t!==void 0?t:""}function tg(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0o")return"";const r=eg(n,e);return r===""?"":t+r}function ng(n,e){var t;const r=n.substr(e).match(/^[0-9a-f]+/i);return(t=r&&r[0])!==null&&t!==void 0?t:""}function rg(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0x")return"";const r=ng(n,e);return r===""?"":t+r}const ig=wu([Jv,tg,rg]),sg=wu([ig,Zv]);function og(n,e){const t=sg(n,e);return e+=t.length,t===""?null:{evaluable:new zv(t),cursor:e}}function ag(n,e){const t=n.substr(e,1);if(e+=t.length,t!=="(")return null;const r=yd(n,e);if(!r)return null;e=r.cursor,e+=Zs(n,e).length;const i=n.substr(e,1);return e+=i.length,i!==")"?null:{evaluable:r.evaluable,cursor:e}}function lg(n,e){var t;return(t=og(n,e))!==null&&t!==void 0?t:ag(n,e)}function bd(n,e){const t=lg(n,e);if(t)return t;const r=n.substr(e,1);if(e+=r.length,r!=="+"&&r!=="-"&&r!=="~")return null;const i=bd(n,e);return i?(e=i.cursor,{cursor:e,evaluable:new Kv(r,i.evaluable)}):null}function ug(n,e,t){t+=Zs(e,t).length;const r=n.filter(i=>e.startsWith(i,t))[0];return r?(t+=r.length,t+=Zs(e,t).length,{cursor:t,operator:r}):null}function cg(n,e){return(t,r)=>{const i=n(t,r);if(!i)return null;r=i.cursor;let s=i.evaluable;for(;;){const o=ug(e,t,r);if(!o)break;r=o.cursor;const a=n(t,r);if(!a)return null;r=a.cursor,s=new jv(o.operator,s,a.evaluable)}return s?{cursor:r,evaluable:s}:null}}const hg=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((n,e)=>cg(n,e),bd);function yd(n,e){return e+=Zs(n,e).length,hg(n,e)}function dg(n){const e=yd(n,0);return!e||e.cursor+Zs(n,e.cursor).length!==n.length?null:e.evaluable}function Vr(n){var e;const t=dg(n);return(e=t==null?void 0:t.evaluate())!==null&&e!==void 0?e:null}function xd(n){if(typeof n=="number")return n;if(typeof n=="string"){const e=Vr(n);if(!ze(e))return e}return 0}function Zt(n){return e=>e.toFixed(Math.max(Math.min(n,20),0))}function ye(n,e,t,r,i){const s=(n-e)/(t-e);return r+s*(i-r)}function Ec(n){return String(n.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function it(n,e,t){return Math.min(Math.max(n,e),t)}function Td(n,e){return(n%e+e)%e}function pg(n,e){return ze(n.step)?Math.max(Ec(e),2):Ec(n.step)}function Cd(n){var e;return(e=n.step)!==null&&e!==void 0?e:1}function fg(n,e){var t;const r=Math.abs((t=n.step)!==null&&t!==void 0?t:e);return r===0?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}function Sd(n,e){return ze(n.step)?null:new Vv(n.step,e)}function Pd(n){return!ze(n.max)&&!ze(n.min)?new Aa({max:n.max,min:n.min}):!ze(n.max)||!ze(n.min)?new Nv({max:n.max,min:n.min}):null}function Ed(n,e){var t,r,i;return{formatter:(t=n.format)!==null&&t!==void 0?t:Zt(pg(n,e)),keyScale:(r=n.keyScale)!==null&&r!==void 0?r:Cd(n),pointerScale:(i=n.pointerScale)!==null&&i!==void 0?i:fg(n,e)}}function Md(n){return{format:n.optional.function,keyScale:n.optional.number,max:n.optional.number,min:n.optional.number,pointerScale:n.optional.number,step:n.optional.number}}function yu(n){return{constraint:n.constraint,textProps:ge.fromObject(Ed(n.params,n.initialValue))}}class xu{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}}class ka{constructor(e){this.target=e}}class Ad extends ka{constructor(e,t,r){super(e),this.value=t,this.last=r??!0}}class mg extends ka{constructor(e,t){super(e),this.expanded=t}}class vg extends ka{constructor(e,t){super(e),this.index=t}}class gg extends ka{constructor(e,t){super(e),this.native=t}}class Tu extends xu{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new pn,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,t){const r=t.bind(this);return this.emitter_.on(e,i=>{r(i)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const t=this.controller.value;this.emitter_.emit("change",new Ad(this,t.binding.target.read(),e.options.last))}}function _g(n,e){const r=Object.keys(e).reduce((i,s)=>{if(i===void 0)return;const o=e[s],a=o(n[s]);return a.succeeded?Object.assign(Object.assign({},i),{[s]:a.value}):void 0},{});return r}function wg(n,e){return n.reduce((t,r)=>{if(t===void 0)return;const i=e(r);if(!(!i.succeeded||i.value===void 0))return[...t,i.value]},[])}function bg(n){return n===null?!1:typeof n=="object"}function nr(n){return e=>t=>{if(!e&&t===void 0)return{succeeded:!1,value:void 0};if(e&&t===void 0)return{succeeded:!0,value:void 0};const r=n(t);return r!==void 0?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function Mc(n){return{custom:e=>nr(e)(n),boolean:nr(e=>typeof e=="boolean"?e:void 0)(n),number:nr(e=>typeof e=="number"?e:void 0)(n),string:nr(e=>typeof e=="string"?e:void 0)(n),function:nr(e=>typeof e=="function"?e:void 0)(n),constant:e=>nr(t=>t===e?e:void 0)(n),raw:nr(e=>e)(n),object:e=>nr(t=>{if(bg(t))return _g(t,e)})(n),array:e=>nr(t=>{if(Array.isArray(t))return wg(t,e)})(n)}}const El={optional:Mc(!0),required:Mc(!1)};function Pt(n,e){const t=e(El),r=El.required.object(t)(n);return r.succeeded?r.value:void 0}function Qn(n,e,t,r){if(e&&!e(n))return!1;const i=Pt(n,t);return i?r(i):!1}function Jn(n,e){var t;return bi((t=n==null?void 0:n())!==null&&t!==void 0?t:{},e)}function $o(n){return"value"in n}function yg(n){if(!_u(n)||!("binding"in n))return!1;const e=n.binding;return Ov(e)}const Gn="http://www.w3.org/2000/svg";function ua(n){n.offsetHeight}function xg(n,e){const t=n.style.transition;n.style.transition="none",e(),n.style.transition=t}function Cu(n){return n.ontouchstart!==void 0}function Tg(n){const e=n.ownerDocument.defaultView;return e&&"document"in e?n.getContext("2d",{willReadFrequently:!0}):null}const Cg={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function Ra(n,e){const t=n.createElementNS(Gn,"svg");return t.innerHTML=Cg[e],t}function kd(n,e,t){n.insertBefore(e,n.children[t])}function Su(n){n.parentElement&&n.parentElement.removeChild(n)}function Rd(n){for(;n.children.length>0;)n.removeChild(n.children[0])}function Sg(n){for(;n.childNodes.length>0;)n.removeChild(n.childNodes[0])}function Ld(n){return n.relatedTarget?n.relatedTarget:"explicitOriginalTarget"in n?n.explicitOriginalTarget:null}function ur(n,e){n.emitter.on("change",t=>{e(t.rawValue)}),e(n.rawValue)}function qn(n,e,t){ur(n.value(e),t)}const Pg="tp";function _e(n){return(t,r)=>[Pg,"-",n,"v",t?`_${t}`:"",r?`-${r}`:""].join("")}const ws=_e("lbl");function Eg(n,e){const t=n.createDocumentFragment();return e.split(`
`).map(i=>n.createTextNode(i)).forEach((i,s)=>{s>0&&t.appendChild(n.createElement("br")),t.appendChild(i)}),t}class Mg{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(ws()),t.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(ws("l")),qn(t.props,"label",s=>{ze(s)?this.element.classList.add(ws(void 0,"nol")):(this.element.classList.remove(ws(void 0,"nol")),Sg(r),r.appendChild(Eg(e,s)))}),this.element.appendChild(r),this.labelElement=r;const i=e.createElement("div");i.classList.add(ws("v")),this.element.appendChild(i),this.valueElement=i}}class Ag{constructor(e,t){this.props=t.props,this.valueController=t.valueController,this.viewProps=t.valueController.viewProps,this.view=new Mg(e,{props:t.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return Qn(e,null,t=>({label:t.optional.string}),t=>(this.props.set("label",t.label),!0))}exportProps(){return Jn(null,{label:this.props.get("label")})}}function kg(){return["veryfirst","first","last","verylast"]}const Ac=_e(""),kc={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class Od{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const t=this.view.element;this.blade.value("positions").emitter.on("change",()=>{kg().forEach(r=>{t.classList.remove(Ac(void 0,kc[r]))}),this.blade.get("positions").forEach(r=>{t.classList.add(Ac(void 0,kc[r]))})}),this.viewProps.handleDispose(()=>{Su(t)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return Qn(e,null,t=>({disabled:t.required.boolean,hidden:t.required.boolean}),t=>(this.viewProps.importState(t),!0))}exportState(){return Jn(null,Object.assign({},this.viewProps.exportState()))}}class Rg extends xu{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,t){const r=t.bind(this);return this.controller.buttonController.emitter.on(e,s=>{r(new gg(this,s.nativeEvent))}),this}off(e,t){return this.controller.buttonController.emitter.off(e,t),this}}function Lg(n,e,t){t?n.classList.add(e):n.classList.remove(e)}function fs(n,e){return t=>{Lg(n,e,t)}}function Pu(n,e){ur(n,t=>{e.textContent=t??""})}const Ka=_e("btn");class Og{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Ka()),t.viewProps.bindClassModifiers(this.element);const r=e.createElement("button");r.classList.add(Ka("b")),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=e.createElement("div");i.classList.add(Ka("t")),Pu(t.props.value("title"),i),this.buttonElement.appendChild(i)}}class Dg{constructor(e,t){this.emitter=new pn,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new Og(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return Qn(e,null,t=>({title:t.optional.string}),t=>(this.props.set("title",t.title),!0))}exportProps(){return Jn(null,{title:this.props.get("title")})}onClick_(e){this.emitter.emit("click",{nativeEvent:e,sender:this})}}class Rc extends Od{constructor(e,t){const r=new Dg(e,{props:t.buttonProps,viewProps:t.viewProps}),i=new Ag(e,{blade:t.blade,props:t.labelProps,valueController:r});super({blade:t.blade,view:i.view,viewProps:t.viewProps}),this.buttonController=r,this.labelController=i}importState(e){return Qn(e,t=>super.importState(t)&&this.buttonController.importProps(t)&&this.labelController.importProps(t),()=>({}),()=>!0)}exportState(){return Jn(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class Dd{constructor(e){const[t,r]=e.split("-"),i=t.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=r??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}}const Bg=new Dd("2.0.3");function Ft(n){return Object.assign({core:Bg},n)}Ft({id:"button",type:"blade",accept(n){const e=Pt(n,t=>({title:t.required.string,view:t.required.constant("button"),label:t.optional.string}));return e?{params:e}:null},controller(n){return new Rc(n.document,{blade:n.blade,buttonProps:ge.fromObject({title:n.params.title}),labelProps:ge.fromObject({label:n.params.label}),viewProps:n.viewProps})},api(n){return n.controller instanceof Rc?new Rg(n.controller):null}});function Ig(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function Ug(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function Fg(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function Ng(n){return _u(n)?"refresh"in n&&typeof n.refresh=="function":!1}function Vg(n,e){if(!la.isBindable(n))throw on.notBindable();return new la(n,e)}class zg{constructor(e,t){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new pn,this.pool_=t,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,t,r){const i=r??{},s=this.controller_.element.ownerDocument,o=this.pool_.createBinding(s,Vg(e,t),i),a=this.pool_.createBindingApi(o);return this.add(a,i.index)}addFolder(e){return Ug(this,e)}addButton(e){return Ig(this,e)}addTab(e){return Fg(this,e)}add(e,t){const r=e.controller;return this.controller_.rack.add(r,t),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const t=this.controller_.element.ownerDocument,r=this.pool_.createBlade(t,e),i=this.pool_.createApi(r);return this.add(i,e.index)}on(e,t){const r=t.bind(this);return this.emitter_.on(e,i=>{r(i)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}refresh(){this.children.forEach(e=>{Ng(e)&&e.refresh()})}onRackValueChange_(e){const t=e.bladeController,r=this.pool_.createApi(t),i=yg(t.value)?t.value.binding:null;this.emitter_.emit("change",new Ad(r,i?i.target.read():t.value.rawValue,e.options.last))}}class Eu extends xu{constructor(e,t){super(e),this.rackApi_=new zg(e.rackController,t)}refresh(){this.rackApi_.refresh()}}class Mu extends Od{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return Qn(e,t=>super.importState(t),t=>({children:t.required.array(t.required.raw)}),t=>this.rackController.rack.children.every((r,i)=>r.importState(t.children[i])))}exportState(){return Jn(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}}function Ml(n){return"rackController"in n}class Hg{constructor(e){this.emitter=new pn,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const t of this.allItems())if(e(t))return t;return null}includes(e){return this.cache_.has(e)}add(e,t){if(this.includes(e))throw on.shouldNeverHappen();const r=t!==void 0?t:this.items_.length;this.items_.splice(r,0,e),this.cache_.add(e);const i=this.extract_(e);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(s=>{this.cache_.add(s)})),this.emitter.emit("add",{index:r,item:e,root:this,target:this})}remove(e){const t=this.items_.indexOf(e);if(t<0)return;this.items_.splice(t,1),this.cache_.delete(e);const r=this.extract_(e);r&&(r.allItems().forEach(i=>{this.cache_.delete(i)}),r.emitter.off("add",this.onSubListAdd_),r.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:t,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}function jg(n,e){for(let t=0;t<n.length;t++){const r=n[t];if($o(r)&&r.value===e)return r}return null}function Gg(n){return Ml(n)?n.rackController.rack.bcSet_:null}class Kg{constructor(e){var t,r;this.emitter=new pn,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(t=e.blade)!==null&&t!==void 0?t:null,(r=this.blade_)===null||r===void 0||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new Hg(Gg),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,t){var r;(r=e.parent)===null||r===void 0||r.remove(e),e.parent=this,this.bcSet_.add(e,t)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:t,sender:this}),!t)return;const r=e.item;if(r.viewProps.emitter.on("change",this.onChildViewPropsChange_),r.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),r.viewProps.handleDispose(this.onChildDispose_),$o(r))r.value.emitter.on("change",this.onChildValueChange_);else if(Ml(r)){const i=r.rackController.rack;if(i){const s=i.emitter;s.on("layout",this.onRackLayout_),s.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:t,sender:this}),!t)return;const r=e.item;if($o(r))r.value.emitter.off("change",this.onChildValueChange_);else if(Ml(r)){const i=r.rackController.rack;if(i){const s=i.emitter;s.off("layout",this.onRackLayout_),s.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(i=>!i.viewProps.get("hidden")),t=e[0],r=e[e.length-1];this.bcSet_.items.forEach(i=>{const s=[];i===t&&(s.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&s.push("veryfirst")),i===r&&(s.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&s.push("verylast")),i.blade.set("positions",s)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(t=>t.viewProps.get("disposed")).forEach(t=>{this.bcSet_.remove(t)})}onChildValueChange_(e){const t=jg(this.find($o),e.sender);if(!t)throw on.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:t,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Au{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const t=new Kg({blade:e.root?void 0:e.blade,viewProps:e.viewProps});t.emitter.on("add",this.onRackAdd_),t.emitter.on("remove",this.onRackRemove_),this.rack=t,this.viewProps.handleDispose(()=>{for(let r=this.rack.children.length-1;r>=0;r--)this.rack.children[r].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&kd(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&Su(e.bladeController.view.element)}}function Bd(){return new ge({positions:pt([],{equals:Lv})})}class po extends ge{constructor(e){super(e)}static create(e){const t={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=ge.createCore(t);return new po(r)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!ze(e)?`${e}px`:"auto"}bindExpandedClass(e,t){const r=()=>{this.styleExpanded?e.classList.add(t):e.classList.remove(t)};qn(this,"expanded",r),qn(this,"temporaryExpanded",r)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function $g(n,e){let t=0;return xg(e,()=>{n.set("expandedHeight",null),n.set("temporaryExpanded",!0),ua(e),t=e.clientHeight,n.set("temporaryExpanded",null),ua(e)}),t}function Lc(n,e){e.style.height=n.styleHeight}function ku(n,e){n.value("expanded").emitter.on("beforechange",()=>{if(n.set("completed",!1),ze(n.get("expandedHeight"))){const t=$g(n,e);t>0&&n.set("expandedHeight",t)}n.set("shouldFixHeight",!0),ua(e)}),n.emitter.on("change",()=>{Lc(n,e)}),Lc(n,e),e.addEventListener("transitionend",t=>{t.propertyName==="height"&&n.cleanUpTransition()})}class Wg extends Eu{constructor(e,t){super(e,t),this.emitter_=new pn,this.controller.foldable.value("expanded").emitter.on("change",r=>{this.emitter_.emit("fold",new mg(this,r.sender.rawValue))}),this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,t,r){return this.rackApi_.addBinding(e,t,r)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){return this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,t){const r=t.bind(this);return this.emitter_.on(e,i=>{r(i)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}const Id=_e("cnt");class Xg{constructor(e,t){var r;this.className_=_e((r=t.viewName)!==null&&r!==void 0?r:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),Id()),t.viewProps.bindClassModifiers(this.element),this.foldable_=t.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),qn(this.foldable_,"completed",fs(this.element,this.className_(void 0,"cpl")));const i=e.createElement("button");i.classList.add(this.className_("b")),qn(t.props,"title",u=>{ze(u)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const s=e.createElement("div");s.classList.add(this.className_("i")),this.element.appendChild(s);const o=e.createElement("div");o.classList.add(this.className_("t")),Pu(t.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const a=e.createElement("div");a.classList.add(this.className_("m")),this.buttonElement.appendChild(a);const l=e.createElement("div");l.classList.add(this.className_("c")),this.element.appendChild(l),this.containerElement=l}}class Oc extends Mu{constructor(e,t){var r;const i=po.create((r=t.expanded)!==null&&r!==void 0?r:!0),s=new Xg(e,{foldable:i,props:t.props,viewName:t.root?"rot":void 0,viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:new Au({blade:t.blade,element:s.containerElement,root:t.root,viewProps:t.viewProps}),view:s})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=t.props,this.foldable=i,ku(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return Qn(e,t=>super.importState(t),t=>({expanded:t.required.boolean,title:t.optional.string}),t=>(this.foldable.set("expanded",t.expanded),this.props.set("title",t.title),!0))}exportState(){return Jn(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}Ft({id:"folder",type:"blade",accept(n){const e=Pt(n,t=>({title:t.required.string,view:t.required.constant("folder"),expanded:t.optional.boolean}));return e?{params:e}:null},controller(n){return new Oc(n.document,{blade:n.blade,expanded:n.params.expanded,props:ge.fromObject({title:n.params.title}),viewProps:n.viewProps})},api(n){return n.controller instanceof Oc?new Wg(n.controller,n.pool):null}});const qg=_e("");function Dc(n,e){return fs(n,qg(void 0,e))}class fo extends ge{constructor(e){var t;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=Fv(pt(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(t=this.get("parent"))===null||t===void 0||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var t,r,i;const s=e??{};return new fo(ge.createCore({disabled:(t=s.disabled)!==null&&t!==void 0?t:!1,disposed:!1,hidden:(r=s.hidden)!==null&&r!==void 0?r:!1,parent:(i=s.parent)!==null&&i!==void 0?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){ur(this.globalDisabled_,Dc(e,"disabled")),qn(this,"hidden",Dc(e,"hidden"))}bindDisabled(e){ur(this.globalDisabled_,t=>{e.disabled=t})}bindTabIndex(e){ur(this.globalDisabled_,t=>{e.tabIndex=t?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",t=>{t&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var t;const r=e.previousRawValue;r==null||r.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(t=this.get("parent"))===null||t===void 0||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const Bc=_e("tbp");class Yg{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Bc()),t.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(Bc("c")),this.element.appendChild(r),this.containerElement=r}}const bs=_e("tbi");class Zg{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(bs()),t.viewProps.bindClassModifiers(this.element),qn(t.props,"selected",s=>{s?this.element.classList.add(bs(void 0,"sel")):this.element.classList.remove(bs(void 0,"sel"))});const r=e.createElement("button");r.classList.add(bs("b")),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=e.createElement("div");i.classList.add(bs("t")),Pu(t.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}}class Qg{constructor(e,t){this.emitter=new pn,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new Zg(e,{props:t.props,viewProps:t.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Al extends Mu{constructor(e,t){const r=new Yg(e,{viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:new Au({blade:t.blade,element:r.containerElement,viewProps:t.viewProps}),view:r})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Qg(e,{props:t.itemProps,viewProps:fo.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=t.props,qn(this.props,"selected",i=>{this.itemController.props.set("selected",i),this.viewProps.set("hidden",!i)})}get itemController(){return this.ic_}importState(e){return Qn(e,t=>super.importState(t),t=>({selected:t.required.boolean,title:t.required.string}),t=>(this.ic_.props.set("selected",t.selected),this.ic_.props.set("title",t.title),!0))}exportState(){return Jn(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class Jg extends Eu{constructor(e,t){super(e,t),this.emitter_=new pn,this.onSelect_=this.onSelect_.bind(this),this.pool_=t,this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const t=this.controller.view.element.ownerDocument,r=new Al(t,{blade:Bd(),itemProps:ge.fromObject({selected:!1,title:e.title}),props:ge.fromObject({selected:!1}),viewProps:fo.create()}),i=this.pool_.createApi(r);return this.rackApi_.add(i,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,t){const r=t.bind(this);return this.emitter_.on(e,i=>{r(i)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}onSelect_(e){this.emitter_.emit("select",new vg(this,e.rawValue))}}class e_ extends Eu{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBinding(e,t,r){return this.rackApi_.addBinding(e,t,r)}addBlade(e){return this.rackApi_.addBlade(e)}}const Ic=-1;class t_{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=pt(!0),this.selectedIndex=pt(Ic),this.items_=[]}add(e,t){const r=t??this.items_.length;this.items_.splice(r,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const t=this.items_.indexOf(e);t<0||(this.items_.splice(t,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Ic,this.empty.rawValue=!0;return}const e=this.items_.findIndex(t=>t.rawValue);e<0?(this.items_.forEach((t,r)=>{t.rawValue=r===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((t,r)=>{t.rawValue=r===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const t=this.items_.findIndex(r=>r===e.sender);this.items_.forEach((r,i)=>{r.rawValue=i===t}),this.selectedIndex.rawValue=t}else this.keepSelection_()}}const ys=_e("tab");class n_{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(ys(),Id()),t.viewProps.bindClassModifiers(this.element),ur(t.empty,fs(this.element,ys(void 0,"nop")));const r=e.createElement("div");r.classList.add(ys("t")),this.element.appendChild(r),this.itemsElement=r;const i=e.createElement("div");i.classList.add(ys("i")),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(ys("c")),this.element.appendChild(s),this.contentsElement=s}}class Uc extends Mu{constructor(e,t){const r=new t_,i=new n_(e,{empty:r.empty,viewProps:t.viewProps});super({blade:t.blade,rackController:new Au({blade:t.blade,element:i.contentsElement,viewProps:t.viewProps}),view:i}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const s=this.rackController.rack;s.emitter.on("add",this.onRackAdd_),s.emitter.on("remove",this.onRackRemove_),this.tab=r}add(e,t){this.rackController.rack.add(e,t)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const t=e.bladeController;kd(this.view.itemsElement,t.itemController.view.element,e.index),t.itemController.viewProps.set("parent",this.viewProps),this.tab.add(t.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const t=e.bladeController;Su(t.itemController.view.element),t.itemController.viewProps.set("parent",null),this.tab.remove(t.props.value("selected"))}}Ft({id:"tab",type:"blade",accept(n){const e=Pt(n,t=>({pages:t.required.array(t.required.object({title:t.required.string})),view:t.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(n){const e=new Uc(n.document,{blade:n.blade,viewProps:n.viewProps});return n.params.pages.forEach(t=>{const r=new Al(n.document,{blade:Bd(),itemProps:ge.fromObject({selected:!1,title:t.title}),props:ge.fromObject({selected:!1}),viewProps:fo.create()});e.add(r)}),e},api(n){return n.controller instanceof Uc?new Jg(n.controller,n.pool):n.controller instanceof Al?new e_(n.controller,n.pool):null}});class Ru extends Tu{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}}class mo{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((t,r)=>r.constrain(t),e)}}function ca(n,e){if(n instanceof e)return n;if(n instanceof mo){const t=n.constraints.reduce((r,i)=>r||(i instanceof e?i:null),null);if(t)return t}return null}class La{constructor(e){this.values=ge.fromObject({options:e})}constrain(e){const t=this.values.get("options");return t.length===0||t.filter(i=>i.value===e).length>0?e:t[0].value}}function Oa(n){var e;const t=El;if(Array.isArray(n))return(e=Pt({items:n},r=>({items:r.required.array(r.required.object({text:r.required.string,value:r.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof n=="object")return t.required.raw(n).value}function Ud(n){if(Array.isArray(n))return n;const e=[];return Object.keys(n).forEach(t=>{e.push({text:t,value:n[t]})}),e}function Lu(n){return ze(n)?null:new La(Ud(n))}const $a=_e("lst");class r_{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.element=e.createElement("div"),this.element.classList.add($a()),t.viewProps.bindClassModifiers(this.element);const r=e.createElement("select");r.classList.add($a("s")),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;const i=e.createElement("div");i.classList.add($a("m")),i.appendChild(Ra(e,"dropdown")),this.element.appendChild(i),t.value.emitter.on("change",this.onValueChange_),this.value_=t.value,qn(this.props_,"options",s=>{Rd(this.selectElement),s.forEach(o=>{const a=e.createElement("option");a.textContent=o.text,this.selectElement.appendChild(a)}),this.update_()})}update_(){const e=this.props_.get("options").map(t=>t.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class is{constructor(e,t){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new r_(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const t=e.currentTarget;this.value.rawValue=this.props.get("options")[t.selectedIndex].value}importProps(e){return Qn(e,null,t=>({options:t.required.custom(Oa)}),t=>(this.props.set("options",Ud(t.options)),!0))}exportProps(){return Jn(null,{options:this.props.get("options")})}}const Fc=_e("pop");class i_{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Fc()),t.viewProps.bindClassModifiers(this.element),ur(t.shows,fs(this.element,Fc(void 0,"v")))}}class Fd{constructor(e,t){this.shows=pt(!1),this.viewProps=t.viewProps,this.view=new i_(e,{shows:this.shows,viewProps:this.viewProps})}}const Nc=_e("txt");class s_{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Nc()),t.viewProps.bindClassModifiers(this.element),this.props_=t.props,this.props_.emitter.on("change",this.onChange_);const r=e.createElement("input");r.classList.add(Nc("i")),r.type="text",t.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,t.value.emitter.on("change",this.onChange_),this.value_=t.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}}class Ou{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=t.parser,this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new s_(e,{props:t.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const r=e.currentTarget.value,i=this.parser_(r);ze(i)||(this.value.rawValue=i),this.view.refresh()}}function o_(n){return String(n)}function Nd(n){return n==="false"?!1:!!n}function Vc(n){return o_(n)}function a_(n){return e=>n.reduce((t,r)=>t!==null?t:r(e),null)}const l_=Zt(0);function ha(n){return l_(n)+"%"}function Vd(n){return String(n)}function kl(n){return n}function ms({primary:n,secondary:e,forward:t,backward:r}){let i=!1;function s(o){i||(i=!0,o(),i=!1)}n.emitter.on("change",o=>{s(()=>{e.setRawValue(t(n.rawValue,e.rawValue),o.options)})}),e.emitter.on("change",o=>{s(()=>{n.setRawValue(r(n.rawValue,e.rawValue),o.options)}),s(()=>{e.setRawValue(t(n.rawValue,e.rawValue),o.options)})}),s(()=>{e.setRawValue(t(n.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function Kt(n,e){const t=n*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+t:e.downKey?-t:0}function Js(n){return{altKey:n.altKey,downKey:n.key==="ArrowDown",shiftKey:n.shiftKey,upKey:n.key==="ArrowUp"}}function pr(n){return{altKey:n.altKey,downKey:n.key==="ArrowLeft",shiftKey:n.shiftKey,upKey:n.key==="ArrowRight"}}function u_(n){return n==="ArrowUp"||n==="ArrowDown"}function zd(n){return u_(n)||n==="ArrowLeft"||n==="ArrowRight"}function Wa(n,e){var t,r;const i=e.ownerDocument.defaultView,s=e.getBoundingClientRect();return{x:n.pageX-(((t=i&&i.scrollX)!==null&&t!==void 0?t:0)+s.left),y:n.pageY-(((r=i&&i.scrollY)!==null&&r!==void 0?r:0)+s.top)}}class Mi{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new pn,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const t=this.elem_.getBoundingClientRect();return{bounds:{width:t.width,height:t.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var t;e.preventDefault(),(t=e.currentTarget)===null||t===void 0||t.focus();const r=this.elem_.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove_),r.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(Wa(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(Wa(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const t=this.elem_.ownerDocument;t.removeEventListener("mousemove",this.onDocumentMouseMove_),t.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(Wa(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const t=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-r.left,y:t.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchMove_(e){const t=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-r.left,y:t.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchEnd_(e){var t;const r=(t=e.targetTouches.item(0))!==null&&t!==void 0?t:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(r?{x:r.clientX-i.left,y:r.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey})}}const fn=_e("txt");class c_{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(fn(),fn(void 0,"num")),t.arrayPosition&&this.element.classList.add(fn(void 0,t.arrayPosition)),t.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(fn("i")),r.type="text",t.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=t.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(fn()),this.inputElement.classList.add(fn("i"));const i=e.createElement("div");i.classList.add(fn("k")),this.element.appendChild(i),this.knobElement=i;const s=e.createElementNS(Gn,"svg");s.classList.add(fn("g")),this.knobElement.appendChild(s);const o=e.createElementNS(Gn,"path");o.classList.add(fn("gb")),s.appendChild(o),this.guideBodyElem_=o;const a=e.createElementNS(Gn,"path");a.classList.add(fn("gh")),s.appendChild(a),this.guideHeadElem_=a;const l=e.createElement("div");l.classList.add(_e("tt")()),this.knobElement.appendChild(l),this.tooltipElem_=l,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(fn(void 0,"drg"));return}this.element.classList.add(fn(void 0,"drg"));const t=e.rawValue/this.props_.get("pointerScale"),r=t+(t>0?-1:t<0?1:0),i=it(-r,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${r+i},0 L${r},4 L${r+i},8`,`M ${t},-1 L${t},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${t},4`);const s=this.props_.get("formatter");this.tooltipElem_.textContent=s(this.value.rawValue),this.tooltipElem_.style.left=`${t}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class vo{constructor(e,t){var r;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=t.parser,this.props=t.props,this.sliderProps_=(r=t.sliderProps)!==null&&r!==void 0?r:null,this.value=t.value,this.viewProps=t.viewProps,this.dragging_=pt(null),this.view=new c_(e,{arrayPosition:t.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new Mi(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var t,r;const i=(t=this.sliderProps_)===null||t===void 0?void 0:t.get("min"),s=(r=this.sliderProps_)===null||r===void 0?void 0:r.get("max");let o=e;return i!==void 0&&(o=Math.max(o,i)),s!==void 0&&(o=Math.min(o,s)),o}onInputChange_(e){const r=e.currentTarget.value,i=this.parser_(r);ze(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(e){const t=Kt(this.props.get("keyScale"),Js(e));t!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+t),{forceEmit:!1,last:!1})}onInputKeyUp_(e){Kt(this.props.get("keyScale"),Js(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const t=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+t*this.props.get("pointerScale"))}onPointerMove_(e){const t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Xa=_e("sld");class h_{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Xa()),t.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(Xa("t")),t.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;const i=e.createElement("div");i.classList.add(Xa("k")),this.trackElement.appendChild(i),this.knobElement=i,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.update_()}update_(){const e=it(ye(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class d_{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.props=t.props,this.view=new h_(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Mi(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){e.point&&this.value.setRawValue(ye(it(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),t)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=Kt(this.props.get("keyScale"),pr(e));t!==0&&this.value.setRawValue(this.value.rawValue+t,{forceEmit:!1,last:!1})}onKeyUp_(e){Kt(this.props.get("keyScale"),pr(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const qa=_e("sldtxt");class p_{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(qa());const r=e.createElement("div");r.classList.add(qa("s")),this.sliderView_=t.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(qa("t")),this.textView_=t.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}}class zc{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.sliderC_=new d_(e,{props:t.sliderProps,value:t.value,viewProps:this.viewProps}),this.textC_=new vo(e,{parser:t.parser,props:t.textProps,sliderProps:t.sliderProps,value:t.value,viewProps:t.viewProps}),this.view=new p_(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return Qn(e,null,t=>({max:t.required.number,min:t.required.number}),t=>{const r=this.sliderC_.props;return r.set("max",t.max),r.set("min",t.min),!0})}exportProps(){const e=this.sliderC_.props;return Jn(null,{max:e.get("max"),min:e.get("min")})}}function f_(n){return{sliderProps:new ge({keyScale:n.keyScale,max:n.max,min:n.min}),textProps:new ge({formatter:pt(n.formatter),keyScale:n.keyScale,pointerScale:pt(n.pointerScale)})}}const m_={containerUnitSize:"cnt-usz"};function Hd(n){return`--${m_[n]}`}function eo(n){return Md(n)}function Mr(n){if(Pl(n))return Pt(n,eo)}function ar(n,e){if(!n)return;const t=[],r=Sd(n,e);r&&t.push(r);const i=Pd(n);return i&&t.push(i),new mo(t)}function jd(n){if(n==="inline"||n==="popup")return n}function go(n,e){n.write(e)}const Po=_e("ckb");class v_{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Po()),t.viewProps.bindClassModifiers(this.element);const r=e.createElement("label");r.classList.add(Po("l")),this.element.appendChild(r),this.labelElement=r;const i=e.createElement("input");i.classList.add(Po("i")),i.type="checkbox",this.labelElement.appendChild(i),this.inputElement=i,t.viewProps.bindDisabled(this.inputElement);const s=e.createElement("div");s.classList.add(Po("w")),this.labelElement.appendChild(s);const o=Ra(e,"check");s.appendChild(o),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class g_{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new v_(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(e){const t=e.currentTarget;this.value.rawValue=t.checked,e.preventDefault(),e.stopPropagation()}onLabelMouseDown_(e){e.preventDefault()}}function __(n){const e=[],t=Lu(n.options);return t&&e.push(t),new mo(e)}Ft({id:"input-bool",type:"input",accept:(n,e)=>{if(typeof n!="boolean")return null;const t=Pt(e,r=>({options:r.optional.custom(Oa),readonly:r.optional.constant(!1)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Nd,constraint:n=>__(n.params),writer:n=>go},controller:n=>{const e=n.document,t=n.value,r=n.constraint,i=r&&ca(r,La);return i?new is(e,{props:new ge({options:i.values.value("options")}),value:t,viewProps:n.viewProps}):new g_(e,{value:t,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="boolean"?null:n.controller.valueController instanceof is?new Ru(n.controller):null}});const Qr=_e("col");class w_{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Qr()),t.foldable.bindExpandedClass(this.element,Qr(void 0,"expanded")),qn(t.foldable,"completed",fs(this.element,Qr(void 0,"cpl")));const r=e.createElement("div");r.classList.add(Qr("h")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(Qr("s")),r.appendChild(i),this.swatchElement=i;const s=e.createElement("div");if(s.classList.add(Qr("t")),r.appendChild(s),this.textElement=s,t.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(Qr("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}function b_(n,e,t){const r=it(n/255,0,1),i=it(e/255,0,1),s=it(t/255,0,1),o=Math.max(r,i,s),a=Math.min(r,i,s),l=o-a;let u=0,c=0;const h=(a+o)/2;return l!==0&&(c=l/(1-Math.abs(o+a-1)),r===o?u=(i-s)/l:i===o?u=2+(s-r)/l:u=4+(r-i)/l,u=u/6+(u<0?1:0)),[u*360,c*100,h*100]}function y_(n,e,t){const r=(n%360+360)%360,i=it(e/100,0,1),s=it(t/100,0,1),o=(1-Math.abs(2*s-1))*i,a=o*(1-Math.abs(r/60%2-1)),l=s-o/2;let u,c,h;return r>=0&&r<60?[u,c,h]=[o,a,0]:r>=60&&r<120?[u,c,h]=[a,o,0]:r>=120&&r<180?[u,c,h]=[0,o,a]:r>=180&&r<240?[u,c,h]=[0,a,o]:r>=240&&r<300?[u,c,h]=[a,0,o]:[u,c,h]=[o,0,a],[(u+l)*255,(c+l)*255,(h+l)*255]}function x_(n,e,t){const r=it(n/255,0,1),i=it(e/255,0,1),s=it(t/255,0,1),o=Math.max(r,i,s),a=Math.min(r,i,s),l=o-a;let u;l===0?u=0:o===r?u=60*(((i-s)/l%6+6)%6):o===i?u=60*((s-r)/l+2):u=60*((r-i)/l+4);const c=o===0?0:l/o,h=o;return[u,c*100,h*100]}function Gd(n,e,t){const r=Td(n,360),i=it(e/100,0,1),s=it(t/100,0,1),o=s*i,a=o*(1-Math.abs(r/60%2-1)),l=s-o;let u,c,h;return r>=0&&r<60?[u,c,h]=[o,a,0]:r>=60&&r<120?[u,c,h]=[a,o,0]:r>=120&&r<180?[u,c,h]=[0,o,a]:r>=180&&r<240?[u,c,h]=[0,a,o]:r>=240&&r<300?[u,c,h]=[a,0,o]:[u,c,h]=[o,0,a],[(u+l)*255,(c+l)*255,(h+l)*255]}function T_(n,e,t){const r=t+e*(100-Math.abs(2*t-100))/200;return[n,r!==0?e*(100-Math.abs(2*t-100))/r:0,t+e*(100-Math.abs(2*t-100))/(2*100)]}function C_(n,e,t){const r=100-Math.abs(t*(200-e)/100-100);return[n,r!==0?e*t/r:0,t*(200-e)/(2*100)]}function Yn(n){return[n[0],n[1],n[2]]}function Da(n,e){return[n[0],n[1],n[2],e]}const S_={hsl:{hsl:(n,e,t)=>[n,e,t],hsv:T_,rgb:y_},hsv:{hsl:C_,hsv:(n,e,t)=>[n,e,t],rgb:Gd},rgb:{hsl:b_,hsv:x_,rgb:(n,e,t)=>[n,e,t]}};function ss(n,e){return[e==="float"?1:n==="rgb"?255:360,e==="float"?1:n==="rgb"?255:100,e==="float"?1:n==="rgb"?255:100]}function P_(n,e){return n===e?e:Td(n,e)}function Kd(n,e,t){var r;const i=ss(e,t);return[e==="rgb"?it(n[0],0,i[0]):P_(n[0],i[0]),it(n[1],0,i[1]),it(n[2],0,i[2]),it((r=n[3])!==null&&r!==void 0?r:1,0,1)]}function Hc(n,e,t,r){const i=ss(e,t),s=ss(e,r);return n.map((o,a)=>o/i[a]*s[a])}function $d(n,e,t){const r=Hc(n,e.mode,e.type,"int"),i=S_[e.mode][t.mode](...r);return Hc(i,t.mode,"int",t.type)}class me{static black(){return new me([0,0,0],"rgb")}constructor(e,t){this.type="int",this.mode=t,this.comps_=Kd(e,t,this.type)}getComponents(e){return Da($d(Yn(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const _r=_e("colp");class E_{constructor(e,t){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(_r()),t.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(_r("hsv"));const i=e.createElement("div");i.classList.add(_r("sv")),this.svPaletteView_=t.svPaletteView,i.appendChild(this.svPaletteView_.element),r.appendChild(i);const s=e.createElement("div");s.classList.add(_r("h")),this.hPaletteView_=t.hPaletteView,s.appendChild(this.hPaletteView_.element),r.appendChild(s),this.element.appendChild(r);const o=e.createElement("div");if(o.classList.add(_r("rgb")),this.textsView_=t.textsView,o.appendChild(this.textsView_.element),this.element.appendChild(o),t.alphaViews){this.alphaViews_={palette:t.alphaViews.palette,text:t.alphaViews.text};const a=e.createElement("div");a.classList.add(_r("a"));const l=e.createElement("div");l.classList.add(_r("ap")),l.appendChild(this.alphaViews_.palette.element),a.appendChild(l);const u=e.createElement("div");u.classList.add(_r("at")),u.appendChild(this.alphaViews_.text.element),a.appendChild(u),this.element.appendChild(a)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(t=>t.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function M_(n){return n==="int"?"int":n==="float"?"float":void 0}function Du(n){return Pt(n,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(M_)}),expanded:e.optional.boolean,picker:e.optional.custom(jd),readonly:e.optional.constant(!1)}))}function yi(n){return n?.1:1}function Wd(n){var e;return(e=n.color)===null||e===void 0?void 0:e.type}class Bu{constructor(e,t){this.type="float",this.mode=t,this.comps_=Kd(e,t,this.type)}getComponents(e){return Da($d(Yn(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const A_={int:(n,e)=>new me(n,e),float:(n,e)=>new Bu(n,e)};function Iu(n,e,t){return A_[t](n,e)}function k_(n){return n.type==="float"}function R_(n){return n.type==="int"}function L_(n){const e=n.getComponents(),t=ss(n.mode,"int");return new me([Math.round(ye(e[0],0,1,0,t[0])),Math.round(ye(e[1],0,1,0,t[1])),Math.round(ye(e[2],0,1,0,t[2])),e[3]],n.mode)}function O_(n){const e=n.getComponents(),t=ss(n.mode,"int");return new Bu([ye(e[0],0,t[0],0,1),ye(e[1],0,t[1],0,1),ye(e[2],0,t[2],0,1),e[3]],n.mode)}function Ut(n,e){if(n.type===e)return n;if(R_(n)&&e==="float")return O_(n);if(k_(n)&&e==="int")return L_(n);throw on.shouldNeverHappen()}function D_(n,e){return n.alpha===e.alpha&&n.mode===e.mode&&n.notation===e.notation&&n.type===e.type}function yn(n,e){const t=n.match(/^(.+)%$/);return Math.min(t?parseFloat(t[1])*.01*e:parseFloat(n),e)}const B_={deg:n=>n,grad:n=>n*360/400,rad:n=>n*360/(2*Math.PI),turn:n=>n*360};function Xd(n){const e=n.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(n);const t=parseFloat(e[1]),r=e[2];return B_[r](t)}function qd(n){const e=n.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[yn(e[1],255),yn(e[2],255),yn(e[3],255)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function I_(n){const e=qd(n);return e?new me(e,"rgb"):null}function Yd(n){const e=n.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[yn(e[1],255),yn(e[2],255),yn(e[3],255),yn(e[4],1)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function U_(n){const e=Yd(n);return e?new me(e,"rgb"):null}function Zd(n){const e=n.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[Xd(e[1]),yn(e[2],100),yn(e[3],100)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function F_(n){const e=Zd(n);return e?new me(e,"hsl"):null}function Qd(n){const e=n.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[Xd(e[1]),yn(e[2],100),yn(e[3],100),yn(e[4],1)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function N_(n){const e=Qd(n);return e?new me(e,"hsl"):null}function Jd(n){const e=n.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const t=n.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}function V_(n){const e=Jd(n);return e?new me(e,"rgb"):null}function ep(n){const e=n.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),ye(parseInt(e[4]+e[4],16),0,255,0,1)];const t=n.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),ye(parseInt(t[4],16),0,255,0,1)]:null}function z_(n){const e=ep(n);return e?new me(e,"rgb"):null}function tp(n){const e=n.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const t=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function H_(n){return e=>{const t=tp(e);return t?Iu(t,"rgb",n):null}}function np(n){const e=n.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const t=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function j_(n){return e=>{const t=np(e);return t?Iu(t,"rgb",n):null}}const G_=[{parser:Jd,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:ep,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:qd,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Yd,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:Zd,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Qd,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:tp,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:np,result:{alpha:!0,mode:"rgb",notation:"object"}}];function K_(n){return G_.reduce((e,{parser:t,result:r})=>e||(t(n)?r:null),null)}function $_(n,e="int"){const t=K_(n);return t?t.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},t),{type:"int"}):t.notation==="func"?Object.assign(Object.assign({},t),{type:e}):null:null}function _o(n){const e=[V_,z_,I_,U_,F_,N_];e.push(H_("int"),j_("int"));const t=a_(e);return r=>{const i=t(r);return i?Ut(i,n):null}}function W_(n){const e=_o("int");if(typeof n!="string")return me.black();const t=e(n);return t??me.black()}function rp(n){const e=it(Math.floor(n),0,255).toString(16);return e.length===1?`0${e}`:e}function Uu(n,e="#"){const t=Yn(n.getComponents("rgb")).map(rp).join("");return`${e}${t}`}function Fu(n,e="#"){const t=n.getComponents("rgb"),r=[t[0],t[1],t[2],t[3]*255].map(rp).join("");return`${e}${r}`}function ip(n){const e=Zt(0),t=Ut(n,"int");return`rgb(${Yn(t.getComponents("rgb")).map(i=>e(i)).join(", ")})`}function Wo(n){const e=Zt(2),t=Zt(0);return`rgba(${Ut(n,"int").getComponents("rgb").map((s,o)=>(o===3?e:t)(s)).join(", ")})`}function X_(n){const e=[Zt(0),ha,ha],t=Ut(n,"int");return`hsl(${Yn(t.getComponents("hsl")).map((i,s)=>e[s](i)).join(", ")})`}function q_(n){const e=[Zt(0),ha,ha,Zt(2)];return`hsla(${Ut(n,"int").getComponents("hsl").map((i,s)=>e[s](i)).join(", ")})`}function sp(n,e){const t=Zt(e==="float"?2:0),r=["r","g","b"],i=Ut(n,e);return`{${Yn(i.getComponents("rgb")).map((o,a)=>`${r[a]}: ${t(o)}`).join(", ")}}`}function Y_(n){return e=>sp(e,n)}function op(n,e){const t=Zt(2),r=Zt(e==="float"?2:0),i=["r","g","b","a"];return`{${Ut(n,e).getComponents("rgb").map((a,l)=>{const u=l===3?t:r;return`${i[l]}: ${u(a)}`}).join(", ")}}`}function Z_(n){return e=>op(e,n)}const Q_=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Uu},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:Fu},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:ip},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:Wo},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:X_},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:q_},...["int","float"].reduce((n,e)=>[...n,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:Y_(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:Z_(e)}],[])];function ap(n){return Q_.reduce((e,t)=>e||(D_(t.format,n)?t.stringifier:null),null)}const xs=_e("apl");class J_{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(xs()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(xs("b")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(xs("c")),r.appendChild(i),this.colorElem_=i;const s=e.createElement("div");s.classList.add(xs("m")),this.element.appendChild(s),this.markerElem_=s;const o=e.createElement("div");o.classList.add(xs("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const e=this.value.rawValue,t=e.getComponents("rgb"),r=new me([t[0],t[1],t[2],0],"rgb"),i=new me([t[0],t[1],t[2],255],"rgb"),s=["to right",Wo(r),Wo(i)];this.colorElem_.style.background=`linear-gradient(${s.join(",")})`,this.previewElem_.style.backgroundColor=Wo(e);const o=ye(t[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}}class e0{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new J_(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Mi(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const r=e.point.x/e.bounds.width,i=this.value.rawValue,[s,o,a]=i.getComponents("hsv");this.value.setRawValue(new me([s,o,a,r],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=Kt(yi(!0),pr(e));if(t===0)return;const r=this.value.rawValue,[i,s,o,a]=r.getComponents("hsv");this.value.setRawValue(new me([i,s,o,a+t],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Kt(yi(!0),pr(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Di=_e("coltxt");function t0(n){const e=n.createElement("select"),t=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(t.reduce((r,i)=>{const s=n.createElement("option");return s.textContent=i.text,s.value=i.value,r.appendChild(s),r},n.createDocumentFragment())),e}class n0{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Di()),t.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(Di("m")),this.modeElem_=t0(e),this.modeElem_.classList.add(Di("ms")),r.appendChild(this.modeSelectElement),t.viewProps.bindDisabled(this.modeElem_);const i=e.createElement("div");i.classList.add(Di("mm")),i.appendChild(Ra(e,"dropdown")),r.appendChild(i),this.element.appendChild(r);const s=e.createElement("div");s.classList.add(Di("w")),this.element.appendChild(s),this.inputsElem_=s,this.inputViews_=t.inputViews,this.applyInputViews_(),ur(t.mode,o=>{this.modeElem_.value=o})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){Rd(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(t=>{const r=e.createElement("div");r.classList.add(Di("c")),r.appendChild(t.element),this.inputsElem_.appendChild(r)})}}function r0(n){return Zt(n==="float"?2:0)}function i0(n,e,t){const r=ss(n,e)[t];return new Aa({min:0,max:r})}function s0(n,e,t){return new vo(n,{arrayPosition:t===0?"fst":t===2?"lst":"mid",parser:e.parser,props:ge.fromObject({formatter:r0(e.colorType),keyScale:yi(!1),pointerScale:e.colorType==="float"?.01:1}),value:pt(0,{constraint:i0(e.colorMode,e.colorType,t)}),viewProps:e.viewProps})}function o0(n,e){const t={colorMode:e.colorMode,colorType:e.colorType,parser:Vr,viewProps:e.viewProps};return[0,1,2].map(r=>{const i=s0(n,t,r);return ms({primary:e.value,secondary:i.value,forward(s){return Ut(s,e.colorType).getComponents(e.colorMode)[r]},backward(s,o){const a=e.colorMode,u=Ut(s,e.colorType).getComponents(a);u[r]=o;const c=Iu(Da(Yn(u),u[3]),a,e.colorType);return Ut(c,"int")}}),i})}function a0(n,e){const t=new Ou(n,{parser:_o("int"),props:ge.fromObject({formatter:Uu}),value:pt(me.black()),viewProps:e.viewProps});return ms({primary:e.value,secondary:t.value,forward:r=>new me(Yn(r.getComponents()),r.mode),backward:(r,i)=>new me(Da(Yn(i.getComponents(r.mode)),r.getComponents()[3]),r.mode)}),[t]}function l0(n){return n!=="hex"}class u0{constructor(e,t){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=t.colorType,this.value=t.value,this.viewProps=t.viewProps,this.colorMode=pt(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new n0(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const t=this.colorMode.rawValue;return l0(t)?o0(e,{colorMode:t,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):a0(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const t=e.currentTarget;this.colorMode.rawValue=t.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(r=>r.view)}}const Ya=_e("hpl");class c0{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Ya()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(Ya("c")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(Ya("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=this.value.rawValue,[t]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=ip(new me([t,100,100],"hsv"));const r=ye(t,0,360,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}}class h0{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new c0(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Mi(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const r=ye(it(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),i=this.value.rawValue,[,s,o,a]=i.getComponents("hsv");this.value.setRawValue(new me([r,s,o,a],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=Kt(yi(!1),pr(e));if(t===0)return;const r=this.value.rawValue,[i,s,o,a]=r.getComponents("hsv");this.value.setRawValue(new me([i+t,s,o,a],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Kt(yi(!1),pr(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Za=_e("svp"),jc=64;class d0{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Za()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const r=e.createElement("canvas");r.height=jc,r.width=jc,r.classList.add(Za("c")),this.element.appendChild(r),this.canvasElement=r;const i=e.createElement("div");i.classList.add(Za("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=Tg(this.canvasElement);if(!e)return;const r=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,s=this.canvasElement.height,o=e.getImageData(0,0,i,s),a=o.data;for(let c=0;c<s;c++)for(let h=0;h<i;h++){const p=ye(h,0,i,0,100),d=ye(c,0,s,100,0),g=Gd(r[0],p,d),f=(c*i+h)*4;a[f]=g[0],a[f+1]=g[1],a[f+2]=g[2],a[f+3]=255}e.putImageData(o,0,0);const l=ye(r[1],0,100,0,100);this.markerElem_.style.left=`${l}%`;const u=ye(r[2],0,100,100,0);this.markerElem_.style.top=`${u}%`}onValueChange_(){this.update_()}}class p0{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new d0(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Mi(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const r=ye(e.point.x,0,e.bounds.width,0,100),i=ye(e.point.y,0,e.bounds.height,100,0),[s,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new me([s,r,i,o],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){zd(e.key)&&e.preventDefault();const[t,r,i,s]=this.value.rawValue.getComponents("hsv"),o=yi(!1),a=Kt(o,pr(e)),l=Kt(o,Js(e));a===0&&l===0||this.value.setRawValue(new me([t,r+a,i+l,s],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const t=yi(!1),r=Kt(t,pr(e)),i=Kt(t,Js(e));r===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class f0{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.hPaletteC_=new h0(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new p0(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=t.supportsAlpha?{palette:new e0(e,{value:this.value,viewProps:this.viewProps}),text:new vo(e,{parser:Vr,props:ge.fromObject({pointerScale:.01,keyScale:.1,formatter:Zt(2)}),value:pt(0,{constraint:new Aa({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&ms({primary:this.value,secondary:this.alphaIcs_.text.value,forward:r=>r.getComponents()[3],backward:(r,i)=>{const s=r.getComponents();return s[3]=i,new me(s,r.mode)}}),this.textsC_=new u0(e,{colorType:t.colorType,value:this.value,viewProps:this.viewProps}),this.view=new E_(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:t.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const Qa=_e("colsw");class m0{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.element=e.createElement("div"),this.element.classList.add(Qa()),t.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(Qa("sw")),this.element.appendChild(r),this.swatchElem_=r;const i=e.createElement("button");i.classList.add(Qa("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=Fu(e)}onValueChange_(){this.update_()}}class v0{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new m0(e,{value:this.value,viewProps:this.viewProps})}}class Nu{constructor(e,t){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=po.create(t.expanded),this.swatchC_=new v0(e,{value:this.value,viewProps:this.viewProps});const r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new Ou(e,{parser:t.parser,props:ge.fromObject({formatter:t.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new w_(e,{foldable:this.foldable_,pickerLayout:t.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=t.pickerLayout==="popup"?new Fd(e,{viewProps:this.viewProps}):null;const i=new f0(e,{colorType:t.colorType,supportsAlpha:t.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(s=>{s.addEventListener("blur",this.onPopupChildBlur_),s.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),ms({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:s=>s,backward:(s,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),ku(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,r=e.relatedTarget;(!r||!t.contains(r))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,r=Ld(e);r&&t.contains(r)||r&&r===this.swatchC_.view.buttonElement&&!Cu(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function g0(n){return Yn(n.getComponents("rgb")).reduce((e,t)=>e<<8|Math.floor(t)&255,0)}function _0(n){return n.getComponents("rgb").reduce((e,t,r)=>{const i=Math.floor(r===3?t*255:t)&255;return e<<8|i},0)>>>0}function w0(n){return new me([n>>16&255,n>>8&255,n&255],"rgb")}function b0(n){return new me([n>>24&255,n>>16&255,n>>8&255,ye(n&255,0,255,0,1)],"rgb")}function y0(n){return typeof n!="number"?me.black():w0(n)}function x0(n){return typeof n!="number"?me.black():b0(n)}function Xo(n,e){return typeof n!="object"||ze(n)?!1:e in n&&typeof n[e]=="number"}function lp(n){return Xo(n,"r")&&Xo(n,"g")&&Xo(n,"b")}function up(n){return lp(n)&&Xo(n,"a")}function cp(n){return lp(n)}function Vu(n,e){if(n.mode!==e.mode||n.type!==e.type)return!1;const t=n.getComponents(),r=e.getComponents();for(let i=0;i<t.length;i++)if(t[i]!==r[i])return!1;return!0}function Gc(n){return"a"in n?[n.r,n.g,n.b,n.a]:[n.r,n.g,n.b]}function T0(n){const e=ap(n);return e?(t,r)=>{go(t,e(r))}:null}function C0(n){const e=n?_0:g0;return(t,r)=>{go(t,e(r))}}function S0(n,e,t){const i=Ut(e,t).toRgbaObject();n.writeProperty("r",i.r),n.writeProperty("g",i.g),n.writeProperty("b",i.b),n.writeProperty("a",i.a)}function P0(n,e,t){const i=Ut(e,t).toRgbaObject();n.writeProperty("r",i.r),n.writeProperty("g",i.g),n.writeProperty("b",i.b)}function E0(n,e){return(t,r)=>{n?S0(t,r,e):P0(t,r,e)}}function M0(n){var e;return!!(!((e=n==null?void 0:n.color)===null||e===void 0)&&e.alpha)}function A0(n){return n?e=>Fu(e,"0x"):e=>Uu(e,"0x")}function k0(n){return"color"in n||n.view==="color"}Ft({id:"input-color-number",type:"input",accept:(n,e)=>{if(typeof n!="number"||!k0(e))return null;const t=Du(e);return t?{initialValue:n,params:Object.assign(Object.assign({},t),{supportsAlpha:M0(e)})}:null},binding:{reader:n=>n.params.supportsAlpha?x0:y0,equals:Vu,writer:n=>C0(n.params.supportsAlpha)},controller:n=>{var e,t;return new Nu(n.document,{colorType:"int",expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:A0(n.params.supportsAlpha),parser:_o("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:n.params.supportsAlpha,value:n.value,viewProps:n.viewProps})}});function R0(n,e){if(!cp(n))return Ut(me.black(),e);if(e==="int"){const t=Gc(n);return new me(t,"rgb")}if(e==="float"){const t=Gc(n);return new Bu(t,"rgb")}return Ut(me.black(),"int")}function L0(n){return up(n)}function O0(n){return e=>{const t=R0(e,n);return Ut(t,"int")}}function D0(n,e){return t=>n?op(t,e):sp(t,e)}Ft({id:"input-color-object",type:"input",accept:(n,e)=>{var t;if(!cp(n))return null;const r=Du(e);return r?{initialValue:n,params:Object.assign(Object.assign({},r),{colorType:(t=Wd(e))!==null&&t!==void 0?t:"int"})}:null},binding:{reader:n=>O0(n.params.colorType),equals:Vu,writer:n=>E0(L0(n.initialValue),n.params.colorType)},controller:n=>{var e,t;const r=up(n.initialValue);return new Nu(n.document,{colorType:n.params.colorType,expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:D0(r,n.params.colorType),parser:_o("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:r,value:n.value,viewProps:n.viewProps})}});Ft({id:"input-color-string",type:"input",accept:(n,e)=>{if(typeof n!="string"||e.view==="text")return null;const t=$_(n,Wd(e));if(!t)return null;const r=ap(t);if(!r)return null;const i=Du(e);return i?{initialValue:n,params:Object.assign(Object.assign({},i),{format:t,stringifier:r})}:null},binding:{reader:()=>W_,equals:Vu,writer:n=>{const e=T0(n.params.format);if(!e)throw on.notBindable();return e}},controller:n=>{var e,t;return new Nu(n.document,{colorType:n.params.format.type,expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:n.params.stringifier,parser:_o("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:n.params.format.alpha,value:n.value,viewProps:n.viewProps})}});class zu{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const t=this.asm_.toComponents(e).map((r,i)=>{var s,o;return(o=(s=this.components[i])===null||s===void 0?void 0:s.constrain(r))!==null&&o!==void 0?o:r});return this.asm_.fromComponents(t)}}const Kc=_e("pndtxt");class B0{constructor(e,t){this.textViews=t.textViews,this.element=e.createElement("div"),this.element.classList.add(Kc()),this.textViews.forEach(r=>{const i=e.createElement("div");i.classList.add(Kc("a")),i.appendChild(r.element),this.element.appendChild(i)})}}function I0(n,e,t){return new vo(n,{arrayPosition:t===0?"fst":t===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[t].textProps,value:pt(0,{constraint:e.axes[t].constraint}),viewProps:e.viewProps})}class Hu{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.acs_=t.axes.map((r,i)=>I0(e,t,i)),this.acs_.forEach((r,i)=>{ms({primary:this.value,secondary:r.value,forward:s=>t.assembly.toComponents(s)[i],backward:(s,o)=>{const a=t.assembly.toComponents(s);return a[i]=o,t.assembly.fromComponents(a)}})}),this.view=new B0(e,{textViews:this.acs_.map(r=>r.view)})}get textControllers(){return this.acs_}}class U0 extends Tu{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}}function F0(n,e){const t=[],r=Sd(n,e);r&&t.push(r);const i=Pd(n);i&&t.push(i);const s=Lu(n.options);return s&&t.push(s),new mo(t)}Ft({id:"input-number",type:"input",accept:(n,e)=>{if(typeof n!="number")return null;const t=Pt(e,r=>Object.assign(Object.assign({},Md(r)),{options:r.optional.custom(Oa),readonly:r.optional.constant(!1)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>xd,constraint:n=>F0(n.params,n.initialValue),writer:n=>go},controller:n=>{const e=n.value,t=n.constraint,r=t&&ca(t,La);if(r)return new is(n.document,{props:new ge({options:r.values.value("options")}),value:e,viewProps:n.viewProps});const i=Ed(n.params,e.rawValue),s=t&&ca(t,Aa);return s?new zc(n.document,Object.assign(Object.assign({},f_(Object.assign(Object.assign({},i),{keyScale:pt(i.keyScale),max:s.values.value("max"),min:s.values.value("min")}))),{parser:Vr,value:e,viewProps:n.viewProps})):new vo(n.document,{parser:Vr,props:ge.fromObject(i),value:e,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="number"?null:n.controller.valueController instanceof zc?new U0(n.controller):n.controller.valueController instanceof is?new Ru(n.controller):null}});class Dr{constructor(e=0,t=0){this.x=e,this.y=t}getComponents(){return[this.x,this.y]}static isObject(e){if(ze(e))return!1;const t=e.x,r=e.y;return!(typeof t!="number"||typeof r!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y}toObject(){return{x:this.x,y:this.y}}}const hp={toComponents:n=>n.getComponents(),fromComponents:n=>new Dr(...n)},Bi=_e("p2d");class N0{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Bi()),t.viewProps.bindClassModifiers(this.element),ur(t.expanded,fs(this.element,Bi(void 0,"expanded")));const r=e.createElement("div");r.classList.add(Bi("h")),this.element.appendChild(r);const i=e.createElement("button");i.classList.add(Bi("b")),i.appendChild(Ra(e,"p2dpad")),t.viewProps.bindDisabled(i),r.appendChild(i),this.buttonElement=i;const s=e.createElement("div");if(s.classList.add(Bi("t")),r.appendChild(s),this.textElement=s,t.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(Bi("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}const wr=_e("p2dp");class V0{constructor(e,t){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(wr()),t.layout==="popup"&&this.element.classList.add(wr(void 0,"p")),t.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(wr("p")),t.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;const i=e.createElementNS(Gn,"svg");i.classList.add(wr("g")),this.padElement.appendChild(i),this.svgElem_=i;const s=e.createElementNS(Gn,"line");s.classList.add(wr("ax")),s.setAttributeNS(null,"x1","0"),s.setAttributeNS(null,"y1","50%"),s.setAttributeNS(null,"x2","100%"),s.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(s);const o=e.createElementNS(Gn,"line");o.classList.add(wr("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const a=e.createElementNS(Gn,"line");a.classList.add(wr("l")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(a),this.lineElem_=a;const l=e.createElement("div");l.classList.add(wr("m")),this.padElement.appendChild(l),this.markerElem_=l,t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,t]=this.value.rawValue.getComponents(),r=this.props_.get("max"),i=ye(e,-r,+r,0,100),s=ye(t,-r,+r,0,100),o=this.props_.get("invertsY")?100-s:s;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function $c(n,e,t){return[Kt(e[0],pr(n)),Kt(e[1],Js(n))*(t?1:-1)]}class z0{constructor(e,t){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new V0(e,{layout:t.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Mi(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const r=this.props.get("max"),i=ye(e.point.x,0,e.bounds.width,-r,+r),s=ye(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-r,+r);this.value.setRawValue(new Dr(i,s),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){zd(e.key)&&e.preventDefault();const[t,r]=$c(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));t===0&&r===0||this.value.setRawValue(new Dr(this.value.rawValue.x+t,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[t,r]=$c(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));t===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class H0{constructor(e,t){var r,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=po.create(t.expanded),this.popC_=t.pickerLayout==="popup"?new Fd(e,{viewProps:this.viewProps}):null;const s=new z0(e,{layout:t.pickerLayout,props:new ge({invertsY:pt(t.invertsY),max:pt(t.max),xKeyScale:t.axes[0].textProps.value("keyScale"),yKeyScale:t.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=s,this.textC_=new Hu(e,{assembly:hp,axes:t.axes,parser:t.parser,value:this.value,viewProps:this.viewProps}),this.view=new N0(e,{expanded:this.foldable_.value("expanded"),pickerLayout:t.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("blur",this.onPadButtonBlur_),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),ms({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,a)=>a})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),ku(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,r=e.relatedTarget;(!r||!t.contains(r))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,r=Ld(e);r&&t.contains(r)||r&&r===this.view.buttonElement&&!Cu(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}}function j0(n){return Dr.isObject(n)?new Dr(n.x,n.y):new Dr}function G0(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y)}function K0(n,e){return new zu({assembly:hp,components:[ar(Object.assign(Object.assign({},n),n.x),e.x),ar(Object.assign(Object.assign({},n),n.y),e.y)]})}function Wc(n,e){var t,r;if(!ze(n.min)||!ze(n.max))return Math.max(Math.abs((t=n.min)!==null&&t!==void 0?t:0),Math.abs((r=n.max)!==null&&r!==void 0?r:0));const i=Cd(n);return Math.max(Math.abs(i)*10,Math.abs(e)*10)}function $0(n,e){var t,r;const i=Wc(bi(n,(t=n.x)!==null&&t!==void 0?t:{}),e.x),s=Wc(bi(n,(r=n.y)!==null&&r!==void 0?r:{}),e.y);return Math.max(i,s)}function W0(n){if(!("y"in n))return!1;const e=n.y;return e&&"inverted"in e?!!e.inverted:!1}Ft({id:"input-point2d",type:"input",accept:(n,e)=>{if(!Dr.isObject(n))return null;const t=Pt(e,r=>Object.assign(Object.assign({},eo(r)),{expanded:r.optional.boolean,picker:r.optional.custom(jd),readonly:r.optional.constant(!1),x:r.optional.custom(Mr),y:r.optional.object(Object.assign(Object.assign({},eo(r)),{inverted:r.optional.boolean}))}));return t?{initialValue:n,params:t}:null},binding:{reader:()=>j0,constraint:n=>K0(n.params,n.initialValue),equals:Dr.equals,writer:()=>G0},controller:n=>{var e,t;const r=n.document,i=n.value,s=n.constraint,o=[n.params.x,n.params.y];return new H0(r,{axes:i.rawValue.getComponents().map((a,l)=>{var u;return yu({constraint:s.components[l],initialValue:a,params:bi(n.params,(u=o[l])!==null&&u!==void 0?u:{})})}),expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,invertsY:W0(n.params),max:$0(n.params,i.rawValue),parser:Vr,pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",value:i,viewProps:n.viewProps})}});class Xi{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.z=r}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(ze(e))return!1;const t=e.x,r=e.y,i=e.z;return!(typeof t!="number"||typeof r!="number"||typeof i!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const dp={toComponents:n=>n.getComponents(),fromComponents:n=>new Xi(...n)};function X0(n){return Xi.isObject(n)?new Xi(n.x,n.y,n.z):new Xi}function q0(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y),n.writeProperty("z",e.z)}function Y0(n,e){return new zu({assembly:dp,components:[ar(Object.assign(Object.assign({},n),n.x),e.x),ar(Object.assign(Object.assign({},n),n.y),e.y),ar(Object.assign(Object.assign({},n),n.z),e.z)]})}Ft({id:"input-point3d",type:"input",accept:(n,e)=>{if(!Xi.isObject(n))return null;const t=Pt(e,r=>Object.assign(Object.assign({},eo(r)),{readonly:r.optional.constant(!1),x:r.optional.custom(Mr),y:r.optional.custom(Mr),z:r.optional.custom(Mr)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>X0,constraint:n=>Y0(n.params,n.initialValue),equals:Xi.equals,writer:n=>q0},controller:n=>{const e=n.value,t=n.constraint,r=[n.params.x,n.params.y,n.params.z];return new Hu(n.document,{assembly:dp,axes:e.rawValue.getComponents().map((i,s)=>{var o;return yu({constraint:t.components[s],initialValue:i,params:bi(n.params,(o=r[s])!==null&&o!==void 0?o:{})})}),parser:Vr,value:e,viewProps:n.viewProps})}});class qi{constructor(e=0,t=0,r=0,i=0){this.x=e,this.y=t,this.z=r,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(ze(e))return!1;const t=e.x,r=e.y,i=e.z,s=e.w;return!(typeof t!="number"||typeof r!="number"||typeof i!="number"||typeof s!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const pp={toComponents:n=>n.getComponents(),fromComponents:n=>new qi(...n)};function Z0(n){return qi.isObject(n)?new qi(n.x,n.y,n.z,n.w):new qi}function Q0(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y),n.writeProperty("z",e.z),n.writeProperty("w",e.w)}function J0(n,e){return new zu({assembly:pp,components:[ar(Object.assign(Object.assign({},n),n.x),e.x),ar(Object.assign(Object.assign({},n),n.y),e.y),ar(Object.assign(Object.assign({},n),n.z),e.z),ar(Object.assign(Object.assign({},n),n.w),e.w)]})}Ft({id:"input-point4d",type:"input",accept:(n,e)=>{if(!qi.isObject(n))return null;const t=Pt(e,r=>Object.assign(Object.assign({},eo(r)),{readonly:r.optional.constant(!1),w:r.optional.custom(Mr),x:r.optional.custom(Mr),y:r.optional.custom(Mr),z:r.optional.custom(Mr)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Z0,constraint:n=>J0(n.params,n.initialValue),equals:qi.equals,writer:n=>Q0},controller:n=>{const e=n.value,t=n.constraint,r=[n.params.x,n.params.y,n.params.z,n.params.w];return new Hu(n.document,{assembly:pp,axes:e.rawValue.getComponents().map((i,s)=>{var o;return yu({constraint:t.components[s],initialValue:i,params:bi(n.params,(o=r[s])!==null&&o!==void 0?o:{})})}),parser:Vr,value:e,viewProps:n.viewProps})}});function ew(n){const e=[],t=Lu(n.options);return t&&e.push(t),new mo(e)}Ft({id:"input-string",type:"input",accept:(n,e)=>{if(typeof n!="string")return null;const t=Pt(e,r=>({readonly:r.optional.constant(!1),options:r.optional.custom(Oa)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Vd,constraint:n=>ew(n.params),writer:n=>go},controller:n=>{const e=n.document,t=n.value,r=n.constraint,i=r&&ca(r,La);return i?new is(e,{props:new ge({options:i.values.value("options")}),value:t,viewProps:n.viewProps}):new Ou(e,{parser:s=>s,props:ge.fromObject({formatter:kl}),value:t,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="string"?null:n.controller.valueController instanceof is?new Ru(n.controller):null}});const Ba={monitor:{defaultInterval:200,defaultRows:3}},Xc=_e("mll");class tw{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(Xc()),t.viewProps.bindClassModifiers(this.element);const r=e.createElement("textarea");r.classList.add(Xc("i")),r.style.height=`calc(var(${Hd("containerUnitSize")}) * ${t.rows})`,r.readOnly=!0,t.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.textareaElem_,t=e.scrollTop===e.scrollHeight-e.clientHeight,r=[];this.value.rawValue.forEach(i=>{i!==void 0&&r.push(this.formatter_(i))}),e.textContent=r.join(`
`),t&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class ju{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new tw(e,{formatter:t.formatter,rows:t.rows,value:this.value,viewProps:this.viewProps})}}const qc=_e("sgl");class nw{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(qc()),t.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(qc("i")),r.readOnly=!0,r.type="text",t.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.value.rawValue,t=e[e.length-1];this.inputElement.value=t!==void 0?this.formatter_(t):""}onValueUpdate_(){this.update_()}}class Gu{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new nw(e,{formatter:t.formatter,value:this.value,viewProps:this.viewProps})}}Ft({id:"monitor-bool",type:"monitor",accept:(n,e)=>{if(typeof n!="boolean")return null;const t=Pt(e,r=>({readonly:r.required.constant(!0),rows:r.optional.number}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Nd},controller:n=>{var e;return n.value.rawValue.length===1?new Gu(n.document,{formatter:Vc,value:n.value,viewProps:n.viewProps}):new ju(n.document,{formatter:Vc,rows:(e=n.params.rows)!==null&&e!==void 0?e:Ba.monitor.defaultRows,value:n.value,viewProps:n.viewProps})}});class rw extends Tu{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}}const br=_e("grl");class iw{constructor(e,t){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(br()),t.viewProps.bindClassModifiers(this.element),this.formatter_=t.formatter,this.props_=t.props,this.cursor_=t.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const r=e.createElementNS(Gn,"svg");r.classList.add(br("g")),r.style.height=`calc(var(${Hd("containerUnitSize")}) * ${t.rows})`,this.element.appendChild(r),this.svgElem_=r;const i=e.createElementNS(Gn,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const s=e.createElement("div");s.classList.add(br("t"),_e("tt")()),this.element.appendChild(s),this.tooltipElem_=s,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:e,clientHeight:t}=this.element,r=this.value.rawValue.length-1,i=this.props_.get("min"),s=this.props_.get("max"),o=[];this.value.rawValue.forEach((h,p)=>{if(h===void 0)return;const d=ye(p,0,r,0,e),g=ye(h,i,s,t,0);o.push([d,g].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const a=this.tooltipElem_,l=this.value.rawValue[this.cursor_.rawValue];if(l===void 0){a.classList.remove(br("t","a"));return}const u=ye(this.cursor_.rawValue,0,r,0,e),c=ye(l,i,s,t,0);a.style.left=`${u}px`,a.style.top=`${c}px`,a.textContent=`${this.formatter_(l)}`,a.classList.contains(br("t","a"))||(a.classList.add(br("t","a"),br("t","in")),ua(a),a.classList.remove(br("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class fp{constructor(e,t){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.cursor_=pt(-1),this.view=new iw(e,{cursor:this.cursor_,formatter:t.formatter,rows:t.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!Cu(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const r=new Mi(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return Qn(e,null,t=>({max:t.required.number,min:t.required.number}),t=>(this.props.set("max",t.max),this.props.set("min",t.min),!0))}exportProps(){return Jn(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const{clientWidth:t}=this.view.element;this.cursor_.rawValue=Math.floor(ye(e.offsetX,0,t,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(ye(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function Rl(n){return ze(n.format)?Zt(2):n.format}function sw(n){var e;return n.value.rawValue.length===1?new Gu(n.document,{formatter:Rl(n.params),value:n.value,viewProps:n.viewProps}):new ju(n.document,{formatter:Rl(n.params),rows:(e=n.params.rows)!==null&&e!==void 0?e:Ba.monitor.defaultRows,value:n.value,viewProps:n.viewProps})}function ow(n){var e,t,r;return new fp(n.document,{formatter:Rl(n.params),rows:(e=n.params.rows)!==null&&e!==void 0?e:Ba.monitor.defaultRows,props:ge.fromObject({max:(t=n.params.max)!==null&&t!==void 0?t:100,min:(r=n.params.min)!==null&&r!==void 0?r:0}),value:n.value,viewProps:n.viewProps})}function Yc(n){return n.view==="graph"}Ft({id:"monitor-number",type:"monitor",accept:(n,e)=>{if(typeof n!="number")return null;const t=Pt(e,r=>({format:r.optional.function,max:r.optional.number,min:r.optional.number,readonly:r.required.constant(!0),rows:r.optional.number,view:r.optional.string}));return t?{initialValue:n,params:t}:null},binding:{defaultBufferSize:n=>Yc(n)?64:1,reader:n=>xd},controller:n=>Yc(n.params)?ow(n):sw(n),api:n=>n.controller.valueController instanceof fp?new rw(n.controller):null});Ft({id:"monitor-string",type:"monitor",accept:(n,e)=>{if(typeof n!="string")return null;const t=Pt(e,r=>({multiline:r.optional.boolean,readonly:r.required.constant(!0),rows:r.optional.number}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Vd},controller:n=>{var e;const t=n.value;return t.rawValue.length>1||n.params.multiline?new ju(n.document,{formatter:kl,rows:(e=n.params.rows)!==null&&e!==void 0?e:Ba.monitor.defaultRows,value:t,viewProps:n.viewProps}):new Gu(n.document,{formatter:kl,value:t,viewProps:n.viewProps})}});new Dd("4.0.3");function Zc(n,e){if(e===Km)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===Cl||e===td){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(t)if(e===Cl)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}const aw=parseInt(Ma.replace(/\D+/g,""));var wo=Uint8Array,mp=Uint16Array,lw=Uint32Array,uw=new wo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),cw=new wo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),vp=function(n,e){for(var t=new mp(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new lw(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},gp=vp(uw,2),hw=gp[0],dw=gp[1];hw[28]=258,dw[258]=28;vp(cw,0);var pw=new mp(32768);for(var De=0;De<32768;++De){var yr=(De&43690)>>>1|(De&21845)<<1;yr=(yr&52428)>>>2|(yr&13107)<<2,yr=(yr&61680)>>>4|(yr&3855)<<4,pw[De]=((yr&65280)>>>8|(yr&255)<<8)>>>1}var Ia=new wo(288);for(var De=0;De<144;++De)Ia[De]=8;for(var De=144;De<256;++De)Ia[De]=9;for(var De=256;De<280;++De)Ia[De]=7;for(var De=280;De<288;++De)Ia[De]=8;var fw=new wo(32);for(var De=0;De<32;++De)fw[De]=5;var mw=new wo(0),vw=typeof TextDecoder<"u"&&new TextDecoder,gw=0;try{vw.decode(mw,{stream:!0}),gw=1}catch{}new fm;new Te;new Kh(0,0,0,"YXZ");new Te;new mm;new $h;class _w extends Yh{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Tw(t)}),this.register(function(t){return new Rw(t)}),this.register(function(t){return new Lw(t)}),this.register(function(t){return new Ow(t)}),this.register(function(t){return new Sw(t)}),this.register(function(t){return new Pw(t)}),this.register(function(t){return new Ew(t)}),this.register(function(t){return new Mw(t)}),this.register(function(t){return new xw(t)}),this.register(function(t){return new Aw(t)}),this.register(function(t){return new Cw(t)}),this.register(function(t){return new kw(t)}),this.register(function(t){return new bw(t)}),this.register(function(t){return new Dw(t)}),this.register(function(t){return new Bw(t)})}load(e,t,r,i){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=ui.extractUrlBase(e),this.manager.itemStart(e);const a=function(u){i?i(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},l=new oa(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{s.parse(u,o,function(c){t(c),s.manager.itemEnd(e)},a)}catch(c){a(c)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(ui.decodeText(new Uint8Array(e.slice(0,4)))===_p){try{o[ce.KHR_BINARY_GLTF]=new Iw(e)}catch(u){i&&i(u);return}s=JSON.parse(o[ce.KHR_BINARY_GLTF].content)}else s=JSON.parse(ui.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new qw(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const c=this.pluginCallbacks[u](l);a[c.name]=c,o[c.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const c=s.extensionsUsed[u],h=s.extensionsRequired||[];switch(c){case ce.KHR_MATERIALS_UNLIT:o[c]=new yw;break;case ce.KHR_DRACO_MESH_COMPRESSION:o[c]=new Uw(s,this.dracoLoader);break;case ce.KHR_TEXTURE_TRANSFORM:o[c]=new Fw;break;case ce.KHR_MESH_QUANTIZATION:o[c]=new Nw;break;default:h.indexOf(c)>=0&&a[c]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+c+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function ww(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const ce={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class bw{constructor(e){this.parser=e,this.name=ce.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,o=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let a;const l=new Yt(16777215);o.color!==void 0&&l.fromArray(o.color);const u=o.range!==void 0?o.range:0;switch(o.type){case"directional":a=new km(l),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new Am(l),a.distance=u;break;case"spot":a=new Mm(l),a.distance=u,o.spot=o.spot||{},o.spot.innerConeAngle=o.spot.innerConeAngle!==void 0?o.spot.innerConeAngle:0,o.spot.outerConeAngle=o.spot.outerConeAngle!==void 0?o.spot.outerConeAngle:Math.PI/4,a.angle=o.spot.outerConeAngle,a.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return a.position.set(0,0,0),a.decay=2,Er(a,o),o.intensity!==void 0&&(a.intensity=o.intensity),a.name=t.createUniqueName(o.name||"light_"+e),i=Promise.resolve(a),t.cache.add(r,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,i=r.json.nodes[e],s=(i.extensions&&i.extensions[this.name]||{}).light;return s===void 0?null:this._loadLight(s).then(function(o){return r._getNodeRef(t.cache,s,o)})}}class yw{constructor(){this.name=ce.KHR_MATERIALS_UNLIT}getMaterialType(){return ji}extendParams(e,t,r){const i=[];e.color=new Yt(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,3001))}return Promise.all(i)}}class xw{constructor(e){this.parser=e,this.name=ce.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=r.extensions[this.name].emissiveStrength;return i!==void 0&&(t.emissiveIntensity=i),Promise.resolve()}}class Tw{constructor(e){this.parser=e,this.name=ce.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Gr}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new je(a,a)}return Promise.all(s)}}class Cw{constructor(e){this.parser=e,this.name=ce.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Gr}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class Sw{constructor(e){this.parser=e,this.name=ce.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Gr}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Yt(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,3001)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Pw{constructor(e){this.parser=e,this.name=ce.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Gr}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Ew{constructor(e){this.parser=e,this.name=ce.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Gr}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Yt(a[0],a[1],a[2]),Promise.all(s)}}class Mw{constructor(e){this.parser=e,this.name=ce.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Gr}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=r.extensions[this.name];return t.ior=i.ior!==void 0?i.ior:1.5,Promise.resolve()}}class Aw{constructor(e){this.parser=e,this.name=ce.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Gr}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Yt(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,3001)),Promise.all(s)}}class kw{constructor(e){this.parser=e,this.name=ce.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Gr}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class Rw{constructor(e){this.parser=e,this.name=ce.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class Lw{constructor(e){this.parser=e,this.name=ce.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const u=r.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Ow{constructor(e){this.parser=e,this.name=ce.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const u=r.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Dw{constructor(e){this.name=ce.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,u=i.byteLength||0,c=i.count,h=i.byteStride,p=new Uint8Array(a,l,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(c,h,p,i.mode,i.filter).then(function(d){return d.buffer}):o.ready.then(function(){const d=new ArrayBuffer(c*h);return o.decodeGltfBuffer(new Uint8Array(d),c,h,p,i.mode,i.filter),d})})}else return null}}class Bw{constructor(e){this.name=ce.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const l of i.primitives)if(l.mode!==vn.TRIANGLES&&l.mode!==vn.TRIANGLE_STRIP&&l.mode!==vn.TRIANGLE_FAN&&l.mode!==void 0)return null;const s=r.extensions[this.name].attributes,o=[],a={};for(const l in s)o.push(this.parser.getDependency("accessor",s[l]).then(u=>(a[l]=u,a[l])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(l=>{const u=l.pop(),c=u.isGroup?u.children:[u],h=l[0].count,p=[];for(const d of c){const g=new wi,f=new Te,v=new nd,C=new Te(1,1,1),y=new Rm(d.geometry,d.material,h);for(let P=0;P<h;P++)a.TRANSLATION&&f.fromBufferAttribute(a.TRANSLATION,P),a.ROTATION&&v.fromBufferAttribute(a.ROTATION,P),a.SCALE&&C.fromBufferAttribute(a.SCALE,P),y.setMatrixAt(P,g.compose(f,v,C));for(const P in a)P!=="TRANSLATION"&&P!=="ROTATION"&&P!=="SCALE"&&d.geometry.setAttribute(P,a[P]);Zh.prototype.copy.call(y,d),this.parser.assignFinalMaterial(y),p.push(y)}return u.isGroup?(u.clear(),u.add(...p),u):p[0]}))}}const _p="glTF",Ts=12,Qc={JSON:1313821514,BIN:5130562};class Iw{constructor(e){this.name=ce.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Ts);if(this.header={magic:ui.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==_p)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Ts,i=new DataView(e,Ts);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===Qc.JSON){const l=new Uint8Array(e,Ts+s,o);this.content=ui.decodeText(l)}else if(a===Qc.BIN){const l=Ts+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Uw{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ce.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},u={};for(const c in o){const h=Ll[c]||c.toLowerCase();a[h]=o[c]}for(const c in e.attributes){const h=Ll[c]||c.toLowerCase();if(o[c]!==void 0){const p=r.accessors[e.attributes[c]],d=Yi[p.componentType];u[h]=d.name,l[h]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(c){return new Promise(function(h){i.decodeDracoFile(c,function(p){for(const d in p.attributes){const g=p.attributes[d],f=l[d];f!==void 0&&(g.normalized=f)}h(p)},a,u)})})}}class Fw{constructor(){this.name=ce.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Nw{constructor(){this.name=ce.KHR_MESH_QUANTIZATION}}class wp extends tv{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,c=i-t,h=(r-t)/c,p=h*h,d=p*h,g=e*u,f=g-u,v=-2*d+3*p,C=d-p,y=1-v,P=C-p+h;for(let T=0;T!==a;T++){const L=o[f+T+a],x=o[f+T+l]*c,S=o[g+T+a],_=o[g+T]*c;s[T]=y*L+P*x+v*S+C*_}return s}}const Vw=new nd;class zw extends wp{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return Vw.fromArray(s).normalize().toArray(s),s}}const vn={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Yi={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Jc={9728:Ys,9729:rs,9984:$m,9985:Wm,9986:Xm,9987:Qh},eh={33071:qm,33648:Ym,10497:qs},Ja={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Ll={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...aw>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},xr={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Hw={CUBICSPLINE:void 0,LINEAR:ed,STEP:Zm},el={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function jw(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Jh({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:rd})),n.DefaultMaterial}function Jr(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function Er(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Gw(n,e,t){let r=!1,i=!1,s=!1;for(let u=0,c=e.length;u<c;u++){const h=e[u];if(h.POSITION!==void 0&&(r=!0),h.NORMAL!==void 0&&(i=!0),h.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let u=0,c=e.length;u<c;u++){const h=e[u];if(r){const p=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):n.attributes.position;o.push(p)}if(i){const p=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(u){const c=u[0],h=u[1],p=u[2];return r&&(n.morphAttributes.position=c),i&&(n.morphAttributes.normal=h),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function Kw(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function $w(n){let e;const t=n.extensions&&n.extensions[ce.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+tl(t.attributes):e=n.indices+":"+tl(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,i=n.targets.length;r<i;r++)e+=":"+tl(n.targets[r]);return e}function tl(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function Ol(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Ww(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Xw=new wi;class qw{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new ww,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new Lm(this.options.manager):this.textureLoader=new Om(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new oa(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};Jr(s,a,i),Er(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[u,c]of o.children.entries())s(c,a.children[u])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[ce.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(ui.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=Ja[i.type],a=Yi[i.componentType],l=i.normalized===!0,u=new a(i.count*o);return Promise.resolve(new jn(u,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=Ja[i.type],u=Yi[i.componentType],c=u.BYTES_PER_ELEMENT,h=c*l,p=i.byteOffset||0,d=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,g=i.normalized===!0;let f,v;if(d&&d!==h){const C=Math.floor(p/d),y="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+C+":"+i.count;let P=t.cache.get(y);P||(f=new u(a,C*d,i.count*d/c),P=new Xh(f,d/c),t.cache.add(y,P)),v=new yl(P,l,p%d/c,g)}else a===null?f=new u(i.count*l):f=new u(a,p,i.count*l),v=new jn(f,l,g);if(i.sparse!==void 0){const C=Ja.SCALAR,y=Yi[i.sparse.indices.componentType],P=i.sparse.indices.byteOffset||0,T=i.sparse.values.byteOffset||0,L=new y(o[1],P,i.sparse.count*C),x=new u(o[2],T,i.sparse.count*l);a!==null&&(v=new jn(v.array.slice(),v.itemSize,v.normalized));for(let S=0,_=L.length;S<_;S++){const b=L[S];if(v.setX(b,x[S*l]),l>=2&&v.setY(b,x[S*l+1]),l>=3&&v.setZ(b,x[S*l+2]),l>=4&&v.setW(b,x[S*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(e){const t=this.json,r=this.options,i=t.textures[e].source,s=t.images[i];let o=this.textureLoader;if(s.uri){const a=r.manager.getHandler(s.uri);a!==null&&(o=a)}return this.loadTextureImage(e,i,o)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(t,r).then(function(c){c.flipY=!1,c.name=o.name||a.name||"",c.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(c.name=a.uri);const h=(s.samplers||{})[o.sampler]||{};return c.magFilter=Jc[h.magFilter]||rs,c.minFilter=Jc[h.minFilter]||Qh,c.wrapS=eh[h.wrapS]||qs,c.wrapT=eh[h.wrapT]||qs,i.associations.set(c,{textures:e}),c}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",u=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(h){u=!0;const p=new Blob([h],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(l).then(function(h){return new Promise(function(p,d){let g=p;t.isImageBitmapLoader===!0&&(g=function(f){const v=new aa(f);v.needsUpdate=!0,p(v)}),t.load(ui.resolveURL(h,s.path),g,void 0,d)})}).then(function(h){return u===!0&&a.revokeObjectURL(l),h.userData.mimeType=o.mimeType||Ww(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=c,c}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[ce.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[ce.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[ce.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&("colorSpace"in o?o.colorSpace=i===3001?"srgb":"srgb-linear":o.encoding=i),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Dm,Bs.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Bm,Bs.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return Jh}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},u=[];if(l[ce.KHR_MATERIALS_UNLIT]){const h=i[ce.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),u.push(h.extendParams(a,s,t))}else{const h=s.pbrMetallicRoughness||{};if(a.color=new Yt(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const p=h.baseColorFactor;a.color.fromArray(p),a.opacity=p[3]}h.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",h.baseColorTexture,3001)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Hi);const c=s.alphaMode||el.OPAQUE;if(c===el.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,c===el.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==ji&&(u.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new je(1,1),s.normalTexture.scale!==void 0)){const h=s.normalTexture.scale;a.normalScale.set(h,h)}return s.occlusionTexture!==void 0&&o!==ji&&(u.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==ji&&(a.emissive=new Yt().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==ji&&u.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,3001)),Promise.all(u).then(function(){const h=new o(a);return s.name&&(h.name=s.name),Er(h,s),t.associations.set(h,{materials:e}),s.extensions&&Jr(i,h,s),h})}createUniqueName(e){const t=Im.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[ce.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return th(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a],c=$w(u),h=i[c];if(h)o.push(h.promise);else{let p;u.extensions&&u.extensions[ce.KHR_DRACO_MESH_COMPRESSION]?p=s(u):p=th(new Pa,u,t),i[c]={primitive:u,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,u=o.length;l<u;l++){const c=o[l].material===void 0?jw(this.cache):this.getDependency("material",o[l].material);a.push(c)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const u=l.slice(0,l.length-1),c=l[l.length-1],h=[];for(let d=0,g=c.length;d<g;d++){const f=c[d],v=o[d];let C;const y=u[d];if(v.mode===vn.TRIANGLES||v.mode===vn.TRIANGLE_STRIP||v.mode===vn.TRIANGLE_FAN||v.mode===void 0)C=s.isSkinnedMesh===!0?new Um(f,y):new li(f,y),C.isSkinnedMesh===!0&&C.normalizeSkinWeights(),v.mode===vn.TRIANGLE_STRIP?C.geometry=Zc(C.geometry,td):v.mode===vn.TRIANGLE_FAN&&(C.geometry=Zc(C.geometry,Cl));else if(v.mode===vn.LINES)C=new Fm(f,y);else if(v.mode===vn.LINE_STRIP)C=new Nm(f,y);else if(v.mode===vn.LINE_LOOP)C=new Vm(f,y);else if(v.mode===vn.POINTS)C=new zm(f,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(C.geometry.morphAttributes).length>0&&Kw(C,s),C.name=t.createUniqueName(s.name||"mesh_"+e),Er(C,s),v.extensions&&Jr(i,C,v),t.assignFinalMaterial(C),h.push(C)}for(let d=0,g=h.length;d<g;d++)t.associations.set(h[d],{meshes:e,primitives:d});if(h.length===1)return s.extensions&&Jr(i,h[0],s),h[0];const p=new Ga;s.extensions&&Jr(i,p,s),t.associations.set(p,{meshes:e});for(let d=0,g=h.length;d<g;d++)p.add(h[d]);return p})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new ho(cu.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new fu(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),Er(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let i=0,s=t.joints.length;i<s;i++)r.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let u=0,c=o.length;u<c;u++){const h=o[u];if(h){a.push(h);const p=new wi;s!==null&&p.fromArray(s.array,u*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new Hm(a,l)})}loadAnimation(e){const t=this.json.animations[e],r=t.name?t.name:"animation_"+e,i=[],s=[],o=[],a=[],l=[];for(let u=0,c=t.channels.length;u<c;u++){const h=t.channels[u],p=t.samplers[h.sampler],d=h.target,g=d.node,f=t.parameters!==void 0?t.parameters[p.input]:p.input,v=t.parameters!==void 0?t.parameters[p.output]:p.output;d.node!==void 0&&(i.push(this.getDependency("node",g)),s.push(this.getDependency("accessor",f)),o.push(this.getDependency("accessor",v)),a.push(p),l.push(d))}return Promise.all([Promise.all(i),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(u){const c=u[0],h=u[1],p=u[2],d=u[3],g=u[4],f=[];for(let v=0,C=c.length;v<C;v++){const y=c[v],P=h[v],T=p[v],L=d[v],x=g[v];if(y===void 0)continue;y.updateMatrix();let S;switch(xr[x.path]){case xr.weights:S=Jm;break;case xr.rotation:S=yc;break;case xr.position:case xr.scale:default:S=Qm;break}const _=y.name?y.name:y.uuid,b=L.interpolation!==void 0?Hw[L.interpolation]:ed,m=[];xr[x.path]===xr.weights?y.traverse(function(A){A.morphTargetInfluences&&m.push(A.name?A.name:A.uuid)}):m.push(_);let M=T.array;if(T.normalized){const A=Ol(M.constructor),V=new Float32Array(M.length);for(let B=0,z=M.length;B<z;B++)V[B]=M[B]*A;M=V}for(let A=0,V=m.length;A<V;A++){const B=new S(m[A]+"."+xr[x.path],P.array,M,b);L.interpolation==="CUBICSPLINE"&&(B.createInterpolant=function(z){const U=this instanceof yc?zw:wp;return new U(this.times,this.values,this.getValueSize()/3,z)},B.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),f.push(B)}}return new jm(r,void 0,f)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,u=i.weights.length;l<u;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this,i=t.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let u=0,c=a.length;u<c;u++)o.push(r.getDependency("node",a[u]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(u){const c=u[0],h=u[1],p=u[2];p!==null&&c.traverse(function(d){d.isSkinnedMesh&&d.bind(p,Xw)});for(let d=0,g=h.length;d<g;d++)c.add(h[d]);return c})}_loadNodeShallow(e){const t=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(u){return i._getNodeRef(i.cameraCache,s.camera,u)})),i._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let c;if(s.isBone===!0?c=new Gm:u.length>1?c=new Ga:u.length===1?c=u[0]:c=new Zh,c!==u[0])for(let h=0,p=u.length;h<p;h++)c.add(u[h]);if(s.name&&(c.userData.name=s.name,c.name=o),Er(c,s),s.extensions&&Jr(r,c,s),s.matrix!==void 0){const h=new wi;h.fromArray(s.matrix),c.applyMatrix4(h)}else s.translation!==void 0&&c.position.fromArray(s.translation),s.rotation!==void 0&&c.quaternion.fromArray(s.rotation),s.scale!==void 0&&c.scale.fromArray(s.scale);return i.associations.has(c)||i.associations.set(c,{}),i.associations.get(c).nodes=e,c}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],i=this,s=new Ga;r.name&&(s.name=i.createUniqueName(r.name)),Er(s,r),r.extensions&&Jr(t,s,r);const o=r.nodes||[],a=[];for(let l=0,u=o.length;l<u;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let c=0,h=l.length;c<h;c++)s.add(l[c]);const u=c=>{const h=new Map;for(const[p,d]of i.associations)(p instanceof Bs||p instanceof aa)&&h.set(p,d);return c.traverse(p=>{const d=i.associations.get(p);d!=null&&h.set(p,d)}),h};return i.associations=u(s),s})}}function Yw(n,e,t){const r=e.attributes,i=new hu;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(i.set(new Te(l[0],l[1],l[2]),new Te(u[0],u[1],u[2])),a.normalized){const c=Ol(Yi[a.componentType]);i.min.multiplyScalar(c),i.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new Te,l=new Te;for(let u=0,c=s.length;u<c;u++){const h=s[u];if(h.POSITION!==void 0){const p=t.json.accessors[h.POSITION],d=p.min,g=p.max;if(d!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(d[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(d[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(d[2]),Math.abs(g[2]))),p.normalized){const f=Ol(Yi[p.componentType]);l.multiplyScalar(f)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new qh;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function th(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=Ll[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return Er(n,e),Yw(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?Gw(n,e.targets,t):n})}new Kh;new Te;var Zw=Object.defineProperty,Qw=(n,e,t)=>e in n?Zw(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ku=(n,e,t)=>(Qw(n,typeof e!="symbol"?e+"":e,t),t);class bp{constructor(e){Ku(this,"data"),this.data=e}generateShapes(e,t=100,r){const i=[],s={letterSpacing:0,lineHeight:1,...r},o=Jw(e,t,this.data,s);for(let a=0,l=o.length;a<l;a++)Array.prototype.push.apply(i,o[a].toShapes(!1));return i}}Ku(bp,"isFont");Ku(bp,"type");function Jw(n,e,t,r){const i=Array.from(n),s=e/t.resolution,o=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*s,a=[];let l=0,u=0;for(let c=0;c<i.length;c++){const h=i[c];if(h===`
`)l=0,u-=o*r.lineHeight;else{const p=eb(h,s,l,u,t);p&&(l+=p.offsetX+r.letterSpacing,a.push(p.path))}}return a}function eb(n,e,t,r,i){const s=i.glyphs[n]||i.glyphs["?"];if(!s){console.error('THREE.Font: character "'+n+'" does not exists in font family '+i.familyName+".");return}const o=new ev;let a,l,u,c,h,p,d,g;if(s.o){const f=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let v=0,C=f.length;v<C;)switch(f[v++]){case"m":a=parseInt(f[v++])*e+t,l=parseInt(f[v++])*e+r,o.moveTo(a,l);break;case"l":a=parseInt(f[v++])*e+t,l=parseInt(f[v++])*e+r,o.lineTo(a,l);break;case"q":u=parseInt(f[v++])*e+t,c=parseInt(f[v++])*e+r,h=parseInt(f[v++])*e+t,p=parseInt(f[v++])*e+r,o.quadraticCurveTo(h,p,u,c);break;case"b":u=parseInt(f[v++])*e+t,c=parseInt(f[v++])*e+r,h=parseInt(f[v++])*e+t,p=parseInt(f[v++])*e+r,d=parseInt(f[v++])*e+t,g=parseInt(f[v++])*e+r,o.bezierCurveTo(h,p,d,g,u,c);break}}return{offsetX:s.ha*e,path:o}}const nl=new WeakMap;class tb extends Yh{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new oa(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const u=t.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=u.name)}const r=JSON.stringify(t);if(nl.has(e)){const l=nl.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((u,c)=>{i._callbacks[s]={resolve:u,reject:c},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),nl.set(e,{key:r,promise:a}),a}_createGeometry(e){const t=new Pa;e.index&&t.setIndex(new jn(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;t.setAttribute(s,new jn(o,a))}return t}_loadLibrary(e,t){const r=new oa(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=nb.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function nb(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(c){n.onModuleLoaded=function(h){c({draco:h})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,u=a.taskConfig;e.then(c=>{const h=c.draco,p=new h.Decoder,d=new h.DecoderBuffer;d.Init(new Int8Array(l),l.byteLength);try{const g=t(h,p,d,u),f=g.attributes.map(v=>v.array.buffer);g.index&&f.push(g.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:g},f)}catch(g){console.error(g),self.postMessage({type:"error",id:a.id,error:g.message})}finally{h.destroy(d),h.destroy(p)}});break}};function t(o,a,l,u){const c=u.attributeIDs,h=u.attributeTypes;let p,d;const g=a.GetEncodedGeometryType(l);if(g===o.TRIANGULAR_MESH)p=new o.Mesh,d=a.DecodeBufferToMesh(l,p);else if(g===o.POINT_CLOUD)p=new o.PointCloud,d=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!d.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+d.error_msg());const f={index:null,attributes:[]};for(const v in c){const C=self[h[v]];let y,P;if(u.useUniqueIDs)P=c[v],y=a.GetAttributeByUniqueId(p,P);else{if(P=a.GetAttributeId(p,o[c[v]]),P===-1)continue;y=a.GetAttribute(p,P)}f.attributes.push(i(o,a,p,v,C,y))}return g===o.TRIANGULAR_MESH&&(f.index=r(o,a,p)),o.destroy(p),f}function r(o,a,l){const u=l.num_faces()*3,c=u*4,h=o._malloc(c);a.GetTrianglesUInt32Array(l,c,h);const p=new Uint32Array(o.HEAPF32.buffer,h,u).slice();return o._free(h),{array:p,itemSize:1}}function i(o,a,l,u,c,h){const p=h.num_components(),d=l.num_points()*p,g=d*c.BYTES_PER_ELEMENT,f=s(o,c),v=o._malloc(g);a.GetAttributeDataArrayForAllPoints(l,h,f,g,v);const C=new c(o.HEAPF32.buffer,v,d).slice();return o._free(v),{name:u,array:C,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}function rb(n,e){const t=ct(e),r=new vm(t.value),i=gm({});n.forEach(o=>{const a=r.clipAction(o,t.value);i[o.name]=a});const{onLoop:s}=md();return s(({delta:o})=>{r.update(o)}),{actions:i,mixer:r}}class to extends li{constructor(e,t={}){super(e),this.isReflector=!0,this.type="Reflector",this.camera=new ho;const r=this,i=t.color!==void 0?new Yt(t.color):new Yt(8355711),s=t.textureWidth||512,o=t.textureHeight||512,a=t.clipBias||0,l=t.shader||to.ReflectorShader,u=t.multisample!==void 0?t.multisample:4,c=new $h,h=new Te,p=new Te,d=new Te,g=new wi,f=new Te(0,0,-1),v=new hr,C=new Te,y=new Te,P=new hr,T=new wi,L=this.camera,x=new Bn(s,o,{samples:u,type:Tl}),S=new Dn({name:l.name!==void 0?l.name:"unspecified",uniforms:du.clone(l.uniforms),fragmentShader:l.fragmentShader,vertexShader:l.vertexShader});S.uniforms.tDiffuse.value=x.texture,S.uniforms.color.value=i,S.uniforms.textureMatrix.value=T,this.material=S,this.onBeforeRender=function(_,b,m){if(p.setFromMatrixPosition(r.matrixWorld),d.setFromMatrixPosition(m.matrixWorld),g.extractRotation(r.matrixWorld),h.set(0,0,1),h.applyMatrix4(g),C.subVectors(p,d),C.dot(h)>0)return;C.reflect(h).negate(),C.add(p),g.extractRotation(m.matrixWorld),f.set(0,0,-1),f.applyMatrix4(g),f.add(d),y.subVectors(p,f),y.reflect(h).negate(),y.add(p),L.position.copy(C),L.up.set(0,1,0),L.up.applyMatrix4(g),L.up.reflect(h),L.lookAt(y),L.far=m.far,L.updateMatrixWorld(),L.projectionMatrix.copy(m.projectionMatrix),T.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),T.multiply(L.projectionMatrix),T.multiply(L.matrixWorldInverse),T.multiply(r.matrixWorld),c.setFromNormalAndCoplanarPoint(h,p),c.applyMatrix4(L.matrixWorldInverse),v.set(c.normal.x,c.normal.y,c.normal.z,c.constant);const M=L.projectionMatrix;P.x=(Math.sign(v.x)+M.elements[8])/M.elements[0],P.y=(Math.sign(v.y)+M.elements[9])/M.elements[5],P.z=-1,P.w=(1+M.elements[10])/M.elements[14],v.multiplyScalar(2/v.dot(P)),M.elements[2]=v.x,M.elements[6]=v.y,M.elements[10]=v.z+1-a,M.elements[14]=v.w,r.visible=!1;const A=_.getRenderTarget(),V=_.xr.enabled,B=_.shadowMap.autoUpdate;_.xr.enabled=!1,_.shadowMap.autoUpdate=!1,_.setRenderTarget(x),_.state.buffers.depth.setMask(!0),_.autoClear===!1&&_.clear(),_.render(b,L),_.xr.enabled=V,_.shadowMap.autoUpdate=B,_.setRenderTarget(A);const z=m.viewport;z!==void 0&&_.state.viewport(z),r.visible=!0},this.getRenderTarget=function(){return x},this.dispose=function(){x.dispose(),r.material.dispose()}}}to.ReflectorShader={name:"ReflectorShader",uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:`
		uniform mat4 textureMatrix;
		varying vec4 vUv;

		#include <common>
		#include <logdepthbuf_pars_vertex>

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

			#include <logdepthbuf_vertex>

		}`,fragmentShader:`
		uniform vec3 color;
		uniform sampler2D tDiffuse;
		varying vec4 vUv;

		#include <logdepthbuf_pars_fragment>

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			#include <logdepthbuf_fragment>

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>

		}`};const ib=["args","material-uniforms-color-value"],sb=W("TresPlaneGeometry",{args:[5,5]},null,-1);to.ReflectorShader;typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;class da extends li{constructor(){super(da.Geometry,new ji({opacity:0,transparent:!0})),this.isLensflare=!0,this.type="Lensflare",this.frustumCulled=!1,this.renderOrder=1/0;const e=new Te,t=new Te,r=new bc(16,16),i=new bc(16,16);let s=dr;const o=da.Geometry,a=new ja({uniforms:{scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;

				void main() {

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				void main() {

					gl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );

				}`,depthTest:!0,depthWrite:!1,transparent:!1}),l=new ja({uniforms:{map:{value:r},scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;
				attribute vec2 uv;

				varying vec2 vUV;

				void main() {

					vUV = uv;

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				uniform sampler2D map;

				varying vec2 vUV;

				void main() {

					gl_FragColor = texture2D( map, vUV );

				}`,depthTest:!1,depthWrite:!1,transparent:!1}),u=new li(o,a),c=[],h=yp.Shader,p=new ja({name:h.name,uniforms:{map:{value:null},occlusionMap:{value:i},color:{value:new Yt(16777215)},scale:{value:new je},screenPosition:{value:new Te}},vertexShader:h.vertexShader,fragmentShader:h.fragmentShader,blending:Sm,transparent:!0,depthWrite:!1}),d=new li(o,p);this.addElement=function(y){c.push(y)};const g=new je,f=new je,v=new Pm,C=new hr;this.onBeforeRender=function(y,P,T){y.getCurrentViewport(C);const L=y.getRenderTarget(),x=L!==null?L.texture.type:dr;s!==x&&(r.dispose(),i.dispose(),r.type=i.type=x,s=x);const S=C.w/C.z,_=C.z/2,b=C.w/2;let m=16/C.w;if(g.set(m*S,m),v.min.set(C.x,C.y),v.max.set(C.x+(C.z-16),C.y+(C.w-16)),t.setFromMatrixPosition(this.matrixWorld),t.applyMatrix4(T.matrixWorldInverse),!(t.z>0)&&(e.copy(t).applyMatrix4(T.projectionMatrix),f.x=C.x+e.x*_+_-8,f.y=C.y+e.y*b+b-8,v.containsPoint(f))){y.copyFramebufferToTexture(f,r);let M=a.uniforms;M.scale.value=g,M.screenPosition.value=e,y.renderBufferDirect(T,null,o,a,u,null),y.copyFramebufferToTexture(f,i),M=l.uniforms,M.scale.value=g,M.screenPosition.value=e,y.renderBufferDirect(T,null,o,l,u,null);const A=-e.x*2,V=-e.y*2;for(let B=0,z=c.length;B<z;B++){const U=c[B],H=p.uniforms;H.color.value.copy(U.color),H.map.value=U.texture,H.screenPosition.value.x=e.x+A*U.distance,H.screenPosition.value.y=e.y+V*U.distance,m=U.size/C.w;const K=C.w/C.z;H.scale.value.set(m*K,m),p.uniformsNeedUpdate=!0,y.renderBufferDirect(T,null,o,p,d,null)}}},this.dispose=function(){a.dispose(),l.dispose(),p.dispose(),r.dispose(),i.dispose();for(let y=0,P=c.length;y<P;y++)c[y].texture.dispose()}}}class yp{constructor(e,t=1,r=0,i=new Yt(16777215)){this.texture=e,this.size=t,this.distance=r,this.color=i}}yp.Shader={name:"LensflareElementShader",uniforms:{map:{value:null},occlusionMap:{value:null},color:{value:null},scale:{value:null},screenPosition:{value:null}},vertexShader:`

		precision highp float;

		uniform vec3 screenPosition;
		uniform vec2 scale;

		uniform sampler2D occlusionMap;

		attribute vec3 position;
		attribute vec2 uv;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vUV = uv;

			vec2 pos = position.xy;

			vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );

			vVisibility =        visibility.r / 9.0;
			vVisibility *= 1.0 - visibility.g / 9.0;
			vVisibility *=       visibility.b / 9.0;

			gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );

		}`,fragmentShader:`

		precision highp float;

		uniform sampler2D map;
		uniform vec3 color;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vec4 texture = texture2D( map, vUV );
			texture.a *= vVisibility;
			gl_FragColor = texture;
			gl_FragColor.rgb *= color;

		}`};da.Geometry=function(){const n=new Pa,e=new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1]),t=new Xh(e,5);return n.setIndex([0,1,2,0,2,3]),n.setAttribute("position",new yl(t,3,0,!1)),n.setAttribute("uv",new yl(t,2,3,!1)),n}();cu.clamp;cu.lerp;let Eo=null;function ob(n,e){return t=>{n.draco&&(Eo||(Eo=new tb),Eo.setDecoderPath(n.decoderPath||"https://www.gstatic.com/draco/versioned/decoders/1.4.3/"),t.setDRACOLoader(Eo))}}async function ab(n,e={draco:!1},t){return await Av(_w,n,ob(e))}var lb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mo(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ub={exports:{}};(function(n,e){(function(t){n.exports=t()})(function(){return function t(r,i,s){function o(u,c){if(!i[u]){if(!r[u]){var h=typeof Mo=="function"&&Mo;if(!c&&h)return h(u,!0);if(a)return a(u,!0);throw new Error("Cannot find module '"+u+"'")}c=i[u]={exports:{}},r[u][0].call(c.exports,function(p){var d=r[u][1][p];return o(d||p)},c,c.exports,t,r,i,s)}return i[u].exports}for(var a=typeof Mo=="function"&&Mo,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(t,r,i){(function(s,o,a,l,u,c,h,p,d){var g=t("crypto");function f(x,S){S=y(x,S);var _;return(_=S.algorithm!=="passthrough"?g.createHash(S.algorithm):new L).write===void 0&&(_.write=_.update,_.end=_.update),T(S,_).dispatch(x),_.update||_.end(""),_.digest?_.digest(S.encoding==="buffer"?void 0:S.encoding):(x=_.read(),S.encoding!=="buffer"?x.toString(S.encoding):x)}(i=r.exports=f).sha1=function(x){return f(x)},i.keys=function(x){return f(x,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},i.MD5=function(x){return f(x,{algorithm:"md5",encoding:"hex"})},i.keysMD5=function(x){return f(x,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var v=g.getHashes?g.getHashes().slice():["sha1","md5"],C=(v.push("passthrough"),["buffer","hex","binary","base64"]);function y(x,S){var _={};if(_.algorithm=(S=S||{}).algorithm||"sha1",_.encoding=S.encoding||"hex",_.excludeValues=!!S.excludeValues,_.algorithm=_.algorithm.toLowerCase(),_.encoding=_.encoding.toLowerCase(),_.ignoreUnknown=S.ignoreUnknown===!0,_.respectType=S.respectType!==!1,_.respectFunctionNames=S.respectFunctionNames!==!1,_.respectFunctionProperties=S.respectFunctionProperties!==!1,_.unorderedArrays=S.unorderedArrays===!0,_.unorderedSets=S.unorderedSets!==!1,_.unorderedObjects=S.unorderedObjects!==!1,_.replacer=S.replacer||void 0,_.excludeKeys=S.excludeKeys||void 0,x===void 0)throw new Error("Object argument required.");for(var b=0;b<v.length;++b)v[b].toLowerCase()===_.algorithm.toLowerCase()&&(_.algorithm=v[b]);if(v.indexOf(_.algorithm)===-1)throw new Error('Algorithm "'+_.algorithm+'"  not supported. supported values: '+v.join(", "));if(C.indexOf(_.encoding)===-1&&_.algorithm!=="passthrough")throw new Error('Encoding "'+_.encoding+'"  not supported. supported values: '+C.join(", "));return _}function P(x){if(typeof x=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(x))!=null}function T(x,S,_){_=_||[];function b(m){return S.update?S.update(m,"utf8"):S.write(m,"utf8")}return{dispatch:function(m){return this["_"+((m=x.replacer?x.replacer(m):m)===null?"null":typeof m)](m)},_object:function(m){var M,A=Object.prototype.toString.call(m),V=/\[object (.*)\]/i.exec(A);if(V=(V=V?V[1]:"unknown:["+A+"]").toLowerCase(),0<=(A=_.indexOf(m)))return this.dispatch("[CIRCULAR:"+A+"]");if(_.push(m),a!==void 0&&a.isBuffer&&a.isBuffer(m))return b("buffer:"),b(m);if(V==="object"||V==="function"||V==="asyncfunction")return A=Object.keys(m),x.unorderedObjects&&(A=A.sort()),x.respectType===!1||P(m)||A.splice(0,0,"prototype","__proto__","constructor"),x.excludeKeys&&(A=A.filter(function(B){return!x.excludeKeys(B)})),b("object:"+A.length+":"),M=this,A.forEach(function(B){M.dispatch(B),b(":"),x.excludeValues||M.dispatch(m[B]),b(",")});if(!this["_"+V]){if(x.ignoreUnknown)return b("["+V+"]");throw new Error('Unknown object type "'+V+'"')}this["_"+V](m)},_array:function(m,B){B=B!==void 0?B:x.unorderedArrays!==!1;var A=this;if(b("array:"+m.length+":"),!B||m.length<=1)return m.forEach(function(z){return A.dispatch(z)});var V=[],B=m.map(function(z){var U=new L,H=_.slice();return T(x,U,H).dispatch(z),V=V.concat(H.slice(_.length)),U.read().toString()});return _=_.concat(V),B.sort(),this._array(B,!1)},_date:function(m){return b("date:"+m.toJSON())},_symbol:function(m){return b("symbol:"+m.toString())},_error:function(m){return b("error:"+m.toString())},_boolean:function(m){return b("bool:"+m.toString())},_string:function(m){b("string:"+m.length+":"),b(m.toString())},_function:function(m){b("fn:"),P(m)?this.dispatch("[native]"):this.dispatch(m.toString()),x.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(m.name)),x.respectFunctionProperties&&this._object(m)},_number:function(m){return b("number:"+m.toString())},_xml:function(m){return b("xml:"+m.toString())},_null:function(){return b("Null")},_undefined:function(){return b("Undefined")},_regexp:function(m){return b("regex:"+m.toString())},_uint8array:function(m){return b("uint8array:"),this.dispatch(Array.prototype.slice.call(m))},_uint8clampedarray:function(m){return b("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(m))},_int8array:function(m){return b("int8array:"),this.dispatch(Array.prototype.slice.call(m))},_uint16array:function(m){return b("uint16array:"),this.dispatch(Array.prototype.slice.call(m))},_int16array:function(m){return b("int16array:"),this.dispatch(Array.prototype.slice.call(m))},_uint32array:function(m){return b("uint32array:"),this.dispatch(Array.prototype.slice.call(m))},_int32array:function(m){return b("int32array:"),this.dispatch(Array.prototype.slice.call(m))},_float32array:function(m){return b("float32array:"),this.dispatch(Array.prototype.slice.call(m))},_float64array:function(m){return b("float64array:"),this.dispatch(Array.prototype.slice.call(m))},_arraybuffer:function(m){return b("arraybuffer:"),this.dispatch(new Uint8Array(m))},_url:function(m){return b("url:"+m.toString())},_map:function(m){return b("map:"),m=Array.from(m),this._array(m,x.unorderedSets!==!1)},_set:function(m){return b("set:"),m=Array.from(m),this._array(m,x.unorderedSets!==!1)},_file:function(m){return b("file:"),this.dispatch([m.name,m.size,m.type,m.lastModfied])},_blob:function(){if(x.ignoreUnknown)return b("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return b("domwindow")},_bigint:function(m){return b("bigint:"+m.toString())},_process:function(){return b("process")},_timer:function(){return b("timer")},_pipe:function(){return b("pipe")},_tcp:function(){return b("tcp")},_udp:function(){return b("udp")},_tty:function(){return b("tty")},_statwatcher:function(){return b("statwatcher")},_securecontext:function(){return b("securecontext")},_connection:function(){return b("connection")},_zlib:function(){return b("zlib")},_context:function(){return b("context")},_nodescript:function(){return b("nodescript")},_httpparser:function(){return b("httpparser")},_dataview:function(){return b("dataview")},_signal:function(){return b("signal")},_fsevent:function(){return b("fsevent")},_tlswrap:function(){return b("tlswrap")}}}function L(){return{buf:"",write:function(x){this.buf+=x},end:function(x){this.buf+=x},read:function(){return this.buf}}}i.writeToStream=function(x,S,_){return _===void 0&&(_=S,S={}),T(S=y(x,S),_).dispatch(x)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(t,r,i){(function(s,o,a,l,u,c,h,p,d){(function(g){var f=typeof Uint8Array<"u"?Uint8Array:Array,v=43,C=47,y=48,P=97,T=65,L=45,x=95;function S(_){return _=_.charCodeAt(0),_===v||_===L?62:_===C||_===x?63:_<y?-1:_<y+10?_-y+26+26:_<T+26?_-T:_<P+26?_-P+26:void 0}g.toByteArray=function(_){var b,m;if(0<_.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var M=_.length,M=_.charAt(M-2)==="="?2:_.charAt(M-1)==="="?1:0,A=new f(3*_.length/4-M),V=0<M?_.length-4:_.length,B=0;function z(U){A[B++]=U}for(b=0;b<V;b+=4,0)z((16711680&(m=S(_.charAt(b))<<18|S(_.charAt(b+1))<<12|S(_.charAt(b+2))<<6|S(_.charAt(b+3))))>>16),z((65280&m)>>8),z(255&m);return M==2?z(255&(m=S(_.charAt(b))<<2|S(_.charAt(b+1))>>4)):M==1&&(z((m=S(_.charAt(b))<<10|S(_.charAt(b+1))<<4|S(_.charAt(b+2))>>2)>>8&255),z(255&m)),A},g.fromByteArray=function(_){var b,m,M,A,V=_.length%3,B="";function z(U){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(U)}for(b=0,M=_.length-V;b<M;b+=3)m=(_[b]<<16)+(_[b+1]<<8)+_[b+2],B+=z((A=m)>>18&63)+z(A>>12&63)+z(A>>6&63)+z(63&A);switch(V){case 1:B=(B+=z((m=_[_.length-1])>>2))+z(m<<4&63)+"==";break;case 2:B=(B=(B+=z((m=(_[_.length-2]<<8)+_[_.length-1])>>10))+z(m>>4&63))+z(m<<2&63)+"="}return B}})(i===void 0?this.base64js={}:i)}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(t,r,i){(function(s,o,v,l,u,c,h,p,d){var g=t("base64-js"),f=t("ieee754");function v(w,E,k){if(!(this instanceof v))return new v(w,E,k);var I,D,F,$,te=typeof w;if(E==="base64"&&te=="string")for(w=($=w).trim?$.trim():$.replace(/^\s+|\s+$/g,"");w.length%4!=0;)w+="=";if(te=="number")I=K(w);else if(te=="string")I=v.byteLength(w,E);else{if(te!="object")throw new Error("First argument needs to be a number, array or string.");I=K(w.length)}if(v._useTypedArrays?D=v._augment(new Uint8Array(I)):((D=this).length=I,D._isBuffer=!0),v._useTypedArrays&&typeof w.byteLength=="number")D._set(w);else if(X($=w)||v.isBuffer($)||$&&typeof $=="object"&&typeof $.length=="number")for(F=0;F<I;F++)v.isBuffer(w)?D[F]=w.readUInt8(F):D[F]=w[F];else if(te=="string")D.write(w,0,E);else if(te=="number"&&!v._useTypedArrays&&!k)for(F=0;F<I;F++)D[F]=0;return D}function C(w,E,k,I){return v._charsWritten=Ye(function(D){for(var F=[],$=0;$<D.length;$++)F.push(255&D.charCodeAt($));return F}(E),w,k,I)}function y(w,E,k,I){return v._charsWritten=Ye(function(D){for(var F,$,te=[],O=0;O<D.length;O++)$=D.charCodeAt(O),F=$>>8,$=$%256,te.push($),te.push(F);return te}(E),w,k,I)}function P(w,E,k){var I="";k=Math.min(w.length,k);for(var D=E;D<k;D++)I+=String.fromCharCode(w[D]);return I}function T(w,E,k,F){F||(N(typeof k=="boolean","missing or invalid endian"),N(E!=null,"missing offset"),N(E+1<w.length,"Trying to read beyond buffer length"));var D,F=w.length;if(!(F<=E))return k?(D=w[E],E+1<F&&(D|=w[E+1]<<8)):(D=w[E]<<8,E+1<F&&(D|=w[E+1])),D}function L(w,E,k,F){F||(N(typeof k=="boolean","missing or invalid endian"),N(E!=null,"missing offset"),N(E+3<w.length,"Trying to read beyond buffer length"));var D,F=w.length;if(!(F<=E))return k?(E+2<F&&(D=w[E+2]<<16),E+1<F&&(D|=w[E+1]<<8),D|=w[E],E+3<F&&(D+=w[E+3]<<24>>>0)):(E+1<F&&(D=w[E+1]<<16),E+2<F&&(D|=w[E+2]<<8),E+3<F&&(D|=w[E+3]),D+=w[E]<<24>>>0),D}function x(w,E,k,I){if(I||(N(typeof k=="boolean","missing or invalid endian"),N(E!=null,"missing offset"),N(E+1<w.length,"Trying to read beyond buffer length")),!(w.length<=E))return I=T(w,E,k,!0),32768&I?-1*(65535-I+1):I}function S(w,E,k,I){if(I||(N(typeof k=="boolean","missing or invalid endian"),N(E!=null,"missing offset"),N(E+3<w.length,"Trying to read beyond buffer length")),!(w.length<=E))return I=L(w,E,k,!0),2147483648&I?-1*(4294967295-I+1):I}function _(w,E,k,I){return I||(N(typeof k=="boolean","missing or invalid endian"),N(E+3<w.length,"Trying to read beyond buffer length")),f.read(w,E,k,23,4)}function b(w,E,k,I){return I||(N(typeof k=="boolean","missing or invalid endian"),N(E+7<w.length,"Trying to read beyond buffer length")),f.read(w,E,k,52,8)}function m(w,E,k,I,D){if(D||(N(E!=null,"missing value"),N(typeof I=="boolean","missing or invalid endian"),N(k!=null,"missing offset"),N(k+1<w.length,"trying to write beyond buffer length"),Ce(E,65535)),D=w.length,!(D<=k))for(var F=0,$=Math.min(D-k,2);F<$;F++)w[k+F]=(E&255<<8*(I?F:1-F))>>>8*(I?F:1-F)}function M(w,E,k,I,D){if(D||(N(E!=null,"missing value"),N(typeof I=="boolean","missing or invalid endian"),N(k!=null,"missing offset"),N(k+3<w.length,"trying to write beyond buffer length"),Ce(E,4294967295)),D=w.length,!(D<=k))for(var F=0,$=Math.min(D-k,4);F<$;F++)w[k+F]=E>>>8*(I?F:3-F)&255}function A(w,E,k,I,D){D||(N(E!=null,"missing value"),N(typeof I=="boolean","missing or invalid endian"),N(k!=null,"missing offset"),N(k+1<w.length,"Trying to write beyond buffer length"),Re(E,32767,-32768)),w.length<=k||m(w,0<=E?E:65535+E+1,k,I,D)}function V(w,E,k,I,D){D||(N(E!=null,"missing value"),N(typeof I=="boolean","missing or invalid endian"),N(k!=null,"missing offset"),N(k+3<w.length,"Trying to write beyond buffer length"),Re(E,2147483647,-2147483648)),w.length<=k||M(w,0<=E?E:4294967295+E+1,k,I,D)}function B(w,E,k,I,D){D||(N(E!=null,"missing value"),N(typeof I=="boolean","missing or invalid endian"),N(k!=null,"missing offset"),N(k+3<w.length,"Trying to write beyond buffer length"),xe(E,34028234663852886e22,-34028234663852886e22)),w.length<=k||f.write(w,E,k,I,23,4)}function z(w,E,k,I,D){D||(N(E!=null,"missing value"),N(typeof I=="boolean","missing or invalid endian"),N(k!=null,"missing offset"),N(k+7<w.length,"Trying to write beyond buffer length"),xe(E,17976931348623157e292,-17976931348623157e292)),w.length<=k||f.write(w,E,k,I,52,8)}i.Buffer=v,i.SlowBuffer=v,i.INSPECT_MAX_BYTES=50,v.poolSize=8192,v._useTypedArrays=function(){try{var w=new ArrayBuffer(0),E=new Uint8Array(w);return E.foo=function(){return 42},E.foo()===42&&typeof E.subarray=="function"}catch{return!1}}(),v.isEncoding=function(w){switch(String(w).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.isBuffer=function(w){return!(w==null||!w._isBuffer)},v.byteLength=function(w,E){var k;switch(w+="",E||"utf8"){case"hex":k=w.length/2;break;case"utf8":case"utf-8":k=ie(w).length;break;case"ascii":case"binary":case"raw":k=w.length;break;case"base64":k=qe(w).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":k=2*w.length;break;default:throw new Error("Unknown encoding")}return k},v.concat=function(w,E){if(N(X(w),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),w.length===0)return new v(0);if(w.length===1)return w[0];if(typeof E!="number")for(D=E=0;D<w.length;D++)E+=w[D].length;for(var k=new v(E),I=0,D=0;D<w.length;D++){var F=w[D];F.copy(k,I),I+=F.length}return k},v.prototype.write=function(w,E,k,I){isFinite(E)?isFinite(k)||(I=k,k=void 0):(O=I,I=E,E=k,k=O),E=Number(E)||0;var D,F,$,te,O=this.length-E;switch((!k||O<(k=Number(k)))&&(k=O),I=String(I||"utf8").toLowerCase()){case"hex":D=function(Se,Pe,Le,ee){Le=Number(Le)||0;var we=Se.length-Le;(!ee||we<(ee=Number(ee)))&&(ee=we),N((we=Pe.length)%2==0,"Invalid hex string"),we/2<ee&&(ee=we/2);for(var gt=0;gt<ee;gt++){var In=parseInt(Pe.substr(2*gt,2),16);N(!isNaN(In),"Invalid hex string"),Se[Le+gt]=In}return v._charsWritten=2*gt,gt}(this,w,E,k);break;case"utf8":case"utf-8":F=this,$=E,te=k,D=v._charsWritten=Ye(ie(w),F,$,te);break;case"ascii":case"binary":D=C(this,w,E,k);break;case"base64":F=this,$=E,te=k,D=v._charsWritten=Ye(qe(w),F,$,te);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":D=y(this,w,E,k);break;default:throw new Error("Unknown encoding")}return D},v.prototype.toString=function(w,E,k){var I,D,F,$,te=this;if(w=String(w||"utf8").toLowerCase(),E=Number(E)||0,(k=k!==void 0?Number(k):te.length)===E)return"";switch(w){case"hex":I=function(O,Se,Pe){var Le=O.length;(!Se||Se<0)&&(Se=0),(!Pe||Pe<0||Le<Pe)&&(Pe=Le);for(var ee="",we=Se;we<Pe;we++)ee+=R(O[we]);return ee}(te,E,k);break;case"utf8":case"utf-8":I=function(O,Se,Pe){var Le="",ee="";Pe=Math.min(O.length,Pe);for(var we=Se;we<Pe;we++)O[we]<=127?(Le+=J(ee)+String.fromCharCode(O[we]),ee=""):ee+="%"+O[we].toString(16);return Le+J(ee)}(te,E,k);break;case"ascii":case"binary":I=P(te,E,k);break;case"base64":D=te,$=k,I=(F=E)===0&&$===D.length?g.fromByteArray(D):g.fromByteArray(D.slice(F,$));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":I=function(O,Se,Pe){for(var Le=O.slice(Se,Pe),ee="",we=0;we<Le.length;we+=2)ee+=String.fromCharCode(Le[we]+256*Le[we+1]);return ee}(te,E,k);break;default:throw new Error("Unknown encoding")}return I},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},v.prototype.copy=function(w,E,k,I){if(E=E||0,(I=I||I===0?I:this.length)!==(k=k||0)&&w.length!==0&&this.length!==0){N(k<=I,"sourceEnd < sourceStart"),N(0<=E&&E<w.length,"targetStart out of bounds"),N(0<=k&&k<this.length,"sourceStart out of bounds"),N(0<=I&&I<=this.length,"sourceEnd out of bounds"),I>this.length&&(I=this.length);var D=(I=w.length-E<I-k?w.length-E+k:I)-k;if(D<100||!v._useTypedArrays)for(var F=0;F<D;F++)w[F+E]=this[F+k];else w._set(this.subarray(k,k+D),E)}},v.prototype.slice=function(w,E){var k=this.length;if(w=H(w,k,0),E=H(E,k,k),v._useTypedArrays)return v._augment(this.subarray(w,E));for(var I=E-w,D=new v(I,void 0,!0),F=0;F<I;F++)D[F]=this[F+w];return D},v.prototype.get=function(w){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(w)},v.prototype.set=function(w,E){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(w,E)},v.prototype.readUInt8=function(w,E){if(E||(N(w!=null,"missing offset"),N(w<this.length,"Trying to read beyond buffer length")),!(w>=this.length))return this[w]},v.prototype.readUInt16LE=function(w,E){return T(this,w,!0,E)},v.prototype.readUInt16BE=function(w,E){return T(this,w,!1,E)},v.prototype.readUInt32LE=function(w,E){return L(this,w,!0,E)},v.prototype.readUInt32BE=function(w,E){return L(this,w,!1,E)},v.prototype.readInt8=function(w,E){if(E||(N(w!=null,"missing offset"),N(w<this.length,"Trying to read beyond buffer length")),!(w>=this.length))return 128&this[w]?-1*(255-this[w]+1):this[w]},v.prototype.readInt16LE=function(w,E){return x(this,w,!0,E)},v.prototype.readInt16BE=function(w,E){return x(this,w,!1,E)},v.prototype.readInt32LE=function(w,E){return S(this,w,!0,E)},v.prototype.readInt32BE=function(w,E){return S(this,w,!1,E)},v.prototype.readFloatLE=function(w,E){return _(this,w,!0,E)},v.prototype.readFloatBE=function(w,E){return _(this,w,!1,E)},v.prototype.readDoubleLE=function(w,E){return b(this,w,!0,E)},v.prototype.readDoubleBE=function(w,E){return b(this,w,!1,E)},v.prototype.writeUInt8=function(w,E,k){k||(N(w!=null,"missing value"),N(E!=null,"missing offset"),N(E<this.length,"trying to write beyond buffer length"),Ce(w,255)),E>=this.length||(this[E]=w)},v.prototype.writeUInt16LE=function(w,E,k){m(this,w,E,!0,k)},v.prototype.writeUInt16BE=function(w,E,k){m(this,w,E,!1,k)},v.prototype.writeUInt32LE=function(w,E,k){M(this,w,E,!0,k)},v.prototype.writeUInt32BE=function(w,E,k){M(this,w,E,!1,k)},v.prototype.writeInt8=function(w,E,k){k||(N(w!=null,"missing value"),N(E!=null,"missing offset"),N(E<this.length,"Trying to write beyond buffer length"),Re(w,127,-128)),E>=this.length||(0<=w?this.writeUInt8(w,E,k):this.writeUInt8(255+w+1,E,k))},v.prototype.writeInt16LE=function(w,E,k){A(this,w,E,!0,k)},v.prototype.writeInt16BE=function(w,E,k){A(this,w,E,!1,k)},v.prototype.writeInt32LE=function(w,E,k){V(this,w,E,!0,k)},v.prototype.writeInt32BE=function(w,E,k){V(this,w,E,!1,k)},v.prototype.writeFloatLE=function(w,E,k){B(this,w,E,!0,k)},v.prototype.writeFloatBE=function(w,E,k){B(this,w,E,!1,k)},v.prototype.writeDoubleLE=function(w,E,k){z(this,w,E,!0,k)},v.prototype.writeDoubleBE=function(w,E,k){z(this,w,E,!1,k)},v.prototype.fill=function(w,E,k){if(E=E||0,k=k||this.length,N(typeof(w=typeof(w=w||0)=="string"?w.charCodeAt(0):w)=="number"&&!isNaN(w),"value is not a number"),N(E<=k,"end < start"),k!==E&&this.length!==0){N(0<=E&&E<this.length,"start out of bounds"),N(0<=k&&k<=this.length,"end out of bounds");for(var I=E;I<k;I++)this[I]=w}},v.prototype.inspect=function(){for(var w=[],E=this.length,k=0;k<E;k++)if(w[k]=R(this[k]),k===i.INSPECT_MAX_BYTES){w[k+1]="...";break}return"<Buffer "+w.join(" ")+">"},v.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(v._useTypedArrays)return new v(this).buffer;for(var w=new Uint8Array(this.length),E=0,k=w.length;E<k;E+=1)w[E]=this[E];return w.buffer};var U=v.prototype;function H(w,E,k){return typeof w!="number"?k:E<=(w=~~w)?E:0<=w||0<=(w+=E)?w:0}function K(w){return(w=~~Math.ceil(+w))<0?0:w}function X(w){return(Array.isArray||function(E){return Object.prototype.toString.call(E)==="[object Array]"})(w)}function R(w){return w<16?"0"+w.toString(16):w.toString(16)}function ie(w){for(var E=[],k=0;k<w.length;k++){var I=w.charCodeAt(k);if(I<=127)E.push(w.charCodeAt(k));else for(var D=k,F=(55296<=I&&I<=57343&&k++,encodeURIComponent(w.slice(D,k+1)).substr(1).split("%")),$=0;$<F.length;$++)E.push(parseInt(F[$],16))}return E}function qe(w){return g.toByteArray(w)}function Ye(w,E,k,I){for(var D=0;D<I&&!(D+k>=E.length||D>=w.length);D++)E[D+k]=w[D];return D}function J(w){try{return decodeURIComponent(w)}catch{return"�"}}function Ce(w,E){N(typeof w=="number","cannot write a non-number as a number"),N(0<=w,"specified a negative value for writing an unsigned value"),N(w<=E,"value is larger than maximum value for type"),N(Math.floor(w)===w,"value has a fractional component")}function Re(w,E,k){N(typeof w=="number","cannot write a non-number as a number"),N(w<=E,"value larger than maximum allowed value"),N(k<=w,"value smaller than minimum allowed value"),N(Math.floor(w)===w,"value has a fractional component")}function xe(w,E,k){N(typeof w=="number","cannot write a non-number as a number"),N(w<=E,"value larger than maximum allowed value"),N(k<=w,"value smaller than minimum allowed value")}function N(w,E){if(!w)throw new Error(E||"Failed assertion")}v._augment=function(w){return w._isBuffer=!0,w._get=w.get,w._set=w.set,w.get=U.get,w.set=U.set,w.write=U.write,w.toString=U.toString,w.toLocaleString=U.toString,w.toJSON=U.toJSON,w.copy=U.copy,w.slice=U.slice,w.readUInt8=U.readUInt8,w.readUInt16LE=U.readUInt16LE,w.readUInt16BE=U.readUInt16BE,w.readUInt32LE=U.readUInt32LE,w.readUInt32BE=U.readUInt32BE,w.readInt8=U.readInt8,w.readInt16LE=U.readInt16LE,w.readInt16BE=U.readInt16BE,w.readInt32LE=U.readInt32LE,w.readInt32BE=U.readInt32BE,w.readFloatLE=U.readFloatLE,w.readFloatBE=U.readFloatBE,w.readDoubleLE=U.readDoubleLE,w.readDoubleBE=U.readDoubleBE,w.writeUInt8=U.writeUInt8,w.writeUInt16LE=U.writeUInt16LE,w.writeUInt16BE=U.writeUInt16BE,w.writeUInt32LE=U.writeUInt32LE,w.writeUInt32BE=U.writeUInt32BE,w.writeInt8=U.writeInt8,w.writeInt16LE=U.writeInt16LE,w.writeInt16BE=U.writeInt16BE,w.writeInt32LE=U.writeInt32LE,w.writeInt32BE=U.writeInt32BE,w.writeFloatLE=U.writeFloatLE,w.writeFloatBE=U.writeFloatBE,w.writeDoubleLE=U.writeDoubleLE,w.writeDoubleBE=U.writeDoubleBE,w.fill=U.fill,w.inspect=U.inspect,w.toArrayBuffer=U.toArrayBuffer,w}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(t,r,i){(function(s,o,g,l,u,c,h,p,d){var g=t("buffer").Buffer,f=4,v=new g(f);v.fill(0),r.exports={hash:function(C,y,P,T){for(var L=y(function(m,M){m.length%f!=0&&(A=m.length+(f-m.length%f),m=g.concat([m,v],A));for(var A,V=[],B=M?m.readInt32BE:m.readInt32LE,z=0;z<m.length;z+=f)V.push(B.call(m,z));return V}(C=g.isBuffer(C)?C:new g(C),T),8*C.length),y=T,x=new g(P),S=y?x.writeInt32BE:x.writeInt32LE,_=0;_<L.length;_++)S.call(x,L[_],4*_,!0);return x}}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(t,r,i){(function(s,o,g,l,u,c,h,p,d){var g=t("buffer").Buffer,f=t("./sha"),v=t("./sha256"),C=t("./rng"),y={sha1:f,sha256:v,md5:t("./md5")},P=64,T=new g(P);function L(m,M){var A=y[m=m||"sha1"],V=[];return A||x("algorithm:",m,"is not yet supported"),{update:function(B){return g.isBuffer(B)||(B=new g(B)),V.push(B),B.length,this},digest:function(B){var z=g.concat(V),z=M?function(U,H,K){g.isBuffer(H)||(H=new g(H)),g.isBuffer(K)||(K=new g(K)),H.length>P?H=U(H):H.length<P&&(H=g.concat([H,T],P));for(var X=new g(P),R=new g(P),ie=0;ie<P;ie++)X[ie]=54^H[ie],R[ie]=92^H[ie];return K=U(g.concat([X,K])),U(g.concat([R,K]))}(A,M,z):A(z);return V=null,B?z.toString(B):z}}}function x(){var m=[].slice.call(arguments).join(" ");throw new Error([m,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}T.fill(0),i.createHash=function(m){return L(m)},i.createHmac=L,i.randomBytes=function(m,M){if(!M||!M.call)return new g(C(m));try{M.call(this,void 0,new g(C(m)))}catch(A){M(A)}};var S,_=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],b=function(m){i[m]=function(){x("sorry,",m,"is not implemented yet")}};for(S in _)b(_[S])}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(t,r,i){(function(s,o,a,l,u,c,h,p,d){var g=t("./helpers");function f(x,S){x[S>>5]|=128<<S%32,x[14+(S+64>>>9<<4)]=S;for(var _=1732584193,b=-271733879,m=-1732584194,M=271733878,A=0;A<x.length;A+=16){var V=_,B=b,z=m,U=M,_=C(_,b,m,M,x[A+0],7,-680876936),M=C(M,_,b,m,x[A+1],12,-389564586),m=C(m,M,_,b,x[A+2],17,606105819),b=C(b,m,M,_,x[A+3],22,-1044525330);_=C(_,b,m,M,x[A+4],7,-176418897),M=C(M,_,b,m,x[A+5],12,1200080426),m=C(m,M,_,b,x[A+6],17,-1473231341),b=C(b,m,M,_,x[A+7],22,-45705983),_=C(_,b,m,M,x[A+8],7,1770035416),M=C(M,_,b,m,x[A+9],12,-1958414417),m=C(m,M,_,b,x[A+10],17,-42063),b=C(b,m,M,_,x[A+11],22,-1990404162),_=C(_,b,m,M,x[A+12],7,1804603682),M=C(M,_,b,m,x[A+13],12,-40341101),m=C(m,M,_,b,x[A+14],17,-1502002290),_=y(_,b=C(b,m,M,_,x[A+15],22,1236535329),m,M,x[A+1],5,-165796510),M=y(M,_,b,m,x[A+6],9,-1069501632),m=y(m,M,_,b,x[A+11],14,643717713),b=y(b,m,M,_,x[A+0],20,-373897302),_=y(_,b,m,M,x[A+5],5,-701558691),M=y(M,_,b,m,x[A+10],9,38016083),m=y(m,M,_,b,x[A+15],14,-660478335),b=y(b,m,M,_,x[A+4],20,-405537848),_=y(_,b,m,M,x[A+9],5,568446438),M=y(M,_,b,m,x[A+14],9,-1019803690),m=y(m,M,_,b,x[A+3],14,-187363961),b=y(b,m,M,_,x[A+8],20,1163531501),_=y(_,b,m,M,x[A+13],5,-1444681467),M=y(M,_,b,m,x[A+2],9,-51403784),m=y(m,M,_,b,x[A+7],14,1735328473),_=P(_,b=y(b,m,M,_,x[A+12],20,-1926607734),m,M,x[A+5],4,-378558),M=P(M,_,b,m,x[A+8],11,-2022574463),m=P(m,M,_,b,x[A+11],16,1839030562),b=P(b,m,M,_,x[A+14],23,-35309556),_=P(_,b,m,M,x[A+1],4,-1530992060),M=P(M,_,b,m,x[A+4],11,1272893353),m=P(m,M,_,b,x[A+7],16,-155497632),b=P(b,m,M,_,x[A+10],23,-1094730640),_=P(_,b,m,M,x[A+13],4,681279174),M=P(M,_,b,m,x[A+0],11,-358537222),m=P(m,M,_,b,x[A+3],16,-722521979),b=P(b,m,M,_,x[A+6],23,76029189),_=P(_,b,m,M,x[A+9],4,-640364487),M=P(M,_,b,m,x[A+12],11,-421815835),m=P(m,M,_,b,x[A+15],16,530742520),_=T(_,b=P(b,m,M,_,x[A+2],23,-995338651),m,M,x[A+0],6,-198630844),M=T(M,_,b,m,x[A+7],10,1126891415),m=T(m,M,_,b,x[A+14],15,-1416354905),b=T(b,m,M,_,x[A+5],21,-57434055),_=T(_,b,m,M,x[A+12],6,1700485571),M=T(M,_,b,m,x[A+3],10,-1894986606),m=T(m,M,_,b,x[A+10],15,-1051523),b=T(b,m,M,_,x[A+1],21,-2054922799),_=T(_,b,m,M,x[A+8],6,1873313359),M=T(M,_,b,m,x[A+15],10,-30611744),m=T(m,M,_,b,x[A+6],15,-1560198380),b=T(b,m,M,_,x[A+13],21,1309151649),_=T(_,b,m,M,x[A+4],6,-145523070),M=T(M,_,b,m,x[A+11],10,-1120210379),m=T(m,M,_,b,x[A+2],15,718787259),b=T(b,m,M,_,x[A+9],21,-343485551),_=L(_,V),b=L(b,B),m=L(m,z),M=L(M,U)}return Array(_,b,m,M)}function v(x,S,_,b,m,M){return L((S=L(L(S,x),L(b,M)))<<m|S>>>32-m,_)}function C(x,S,_,b,m,M,A){return v(S&_|~S&b,x,S,m,M,A)}function y(x,S,_,b,m,M,A){return v(S&b|_&~b,x,S,m,M,A)}function P(x,S,_,b,m,M,A){return v(S^_^b,x,S,m,M,A)}function T(x,S,_,b,m,M,A){return v(_^(S|~b),x,S,m,M,A)}function L(x,S){var _=(65535&x)+(65535&S);return(x>>16)+(S>>16)+(_>>16)<<16|65535&_}r.exports=function(x){return g.hash(x,f,16)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(t,r,i){(function(s,o,a,l,u,c,h,p,d){r.exports=function(g){for(var f,v=new Array(g),C=0;C<g;C++)!(3&C)&&(f=4294967296*Math.random()),v[C]=f>>>((3&C)<<3)&255;return v}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(t,r,i){(function(s,o,a,l,u,c,h,p,d){var g=t("./helpers");function f(y,P){y[P>>5]|=128<<24-P%32,y[15+(P+64>>9<<4)]=P;for(var T,L,x,S=Array(80),_=1732584193,b=-271733879,m=-1732584194,M=271733878,A=-1009589776,V=0;V<y.length;V+=16){for(var B=_,z=b,U=m,H=M,K=A,X=0;X<80;X++){S[X]=X<16?y[V+X]:C(S[X-3]^S[X-8]^S[X-14]^S[X-16],1);var R=v(v(C(_,5),(R=b,L=m,x=M,(T=X)<20?R&L|~R&x:!(T<40)&&T<60?R&L|R&x|L&x:R^L^x)),v(v(A,S[X]),(T=X)<20?1518500249:T<40?1859775393:T<60?-1894007588:-899497514)),A=M,M=m,m=C(b,30),b=_,_=R}_=v(_,B),b=v(b,z),m=v(m,U),M=v(M,H),A=v(A,K)}return Array(_,b,m,M,A)}function v(y,P){var T=(65535&y)+(65535&P);return(y>>16)+(P>>16)+(T>>16)<<16|65535&T}function C(y,P){return y<<P|y>>>32-P}r.exports=function(y){return g.hash(y,f,20,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(t,r,i){(function(s,o,a,l,u,c,h,p,d){function g(P,T){var L=(65535&P)+(65535&T);return(P>>16)+(T>>16)+(L>>16)<<16|65535&L}function f(P,T){var L,x=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),S=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),_=new Array(64);P[T>>5]|=128<<24-T%32,P[15+(T+64>>9<<4)]=T;for(var b,m,M=0;M<P.length;M+=16){for(var A=S[0],V=S[1],B=S[2],z=S[3],U=S[4],H=S[5],K=S[6],X=S[7],R=0;R<64;R++)_[R]=R<16?P[R+M]:g(g(g((m=_[R-2],C(m,17)^C(m,19)^y(m,10)),_[R-7]),(m=_[R-15],C(m,7)^C(m,18)^y(m,3))),_[R-16]),L=g(g(g(g(X,C(m=U,6)^C(m,11)^C(m,25)),U&H^~U&K),x[R]),_[R]),b=g(C(b=A,2)^C(b,13)^C(b,22),A&V^A&B^V&B),X=K,K=H,H=U,U=g(z,L),z=B,B=V,V=A,A=g(L,b);S[0]=g(A,S[0]),S[1]=g(V,S[1]),S[2]=g(B,S[2]),S[3]=g(z,S[3]),S[4]=g(U,S[4]),S[5]=g(H,S[5]),S[6]=g(K,S[6]),S[7]=g(X,S[7])}return S}var v=t("./helpers"),C=function(P,T){return P>>>T|P<<32-T},y=function(P,T){return P>>>T};r.exports=function(P){return v.hash(P,f,32,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(t,r,i){(function(s,o,a,l,u,c,h,p,d){i.read=function(g,f,v,C,M){var P,T,L=8*M-C-1,x=(1<<L)-1,S=x>>1,_=-7,b=v?M-1:0,m=v?-1:1,M=g[f+b];for(b+=m,P=M&(1<<-_)-1,M>>=-_,_+=L;0<_;P=256*P+g[f+b],b+=m,_-=8);for(T=P&(1<<-_)-1,P>>=-_,_+=C;0<_;T=256*T+g[f+b],b+=m,_-=8);if(P===0)P=1-S;else{if(P===x)return T?NaN:1/0*(M?-1:1);T+=Math.pow(2,C),P-=S}return(M?-1:1)*T*Math.pow(2,P-C)},i.write=function(g,f,v,C,y,A){var T,L,x=8*A-y-1,S=(1<<x)-1,_=S>>1,b=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=C?0:A-1,M=C?1:-1,A=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(L=isNaN(f)?1:0,T=S):(T=Math.floor(Math.log(f)/Math.LN2),f*(C=Math.pow(2,-T))<1&&(T--,C*=2),2<=(f+=1<=T+_?b/C:b*Math.pow(2,1-_))*C&&(T++,C/=2),S<=T+_?(L=0,T=S):1<=T+_?(L=(f*C-1)*Math.pow(2,y),T+=_):(L=f*Math.pow(2,_-1)*Math.pow(2,y),T=0));8<=y;g[v+m]=255&L,m+=M,L/=256,y-=8);for(T=T<<y|L,x+=y;0<x;g[v+m]=255&T,m+=M,T/=256,x-=8);g[v+m-M]|=128*A}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(t,r,i){(function(s,o,a,l,u,c,h,p,d){var g,f,v;function C(){}(s=r.exports={}).nextTick=(f=typeof window<"u"&&window.setImmediate,v=typeof window<"u"&&window.postMessage&&window.addEventListener,f?function(y){return window.setImmediate(y)}:v?(g=[],window.addEventListener("message",function(y){var P=y.source;P!==window&&P!==null||y.data!=="process-tick"||(y.stopPropagation(),0<g.length&&g.shift()())},!0),function(y){g.push(y),window.postMessage("process-tick","*")}):function(y){setTimeout(y,0)}),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.on=C,s.addListener=C,s.once=C,s.off=C,s.removeListener=C,s.removeAllListeners=C,s.emit=C,s.binding=function(y){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(y){throw new Error("process.chdir is not supported")}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(ub);var cb=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"],Dl=cb;Dl=Dl.slice().filter(function(n){return!/^(gl\_|texture)/.test(n)});Dl.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]);function hb(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function db(n){var e=hb(n,"string");return typeof e=="symbol"?e:String(e)}function Ee(n,e,t){return e=db(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Z={position:"csm_Position",positionRaw:"csm_PositionRaw",pointSize:"csm_PointSize",fragColor:"csm_FragColor",diffuseColor:"csm_DiffuseColor",normal:"csm_Normal",roughness:"csm_Roughness",metalness:"csm_Metalness",emissive:"csm_Emissive",ao:"csm_AO",bump:"csm_Bump",depthAlpha:"csm_DepthAlpha"},zt,Ii;zt={},Ee(zt,"".concat(Z.normal),{"#include <beginnormal_vertex>":`
    vec3 objectNormal = `.concat(Z.normal,`;
    #ifdef USE_TANGENT
	    vec3 objectTangent = vec3( tangent.xyz );
    #endif
    `)}),Ee(zt,"".concat(Z.position),{"#include <begin_vertex>":`
    vec3 transformed = `.concat(Z.position,`;
  `)}),Ee(zt,"".concat(Z.positionRaw),{"#include <begin_vertex>":`
    vec4 csm_internal_positionUnprojected = `.concat(Z.positionRaw,`;
    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;
    #ifdef USE_INSTANCING
      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;
    #endif
    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;
    vec3 transformed = csm_internal_positionUnprojected.xyz;
  `)}),Ee(zt,"".concat(Z.pointSize),{"gl_PointSize = size;":`
    gl_PointSize = `.concat(Z.pointSize,`;
    `)}),Ee(zt,"".concat(Z.diffuseColor),{"#include <color_fragment>":`
    #include <color_fragment>
    diffuseColor = `.concat(Z.diffuseColor,`;
  `)}),Ee(zt,"".concat(Z.fragColor),{"#include <dithering_fragment>":`
    #include <dithering_fragment>
    gl_FragColor  = `.concat(Z.fragColor,`;
  `)}),Ee(zt,"".concat(Z.emissive),{"vec3 totalEmissiveRadiance = emissive;":`
    vec3 totalEmissiveRadiance = `.concat(Z.emissive,`;
    `)}),Ee(zt,"".concat(Z.roughness),{"#include <roughnessmap_fragment>":`
    #include <roughnessmap_fragment>
    roughnessFactor = `.concat(Z.roughness,`;
    `)}),Ee(zt,"".concat(Z.metalness),{"#include <metalnessmap_fragment>":`
    #include <metalnessmap_fragment>
    metalnessFactor = `.concat(Z.metalness,`;
    `)}),Ee(zt,"".concat(Z.ao),{"#include <aomap_fragment>":`
    #include <aomap_fragment>
    reflectedLight.indirectDiffuse *= 1. - `.concat(Z.ao,`;
    `)}),Ee(zt,"".concat(Z.bump),{"#include <normal_fragment_maps>":`
    #include <normal_fragment_maps>

    vec3 csm_internal_orthogonal = `.concat(Z.bump," - (dot(").concat(Z.bump,`, normal) * normal);
    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;
    normal = normalize(normal - csm_internal_projectedbump);
    `)}),Ee(zt,"".concat(Z.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":`
      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * `.concat(Z.depthAlpha,` );
    `),"gl_FragColor = packDepthToRGBA( fragCoordZ );":`
      gl_FragColor = packDepthToRGBA( fragCoordZ );
      gl_FragColor.a *= `.concat(Z.depthAlpha,`;
    `)});Ii={},Ee(Ii,"".concat(Z.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = projectionMatrix * modelViewMatrix * vec4( `.concat(Z.position,`, 1.0 );
  `)}),Ee(Ii,"".concat(Z.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = `.concat(Z.position,`;
  `)}),Ee(Ii,"".concat(Z.diffuseColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = `.concat(Z.diffuseColor,`;
  `)}),Ee(Ii,"".concat(Z.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = `.concat(Z.fragColor,`;
  `)});var Ht;Ht={},Ee(Ht,"".concat(Z.position),"*"),Ee(Ht,"".concat(Z.positionRaw),"*"),Ee(Ht,"".concat(Z.normal),"*"),Ee(Ht,"".concat(Z.pointSize),["PointsMaterial"]),Ee(Ht,"".concat(Z.diffuseColor),"*"),Ee(Ht,"".concat(Z.fragColor),"*"),Ee(Ht,"".concat(Z.emissive),["MeshStandardMaterial","MeshPhysicalMaterial"]),Ee(Ht,"".concat(Z.roughness),["MeshStandardMaterial","MeshPhysicalMaterial"]),Ee(Ht,"".concat(Z.metalness),["MeshStandardMaterial","MeshPhysicalMaterial"]),Ee(Ht,"".concat(Z.ao),["MeshStandardMaterial","MeshPhysicalMaterial","MeshBasicMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial"]),Ee(Ht,"".concat(Z.bump),["MeshLambertMaterial","MeshMatcapMaterial","MeshNormalMaterial","MeshPhongMaterial","MeshPhysicalMaterial","MeshStandardMaterial","MeshToonMaterial","ShadowMaterial"]),Ee(Ht,"".concat(Z.depthAlpha),"*");new hu;new Te;Ho.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new je(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};_m.line={uniforms:du.merge([Ho.common,Ho.fog,Ho.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				// get the offset direction as perpendicular to the view vector
				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 offset;
				if ( position.y < 0.5 ) {

					offset = normalize( cross( start.xyz, worldDir ) );

				} else {

					offset = normalize( cross( end.xyz, worldDir ) );

				}

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// extend the line bounds to encompass  endcaps
					start.xyz += - worldDir * linewidth * 0.5;
					end.xyz += worldDir * linewidth * 0.5;

					// shift the position of the quad so it hugs the forward edge of the line
					offset.xy -= dir * forwardOffset;
					offset.z += 0.5;

				#endif

				// endcaps
				if ( position.y > 1.0 || position.y < 0.0 ) {

					offset.xy += dir * 2.0 * forwardOffset;

				}

				// adjust for linewidth
				offset *= linewidth * 0.5;

				// set the world position
				worldPos = ( position.y < 0.5 ) ? start : end;
				worldPos.xyz += offset;

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};new Te;new Te;new hr;new hr;new hr;new Te;new wi;new wm;new Te;new hu;new qh;new hr;class $u extends li{constructor(){const e=$u.SkyShader,t=new Dn({name:e.name,uniforms:du.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,side:Ms,depthWrite:!1});super(new Em(1,1,1),t),this.isSky=!0}}$u.SkyShader={name:"SkyShader",uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new Te},up:{value:new Te(0,1,0)}},vertexShader:`
		uniform vec3 sunPosition;
		uniform float rayleigh;
		uniform float turbidity;
		uniform float mieCoefficient;
		uniform vec3 up;

		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		// constants for atmospheric scattering
		const float e = 2.71828182845904523536028747135266249775724709369995957;
		const float pi = 3.141592653589793238462643383279502884197169;

		// wavelength of used primaries, according to preetham
		const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
		// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
		// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
		const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

		// mie stuff
		// K coefficient for the primaries
		const float v = 4.0;
		const vec3 K = vec3( 0.686, 0.678, 0.666 );
		// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
		const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

		// earth shadow hack
		// cutoffAngle = pi / 1.95;
		const float cutoffAngle = 1.6110731556870734;
		const float steepness = 1.5;
		const float EE = 1000.0;

		float sunIntensity( float zenithAngleCos ) {
			zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
			return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
		}

		vec3 totalMie( float T ) {
			float c = ( 0.2 * T ) * 10E-18;
			return 0.434 * c * MieConst;
		}

		void main() {

			vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
			vWorldPosition = worldPosition.xyz;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			gl_Position.z = gl_Position.w; // set z to camera.far

			vSunDirection = normalize( sunPosition );

			vSunE = sunIntensity( dot( vSunDirection, up ) );

			vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

			float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

			// extinction (absorbtion + out scattering)
			// rayleigh coefficients
			vBetaR = totalRayleigh * rayleighCoefficient;

			// mie coefficients
			vBetaM = totalMie( turbidity ) * mieCoefficient;

		}`,fragmentShader:`
		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		uniform float mieDirectionalG;
		uniform vec3 up;

		// constants for atmospheric scattering
		const float pi = 3.141592653589793238462643383279502884197169;

		const float n = 1.0003; // refractive index of air
		const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

		// optical length at zenith for molecules
		const float rayleighZenithLength = 8.4E3;
		const float mieZenithLength = 1.25E3;
		// 66 arc seconds -> degrees, and the cosine of that
		const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

		// 3.0 / ( 16.0 * pi )
		const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
		// 1.0 / ( 4.0 * pi )
		const float ONE_OVER_FOURPI = 0.07957747154594767;

		float rayleighPhase( float cosTheta ) {
			return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
		}

		float hgPhase( float cosTheta, float g ) {
			float g2 = pow( g, 2.0 );
			float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
			return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
		}

		void main() {

			vec3 direction = normalize( vWorldPosition - cameraPosition );

			// optical length
			// cutoff angle at 90 to avoid singularity in next formula.
			float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
			float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
			float sR = rayleighZenithLength * inverse;
			float sM = mieZenithLength * inverse;

			// combined extinction factor
			vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

			// in scattering
			float cosTheta = dot( direction, vSunDirection );

			float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
			vec3 betaRTheta = vBetaR * rPhase;

			float mPhase = hgPhase( cosTheta, mieDirectionalG );
			vec3 betaMTheta = vBetaM * mPhase;

			vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
			Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

			// nightsky
			float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
			float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
			vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
			vec3 L0 = vec3( 0.1 ) * Fex;

			// composition + solar disc
			float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
			L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

			vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

			vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

			gl_FragColor = vec4( retColor, 1.0 );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>

		}`};var pb={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(lb,function(){var t=function(){function r(d){return o.appendChild(d.dom),d}function i(d){for(var g=0;g<o.children.length;g++)o.children[g].style.display=g===d?"block":"none";s=d}var s=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(d){d.preventDefault(),i(++s%o.children.length)},!1);var a=(performance||Date).now(),l=a,u=0,c=r(new t.Panel("FPS","#0ff","#002")),h=r(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var p=r(new t.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:o,addPanel:r,showPanel:i,begin:function(){a=(performance||Date).now()},end:function(){u++;var d=(performance||Date).now();if(h.update(d-a,200),d>l+1e3&&(c.update(1e3*u/(d-l),100),l=d,u=0,p)){var g=performance.memory;p.update(g.usedJSHeapSize/1048576,g.jsHeapSizeLimit/1048576)}return d},update:function(){a=this.end()},domElement:o,setMode:i}};return t.Panel=function(r,i,s){var o=1/0,a=0,l=Math.round,u=l(window.devicePixelRatio||1),c=80*u,h=48*u,p=3*u,d=2*u,g=3*u,f=15*u,v=74*u,C=30*u,y=document.createElement("canvas");y.width=c,y.height=h,y.style.cssText="width:80px;height:48px";var P=y.getContext("2d");return P.font="bold "+9*u+"px Helvetica,Arial,sans-serif",P.textBaseline="top",P.fillStyle=s,P.fillRect(0,0,c,h),P.fillStyle=i,P.fillText(r,p,d),P.fillRect(g,f,v,C),P.fillStyle=s,P.globalAlpha=.9,P.fillRect(g,f,v,C),{dom:y,update:function(T,L){o=Math.min(o,T),a=Math.max(a,T),P.fillStyle=s,P.globalAlpha=1,P.fillRect(0,0,c,f),P.fillStyle=i,P.fillText(l(T)+" "+r+" ("+l(o)+"-"+l(a)+")",p,d),P.drawImage(y,g+u,f,v-u,C,g,f,v-u,C),P.fillRect(g+v-u,f,u,C),P.fillStyle=s,P.globalAlpha=.9,P.fillRect(g+v-u,f,u,l((1-T/L)*C))}}},t})})(pb);var fb=`#include <common>

void main() {
  vec2 center = vec2(0., 1.);
  float rotation = 0.0;

  
  
  float size = 0.03;

  vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
  vec2 scale;
  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

  bool isPerspective = isPerspectiveMatrix( projectionMatrix );
  if ( isPerspective ) scale *= - mvPosition.z;

  vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
  vec2 rotatedPosition;
  rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
  rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
  mvPosition.xy += rotatedPosition;

  gl_Position = projectionMatrix * mvPosition;
}`,mb=`void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
}`;const bo=new Te(0,0,0),Wu=new Te(0,0,0),vb=new Te(0,0,0);function nh(n,e,t){const r=bo.setFromMatrixPosition(n.matrixWorld);r.project(e);const i=t.width/2,s=t.height/2;return[(Number.isNaN(r.x)?0:r.x)*i+i,-(r.y*s)+s]}function gb(n,e){const t=bo.setFromMatrixPosition(n.matrixWorld),r=Wu.setFromMatrixPosition(e.matrixWorld),i=t.sub(r),s=e.getWorldDirection(vb);return i.angleTo(s)>Math.PI/2}function _b(n,e,t,r){const i=bo.setFromMatrixPosition(n.matrixWorld),s=i.clone();s.project(e),t.setFromCamera(new je(s.x,s.y),e);const o=t.intersectObjects(r,!0);if(o.length>0){const a=o[0].distance;return i.distanceTo(t.ray.origin)<a}return!0}function wb(n,e){if(e instanceof fu)return e.zoom;if(e instanceof ho){const t=bo.setFromMatrixPosition(n.matrixWorld),r=Wu.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=t.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function bb(n,e,t){if(e instanceof ho||e instanceof fu){const r=bo.setFromMatrixPosition(n.matrixWorld),i=Wu.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const Bl=n=>Math.abs(n)<1e-10?0:n;function xp(n,e,t=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=Bl(e[i]*n.elements[i])+(i!==15?",":")");return t+r}const yb=(n=>e=>xp(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),xb=(n=>(e,t)=>xp(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]),Tb=["geometry","material"];new bm;const Cb="/autoking/assets/vehicle-C7rzoEDw.glb",Sb=["object"],Pb={__name:"Vehicle",async setup(n){let e,t;const{scene:r,animations:i}=([e,t]=mu(()=>ab(Cb,{draco:!0})),e=await e,t(),e);r.traverse(l=>{l.isMesh&&(l.castShadow=!0,l.receiveShadow=!0)});let{actions:s,mixer:o}=rb(i,r);const{onLoop:a}=Ca();a(l=>{o.update(l.delta)});for(const l of Object.values(s))l.timeScale=.5,l.play();return(l,u)=>(un(),Nr("primitive",{ref:"vehicle",object:Gt(r)},null,8,Sb))}},Eb="/autoking/assets/grid-texture-B4OpFzI7.png",Mb=["rotation"],Ab=W("TresPlaneGeometry",{args:[35,35]},null,-1),kb={__name:"Ground",async setup(n){let e,t;const r=Xs(),i=([e,t]=mu(()=>nv({map:Eb})),e=await e,t(),e);for(const a in i)i[a]&&(i[a].repeat.set(30,30),i[a].offset.set(0,0),i[a].wrapS=qs,i[a].wrapT=qs);const s={color:"#04C9FC",roughness:.5,metalness:.5,alphaMap:i.map,transparent:!0,emissive:"#04c9fc",emissiveIntensity:5,opacity:1,map:i.map},{onLoop:o}=Ca();return o(a=>{for(const l in i)i[l]&&(i[l].offset.y=-a.elapsed%400)}),(a,l)=>(un(),Nr("TresMesh",{ref_key:"ground",ref:r,"receive-shadow":"",rotation:[-Math.PI*.5,0,0],position:[0,0,0]},[Ab,W("TresMeshStandardMaterial",id(sd(s)),null,16)],8,Mb))}};/**
 * postprocessing v6.34.1 build Wed Dec 27 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rüschen
 * @license Zlib
 */var Tp="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",le={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},Cp="",dt="srgb",Ua="srgb-linear",ci={NONE:0,DEPTH:1,CONVOLUTION:2},fe={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Xu={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},Sp=Number(Ma.replace(/\D+/g,"")),Pp=Sp>=152,Rb=new Map([[od,Ua],[ad,dt]]),Lb=new Map([[Ua,od],[dt,ad]]);function os(n){return n===null?null:Pp?n.outputColorSpace:Rb.get(n.outputEncoding)}function Br(n,e){n!==null&&(Pp?n.colorSpace=e:n.encoding=Lb.get(e))}function yo(n){return Sp<154?n.replace("colorspace_fragment","encodings_fragment"):n}var Ob=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,Db="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",Bb=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Ib=class extends Dn{constructor(n=new hr){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new be(null),texelSize:new be(new hr),scale:new be(1),kernel:new be(0)},blending:Ei,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Ob,vertexShader:Db}),this.fragmentShader=yo(this.fragmentShader),this.setTexelSize(n.x,n.y),this.kernelSize=Xu.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return Bb[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e,n*.5,e*.5)}setSize(n,e){const t=1/n,r=1/e;this.uniforms.texelSize.value.set(t,r,t*.5,r*.5)}},Ub=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,Ep=class extends Dn{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new be(null),opacity:new be(1)},blending:Ei,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Ub,vertexShader:Tp}),this.fragmentShader=yo(this.fragmentShader)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},Fb=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,Nb="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",Vb=class extends Dn{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new be(null),normalBuffer:new be(null),texelSize:new be(new je)},blending:Ei,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Fb,vertexShader:Nb})}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=ps){this.depthBuffer=n,this.depthPacking=e}set normalBuffer(n){this.uniforms.normalBuffer.value=n,n!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(n){this.normalBuffer=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},zb=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,Hb="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",jb=class extends Dn{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new be(null),texelSize:new be(new je)},blending:Ei,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:zb,vertexShader:Hb}),this.fragmentShader=yo(this.fragmentShader)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},Gb=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,Kb="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",$b=class extends Dn{constructor(n,e,t,r,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Ma.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new be(null),depthBuffer:new be(null),resolution:new be(new je),texelSize:new be(new je),cameraNear:new be(.3),cameraFar:new be(1e3),aspect:new be(1),time:new be(0)},blending:Ei,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:i}),n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(r)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=ps){this.depthBuffer=n,this.depthPacking=e}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){return this.fragmentShader=Gb.replace(fe.FRAGMENT_HEAD,n.get(fe.FRAGMENT_HEAD)||"").replace(fe.FRAGMENT_MAIN_UV,n.get(fe.FRAGMENT_MAIN_UV)||"").replace(fe.FRAGMENT_MAIN_IMAGE,n.get(fe.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=Kb.replace(fe.VERTEX_HEAD,n.get(fe.VERTEX_HEAD)||"").replace(fe.VERTEX_MAIN_SUPPORT,n.get(fe.VERTEX_MAIN_SUPPORT)||""),this.fragmentShader=yo(this.fragmentShader),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof ho?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return fe}},Wb=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,Xb=class extends Dn{constructor(n=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:Ma.replace(/\D+/g,"")},uniforms:{inputBuffer:new be(null),threshold:new be(0),smoothing:new be(1),range:new be(null)},blending:Ei,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Wb,vertexShader:Tp}),this.colorOutput=n,this.luminanceRange=e}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get threshold(){return this.uniforms.threshold.value}set threshold(n){this.smoothing>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=n}getThreshold(){return this.threshold}setThreshold(n){this.threshold=n}get smoothing(){return this.uniforms.smoothing.value}set smoothing(n){this.threshold>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=n}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(n){this.smoothing=n}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(n){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(n){n?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(n){return this.colorOutput}setColorOutputEnabled(n){this.colorOutput=n}get useRange(){return this.luminanceRange!==null}set useRange(n){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(n){n!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=n,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(n){this.luminanceRange=n}},qb=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,Yb="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",Zb=class extends Dn{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new be(null),supportBuffer:new be(null),texelSize:new be(new je),radius:new be(.85)},blending:Ei,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:qb,vertexShader:Yb}),this.fragmentShader=yo(this.fragmentShader)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}set supportBuffer(n){this.uniforms.supportBuffer.value=n}get radius(){return this.uniforms.radius.value}set radius(n){this.uniforms.radius.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},Qb=new uv,Tr=null;function Jb(){if(Tr===null){const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);Tr=new Pa,Tr.setAttribute!==void 0?(Tr.setAttribute("position",new jn(n,3)),Tr.setAttribute("uv",new jn(e,2))):(Tr.addAttribute("position",new jn(n,3)),Tr.addAttribute("uv",new jn(e,2)))}return Tr}var Pn=class Mp{constructor(e="Pass",t=new xc,r=Qb){this.name=e,this.renderer=null,this.scene=t,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;t!==null&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new li(Jb(),e),t.frustumCulled=!1,this.scene===null&&(this.scene=new xc),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=ps){}render(e,t,r,i,s){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,r){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof Bn||t instanceof Bs||t instanceof aa||t instanceof Mp)&&this[e].dispose()}}},ey=class extends Pn{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new Ep,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new Bn(1,1,{minFilter:rs,magFilter:rs,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,r,i){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==dr?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":os(n)===dt&&Br(this.renderTarget.texture,dt))}},ty=class extends Pn{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,r,i){const s=n.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},rh=new Yt,Ap=class extends Pn{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,r,i){const s=this.overrideClearColor,o=this.overrideClearAlpha,a=n.getClearAlpha(),l=s!==null,u=o>=0;l?(n.getClearColor(rh),n.setClearColor(s,u?o:a)):u&&n.setClearAlpha(o),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),l?n.setClearColor(rh,a):u&&n.setClearAlpha(a)}},kp=class extends Pn{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new Ap,this.overrideMaterialManager=t===null?null:new oh(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new oh(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,r,i){const s=this.scene,o=this.camera,a=this.selection,l=o.layers.mask,u=s.background,c=n.shadowMap.autoUpdate,h=this.renderToScreen?null:e;a!==null&&o.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(h),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,s,o):n.render(s,o),o.layers.mask=l,s.background=u,n.shadowMap.autoUpdate=c}},ny=class extends Pn{constructor({normalBuffer:n=null,resolutionScale:e=.5,width:t=Tt.AUTO_SIZE,height:r=Tt.AUTO_SIZE,resolutionX:i=t,resolutionY:s=r}={}){super("DepthDownsamplingPass");const o=new Vb;o.normalBuffer=n,this.fullscreenMaterial=o,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Bn(1,1,{minFilter:Ys,magFilter:Ys,depthBuffer:!1,type:av}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const a=this.resolution=new Tt(this,i,s,e);a.addEventListener("change",l=>this.setSize(a.baseWidth,a.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(n,e=ps){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e}render(n,e,t,r,i){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){const r=n.getContext();if(!(r.getExtension("EXT_color_buffer_float")||r.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}};function ih(n,e,t){for(const r of e){const i="$1"+n+r.charAt(0).toUpperCase()+r.slice(1),s=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const o of t.entries())o[1]!==null&&t.set(o[0],o[1].replace(s,i))}}function ry(n,e,t){let r=e.getFragmentShader(),i=e.getVertexShader();const s=r!==void 0&&/mainImage/.test(r),o=r!==void 0&&/mainUv/.test(r);if(t.attributes|=e.getAttributes(),r===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(o&&t.attributes&ci.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!s&&!o)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const a=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=t.shaderParts;let u=l.get(fe.FRAGMENT_HEAD)||"",c=l.get(fe.FRAGMENT_MAIN_UV)||"",h=l.get(fe.FRAGMENT_MAIN_IMAGE)||"",p=l.get(fe.VERTEX_HEAD)||"",d=l.get(fe.VERTEX_MAIN_SUPPORT)||"";const g=new Set,f=new Set;if(o&&(c+=`	${n}MainUv(UV);
`,t.uvTransformation=!0),i!==null&&/mainSupport/.test(i)){const y=/mainSupport *\([\w\s]*?uv\s*?\)/.test(i);d+=`	${n}MainSupport(`,d+=y?`vUv);
`:`);
`;for(const P of i.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const T of P[1].split(/\s*,\s*/))t.varyings.add(T),g.add(T),f.add(T);for(const P of i.matchAll(a))f.add(P[1])}for(const y of r.matchAll(a))f.add(y[1]);for(const y of e.defines.keys())f.add(y.replace(/\([\w\s,]*\)/g,""));for(const y of e.uniforms.keys())f.add(y);f.delete("while"),f.delete("for"),f.delete("if"),e.uniforms.forEach((y,P)=>t.uniforms.set(n+P.charAt(0).toUpperCase()+P.slice(1),y)),e.defines.forEach((y,P)=>t.defines.set(n+P.charAt(0).toUpperCase()+P.slice(1),y));const v=new Map([["fragment",r],["vertex",i]]);ih(n,f,t.defines),ih(n,f,v),r=v.get("fragment"),i=v.get("vertex");const C=e.blendMode;if(t.blendModes.set(C.blendFunction,C),s){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(h+=e.inputColorSpace===dt?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==Cp?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const y=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;h+=`${n}MainImage(color0, UV, `,t.attributes&ci.DEPTH&&y.test(r)&&(h+="depth, ",t.readDepth=!0),h+=`color1);
	`;const P=n+"BlendOpacity";t.uniforms.set(P,C.opacity),h+=`color0 = blend${C.blendFunction}(color0, color1, ${P});

	`,u+=`uniform float ${P};

`}if(u+=r+`
`,i!==null&&(p+=i+`
`),l.set(fe.FRAGMENT_HEAD,u),l.set(fe.FRAGMENT_MAIN_UV,c),l.set(fe.FRAGMENT_MAIN_IMAGE,h),l.set(fe.VERTEX_HEAD,p),l.set(fe.VERTEX_MAIN_SUPPORT,d),e.extensions!==null)for(const y of e.extensions)t.extensions.add(y)}}var iy=class extends Pn{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new $b(null,null,null,n),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(n){for(const e of this.effects)e.mainScene=n}set mainCamera(n){this.fullscreenMaterial.copyCameraSettings(n);for(const e of this.effects)e.mainCamera=n}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}setEffects(n){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=n.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const n=new dy;let e=0;for(const o of this.effects)if(o.blendMode.blendFunction===le.DST)n.attributes|=o.getAttributes()&ci.DEPTH;else{if(n.attributes&o.getAttributes()&ci.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${o.name})`);ry("e"+e++,o,n)}let t=n.shaderParts.get(fe.FRAGMENT_HEAD),r=n.shaderParts.get(fe.FRAGMENT_MAIN_IMAGE),i=n.shaderParts.get(fe.FRAGMENT_MAIN_UV);const s=/\bblend\b/g;for(const o of n.blendModes.values())t+=o.getShaderCode().replace(s,`blend${o.blendFunction}`)+`
`;n.attributes&ci.DEPTH?(n.readDepth&&(r=`float depth = readDepth(UV);

	`+r),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===dt&&(r+=`color0 = sRGBToLinear(color0);
	`),n.uvTransformation?(i=`vec2 transformedUv = vUv;
`+i,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set(fe.FRAGMENT_HEAD,t),n.shaderParts.set(fe.FRAGMENT_MAIN_IMAGE,r),n.shaderParts.set(fe.FRAGMENT_MAIN_UV,i);for(const[o,a]of n.shaderParts)a!==null&&n.shaderParts.set(o,a.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=ps){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,r,i){for(const s of this.effects)s.update(n,e,r);if(!this.skipRendering||this.renderToScreen){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,s.time+=r*this.timeScale,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const r of this.effects)r.initialize(n,e,t);this.updateMaterial(),t!==void 0&&t!==dr&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}},sy=class extends Pn{constructor({kernelSize:n=Xu.MEDIUM,resolutionScale:e=.5,width:t=Tt.AUTO_SIZE,height:r=Tt.AUTO_SIZE,resolutionX:i=t,resolutionY:s=r}={}){super("KawaseBlurPass"),this.renderTargetA=new Bn(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const o=this.resolution=new Tt(this,i,s,e);o.addEventListener("change",a=>this.setSize(o.baseWidth,o.baseHeight)),this._blurMaterial=new Ib,this._blurMaterial.kernelSize=n,this.copyMaterial=new Ep}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(n){this._blurMaterial=n}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,r,i){const s=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB,u=this.blurMaterial,c=u.kernelSequence;let h=e;this.fullscreenMaterial=u;for(let p=0,d=c.length;p<d;++p){const g=p&1?l:a;u.kernel=c[p],u.inputBuffer=h.texture,n.setRenderTarget(g),n.render(s,o),h=g}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=h.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(s,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const r=t.width,i=t.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.blurMaterial.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==dr?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):os(n)===dt&&(Br(this.renderTargetA.texture,dt),Br(this.renderTargetB.texture,dt)))}static get AUTO_SIZE(){return Tt.AUTO_SIZE}},oy=class extends Pn{constructor({renderTarget:n,luminanceRange:e,colorOutput:t,resolutionScale:r=1,width:i=Tt.AUTO_SIZE,height:s=Tt.AUTO_SIZE,resolutionX:o=i,resolutionY:a=s}={}){super("LuminancePass"),this.fullscreenMaterial=new Xb(t,e),this.needsSwap=!1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new Bn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new Tt(this,o,a,r);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(n,e,t,r,i){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}initialize(n,e,t){t!==void 0&&t!==dr&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},ay=class extends Pn{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new Ap(!1,!1,!0),this.inverse=!1}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,r,i){const s=n.getContext(),o=n.state.buffers,a=this.scene,l=this.camera,u=this.clearPass,c=this.inverted?0:1,h=1-c;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),o.stencil.setFunc(s.ALWAYS,c,4294967295),o.stencil.setClear(h),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(n,null):(u.render(n,e),u.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(a,l)):(n.setRenderTarget(e),n.render(a,l),n.setRenderTarget(t),n.render(a,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(s.EQUAL,1,4294967295),o.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),o.stencil.setLocked(!0)}},ly=class extends Pn{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Bn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new jb,this.upsamplingMaterial=new Zb,this.resolution=new je}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(n){if(this.levels!==n){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<n;++t){const r=e.clone();r.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(r)}this.upsamplingMipmaps.push(e);for(let t=1,r=n-1;t<r;++t){const i=e.clone();i.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(i)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(n){this.upsamplingMaterial.radius=n}render(n,e,t,r,i){const{scene:s,camera:o}=this,{downsamplingMaterial:a,upsamplingMaterial:l}=this,{downsamplingMipmaps:u,upsamplingMipmaps:c}=this;let h=e;this.fullscreenMaterial=a;for(let p=0,d=u.length;p<d;++p){const g=u[p];a.setSize(h.width,h.height),a.inputBuffer=h.texture,n.setRenderTarget(g),n.render(s,o),h=g}this.fullscreenMaterial=l;for(let p=c.length-1;p>=0;--p){const d=c[p];l.setSize(h.width,h.height),l.inputBuffer=h.texture,l.supportBuffer=u[p].texture,n.setRenderTarget(d),n.render(s,o),h=d}}setSize(n,e){const t=this.resolution;t.set(n,e);let r=t.width,i=t.height;for(let s=0,o=this.downsamplingMipmaps.length;s<o;++s)r=Math.round(r*.5),i=Math.round(i*.5),this.downsamplingMipmaps[s].setSize(r,i),s<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[s].setSize(r,i)}initialize(n,e,t){if(t!==void 0){const r=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const i of r)i.texture.type=t;if(t!==dr)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(os(n)===dt)for(const i of r)Br(i.texture,dt)}}dispose(){super.dispose();for(const n of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))n.dispose()}},uy=class extends Pn{constructor(n,e,{renderTarget:t,resolutionScale:r=1,width:i=Tt.AUTO_SIZE,height:s=Tt.AUTO_SIZE,resolutionX:o=i,resolutionY:a=s}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new kp(n,e,new lv);const l=this.renderPass;l.ignoreBackground=!0,l.skipShadowMapUpdate=!0;const u=l.getClearPass();u.overrideClearColor=new Yt(7829503),u.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Bn(1,1,{minFilter:Ys,magFilter:Ys}),this.renderTarget.texture.name="NormalPass.Target");const c=this.resolution=new Tt(this,o,a,r);c.addEventListener("change",h=>this.setSize(c.baseWidth,c.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,r,i){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,s,s)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},rl=1/1e3,cy=1e3,hy=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(n){typeof document<"u"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=n)}get delta(){return this._delta*rl}get fixedDelta(){return this._fixedDelta*rl}set fixedDelta(n){this._fixedDelta=n*cy}get elapsed(){return this._elapsed*rl}update(n){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(n!==void 0?n:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}handleEvent(n){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},sh=class{constructor(n=null,{depthBuffer:e=!0,stencilBuffer:t=!1,multisampling:r=0,frameBufferType:i}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,t,i,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new ey,this.depthTexture=null,this.passes=[],this.timer=new hy,this.autoRenderToScreen=!0,this.setRenderer(n)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(n){const e=this.inputBuffer,t=this.multisampling;t>0&&n>0?(this.inputBuffer.samples=n,this.outputBuffer.samples=n,this.inputBuffer.dispose(),this.outputBuffer.dispose()):t!==n&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,n),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(n){if(this.renderer=n,n!==null){const e=n.getSize(new je),t=n.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===dr&&os(n)===dt&&(Br(this.inputBuffer.texture,dt),Br(this.outputBuffer.texture,dt),this.inputBuffer.dispose(),this.outputBuffer.dispose()),n.autoClear=!1,this.setSize(e.width,e.height);for(const i of this.passes)i.initialize(n,t,r)}}replaceRenderer(n,e=!0){const t=this.renderer,r=t.domElement.parentNode;return this.setRenderer(n),e&&r!==null&&(r.removeChild(t.domElement),r.appendChild(n.domElement)),t}createDepthTexture(){const n=this.depthTexture=new rv;return this.inputBuffer.depthTexture=n,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(n.format=iv,n.type=sv):n.type=ov,n}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const n of this.passes)n.setDepthTexture(null)}}createBuffer(n,e,t,r){const i=this.renderer,s=i===null?new je:i.getDrawingBufferSize(new je),o={minFilter:rs,magFilter:rs,stencilBuffer:e,depthBuffer:n,type:t},a=new Bn(s.width,s.height,o);return r>0&&(a.ignoreDepthForMultisampleCopy=!1,a.samples=r),t===dr&&os(i)===dt&&Br(a.texture,dt),a.texture.name="EffectComposer.Buffer",a.texture.generateMipmaps=!1,a}setMainScene(n){for(const e of this.passes)e.mainScene=n}setMainCamera(n){for(const e of this.passes)e.mainCamera=n}addPass(n,e){const t=this.passes,r=this.renderer,i=r.getDrawingBufferSize(new je),s=r.getContext().getContextAttributes().alpha,o=this.inputBuffer.texture.type;if(n.setRenderer(r),n.setSize(i.width,i.height),n.initialize(r,s,o),this.autoRenderToScreen&&(t.length>0&&(t[t.length-1].renderToScreen=!1),n.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?t.splice(e,0,n):t.push(n),this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!0),n.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const a=this.createDepthTexture();for(n of t)n.setDepthTexture(a)}else n.setDepthTexture(this.depthTexture)}removePass(n){const e=this.passes,t=e.indexOf(n);if(t!==-1&&e.splice(t,1).length>0){if(this.depthTexture!==null){const s=(a,l)=>a||l.needsDepthTexture;e.reduce(s,!1)||(n.getDepthTexture()===this.depthTexture&&n.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&t===e.length&&(n.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const n=this.passes;this.deleteDepthTexture(),n.length>0&&(this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!1),this.passes=[])}render(n){const e=this.renderer,t=this.copyPass;let r=this.inputBuffer,i=this.outputBuffer,s=!1,o,a,l;n===void 0&&(this.timer.update(),n=this.timer.delta);for(const u of this.passes)u.enabled&&(u.render(e,r,i,n,s),u.needsSwap&&(s&&(t.renderToScreen=u.renderToScreen,o=e.getContext(),a=e.state.buffers.stencil,a.setFunc(o.NOTEQUAL,1,4294967295),t.render(e,r,i,n,s),a.setFunc(o.EQUAL,1,4294967295)),l=r,r=i,i=l),u instanceof ay?s=!0:u instanceof ty&&(s=!1))}setSize(n,e,t){const r=this.renderer,i=r.getSize(new je);(n===void 0||e===void 0)&&(n=i.width,e=i.height),(i.width!==n||i.height!==e)&&r.setSize(n,e,t);const s=r.getDrawingBufferSize(new je);this.inputBuffer.setSize(s.width,s.height),this.outputBuffer.setSize(s.width,s.height);for(const o of this.passes)o.setSize(s.width,s.height)}reset(){const n=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=n}dispose(){for(const n of this.passes)n.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},dy=class{constructor(){this.shaderParts=new Map([[fe.FRAGMENT_HEAD,null],[fe.FRAGMENT_MAIN_UV,null],[fe.FRAGMENT_MAIN_IMAGE,null],[fe.VERTEX_HEAD,null],[fe.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=ci.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Ua}},il=!1,oh=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case Hi:t=this.materialsFlatShadedDoubleSide;break;case Ms:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case Hi:t=this.materialsDoubleSide;break;case Ms:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(n){if(!(n instanceof Dn))return n.clone();const e=n.uniforms,t=new Map;for(const i in e){const s=e[i].value;s.isRenderTargetTexture&&(e[i].value=null,t.set(i,s))}const r=n.clone();for(const i of t)e[i[0]].value=i[1],r.uniforms[i[0]].value=i[1];return r}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[this.cloneMaterial(n),this.cloneMaterial(n),this.cloneMaterial(n)];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=rd;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.side=Ms,r}),this.materialsDoubleSide=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.side=Hi,r}),this.materialsFlatShaded=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.flatShading=!0,r.side=Ms,r}),this.materialsFlatShadedDoubleSide=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.flatShading=!0,r.side=Hi,r})}}render(n,e,t){const r=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,il){const i=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const s of i)s[0].material=s[1];this.meshCount!==i.size&&i.clear()}else{const i=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=i}n.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return il}static set workaroundEnabled(n){il=n}},Cr=-1,Tt=class extends vu{constructor(n,e=Cr,t=Cr,r=1){super(),this.resizable=n,this.baseSize=new je(1,1),this.preferredSize=new je(e,t),this.target=this.preferredSize,this.s=r,this.effectiveSize=new je,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,e=this.preferredSize,t=this.effectiveSize,r=this.scale;e.width!==Cr?t.width=e.width:e.height!==Cr?t.width=Math.round(e.height*(n.width/Math.max(n.height,1))):t.width=Math.round(n.width*r),e.height!==Cr?t.height=e.height:e.width!==Cr?t.height=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):t.height=Math.round(n.height*r)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar(Cr),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.baseSize.width!==n||this.baseSize.height!==e)&&(this.baseSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferredSize.width!==n||this.preferredSize.height!==e)&&(this.preferredSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.baseWidth,n.baseHeight),this.preferredSize.set(n.preferredWidth,n.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Cr}},py="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",fy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",my="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",vy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",gy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",_y="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",wy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",by="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",yy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",xy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",Ty="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",Cy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",Sy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",Py="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",Ey="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",My="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",Ay="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",ky="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",Ry="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",Ly="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Oy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",Dy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",By="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",Iy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",Uy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",Fy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",Ny="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Vy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",zy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",Hy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",jy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",Gy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",Ky=new Map([[le.ADD,py],[le.ALPHA,fy],[le.AVERAGE,my],[le.COLOR,vy],[le.COLOR_BURN,gy],[le.COLOR_DODGE,_y],[le.DARKEN,wy],[le.DIFFERENCE,by],[le.DIVIDE,yy],[le.DST,null],[le.EXCLUSION,xy],[le.HARD_LIGHT,Ty],[le.HARD_MIX,Cy],[le.HUE,Sy],[le.INVERT,Py],[le.INVERT_RGB,Ey],[le.LIGHTEN,My],[le.LINEAR_BURN,Ay],[le.LINEAR_DODGE,ky],[le.LINEAR_LIGHT,Ry],[le.LUMINOSITY,Ly],[le.MULTIPLY,Oy],[le.NEGATION,Dy],[le.NORMAL,By],[le.OVERLAY,Iy],[le.PIN_LIGHT,Uy],[le.REFLECT,Fy],[le.SATURATION,Ny],[le.SCREEN,Vy],[le.SOFT_LIGHT,zy],[le.SRC,Hy],[le.SUBTRACT,jy],[le.VIVID_LIGHT,Gy]]),$y=class extends vu{constructor(n,e=1){super(),this._blendFunction=n,this.opacity=new be(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return Ky.get(this.blendFunction)}},Wy=class extends vu{constructor(n,e,{attributes:t=ci.NONE,blendFunction:r=le.NORMAL,defines:i=new Map,uniforms:s=new Map,extensions:o=null,vertexShader:a=null}={}){super(),this.name=n,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=a,this.defines=i,this.uniforms=s,this.extensions=o,this.blendMode=new $y(r),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=Ua,this._outputColorSpace=Cp}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(n){this._inputColorSpace=n,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n,this.setChanged()}set mainScene(n){}set mainCamera(n){}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,e=ps){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof Bn||e instanceof Bs||e instanceof aa||e instanceof Pn)&&this[n].dispose()}}},Xy=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,ah=class extends Wy{constructor({blendFunction:n=le.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,mipmapBlur:r=!1,intensity:i=1,radius:s=.85,levels:o=8,kernelSize:a=Xu.LARGE,resolutionScale:l=.5,width:u=Tt.AUTO_SIZE,height:c=Tt.AUTO_SIZE,resolutionX:h=u,resolutionY:p=c}={}){super("BloomEffect",Xy,{blendFunction:n,uniforms:new Map([["map",new be(null)],["intensity",new be(i)]])}),this.renderTarget=new Bn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new sy({kernelSize:a}),this.luminancePass=new oy({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new ly,this.mipmapBlurPass.enabled=r,this.mipmapBlurPass.radius=s,this.mipmapBlurPass.levels=o,this.uniforms.get("map").value=r?this.mipmapBlurPass.texture:this.renderTarget.texture;const d=this.resolution=new Tt(this,h,p,l);d.addEventListener("change",g=>this.setSize(d.baseWidth,d.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(n){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getIntensity(){return this.intensity}setIntensity(n){this.intensity=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}update(n,e,t){const r=this.renderTarget,i=this.luminancePass;i.enabled?(i.render(n,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,i.renderTarget):this.blurPass.render(n,i.renderTarget,r)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,e):this.blurPass.render(n,e,r)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(n,e),this.mipmapBlurPass.setSize(n,e)}initialize(n,e,t){this.blurPass.initialize(n,e,t),this.luminancePass.initialize(n,e,t),this.mipmapBlurPass.initialize(n,e,t),t!==void 0&&(this.renderTarget.texture.type=t,os(n)===dt&&Br(this.renderTarget.texture,dt))}};const Rp=Symbol(),qy=n=>{const e=Gh(Rp),t=Xs(null),r=Xs(null),{scene:i,camera:s}=au();xl(()=>{!s.value||!(r!=null&&r.value)||(r.value.mainCamera=s.value)});let o=()=>{};return o=xl(()=>{!s.value||!(e!=null&&e.value)||!i.value||(o(),!r.value&&(r.value=n(),t.value=new iy(s.value,r.value),e.value.addPass(t.value)))}),Ea(()=>{var a,l,u;t.value&&((a=e==null?void 0:e.value)==null||a.removePass(t.value)),(l=r.value)==null||l.dispose(),(u=t.value)==null||u.dispose()}),{pass:t,effect:r}},Lp=/([^[.\]])+/g,Yy=(n,e)=>{if(!e)return;const t=Array.isArray(e)?e:e.match(Lp);return t==null?void 0:t.reduce((r,i)=>r&&r[i],n)},lh=(n,e,t)=>{const r=Array.isArray(e)?e:e.match(Lp);r&&r.reduce((i,s,o)=>(i[s]===void 0&&(i[s]={}),o===r.length-1&&(i[s]=t),i[s]),n)},Zy=(n,e,t,r,i={})=>_i(n,s=>{var o;if(e.value)if(s===void 0){const a=r();lh(e.value,t,Yy(a,t)),(o=a.dispose)==null||o.call(a)}else lh(e.value,t,n())},i),Qy=(n,e,t)=>n.map(([r,i])=>Zy(r,e,i,t)),Jy=Sa({__name:"Bloom",props:{blendFunction:{},intensity:{},kernelSize:{},luminanceThreshold:{},luminanceSmoothing:{},mipmapBlur:{type:Boolean,default:void 0}},setup(n,{expose:e}){const t=n,{pass:r,effect:i}=qy(()=>new ah(t));return e({pass:r,effect:i}),Qy([[()=>t.intensity,"intensity"],[()=>t.kernelSize,"kernelSize"],[()=>t.luminanceSmoothing,"luminanceMaterial.smoothing"],[()=>t.luminanceThreshold,"luminanceMaterial.threshold"]],i,()=>new ah),(s,o)=>null}});let Cs;function uh(){var n;if(Cs!==void 0)return Cs;try{let e;const t=document.createElement("canvas");return Cs=!!(window.WebGL2RenderingContext&&(e=t.getContext("webgl2"))),e&&((n=e.getExtension("WEBGL_lose_context"))==null||n.loseContext()),Cs}catch{return Cs=!1}}const ex=Sa({__name:"EffectComposer",props:{enabled:{type:Boolean,default:!0},children:{},depthBuffer:{type:Boolean,default:void 0},disableNormalPass:{type:Boolean,default:!1},stencilBuffer:{type:Boolean,default:void 0},resolutionScale:{},autoClear:{type:Boolean,default:!0},multisampling:{default:0},frameBufferType:{default:Tl}},setup(n){const e=n,{scene:t,camera:r,renderer:i,sizes:s}=au(),o=Xs(null);let a=null,l=null;cv(Rp,o);const u=()=>{o.value&&(l=new uy(t.value,r.value),l.enabled=!1,o.value.addPass(l),e.resolutionScale!==void 0&&uh()&&(a=new ny({normalBuffer:l.texture,resolutionScale:e.resolutionScale}),a.enabled=!1,o.value.addPass(a)))},c=Pr(()=>{const d=new sh,g={depthBuffer:e.depthBuffer!==void 0?e.depthBuffer:d.inputBuffer.depthBuffer,stencilBuffer:e.stencilBuffer!==void 0?e.stencilBuffer:d.inputBuffer.stencilBuffer,multisampling:uh()?0:e.multisampling!==void 0?e.multisampling:d.multisampling,frameBufferType:e.frameBufferType!==void 0?e.frameBufferType:Tl};return d.dispose(),g}),h=()=>{!i.value&&!t.value&&!r.value||(o.value=new sh(i.value,c.value),o.value.addPass(new kp(t.value,r.value)),e.disableNormalPass||u())};_i([i,t,r,()=>e.disableNormalPass],()=>{!s.width.value||!s.height.value||h()}),_i(()=>[s.width.value,s.height.value],([d,g])=>{!d&&!g||(o.value?o.value.setSize(d,g):h())},{immediate:!0});const{onLoop:p}=Ca();return p(({delta:d})=>{if(e.enabled&&i.value&&o.value&&s.width.value&&s.height.value){const g=i.value.autoClear;i.value.autoClear=e.autoClear,e.stencilBuffer&&!e.autoClear&&i.value.clearStencil(),o.value.render(d),i.value.autoClear=g}}),Ea(()=>{var d;(d=o.value)==null||d.dispose()}),(d,g)=>Wh(d.$slots,"default")}});/**
 * postprocessing v7.0.0-alpha-1 build Tue Jan 02 2024
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015 Raoul van Rüschen
 * @license Zlib
 */var ai,tx=(ai=class{constructor(e,t,r=!1){Oi(this,"id");Oi(this,"name");Oi(this,"shader");Oi(this,"supportsHDR");this.id=ai.nextId++,this.name=e,this.shader=t,this.supportsHDR=r}},Oi(ai,"nextId",0),ai);new Yt;const Op=n=>(hd("data-v-45cf0736"),n=n(),dd(),n),nx=Op(()=>W("TresFog",{args:["#212529",5,8]},null,-1)),rx=Op(()=>W("TresAmbientLight",{intensity:.5},null,-1)),ix={__name:"VehicleShow",async setup(n){let e,t;[e,t]=mu(()=>new Promise(a=>setTimeout(a,1e3))),await e,t();const r={position:[1.1649126428341294,1.018586264520942,3.2328665887838635],rotation:[-.5207382995061891,.7537831706788972,.374053366677032],fov:60},i={position:[1.1872965971551082,.5439220142096681,4.441324731788647],rotation:[-.19550027394038297,.2957791581121024,.057658742410624374],fov:60},s=ud("(max-width: 768px)");_i(s,()=>{window.location.reload()});const o={luminanceThreshold:.5,luminanceSmoothing:.5,intensity:.5,blendFunction:tx.ADD};return(a,l)=>{const u=kb,c=Pb,h=wv,p=cd("TresCanvas");return un(),As(jo,null,{default:_n(()=>[yt(p,{ref:"tresCanvas","window-size":"",preset:"realistic",clearColor:"#151928"},{default:_n(()=>[W("TresPerspectiveCamera",hv({ref:"camera"},Gt(s)?i:r),null,16),nx,(un(),As(jo,null,{default:_n(()=>[yt(u,{ref:"ground"},null,512)]),_:1})),(un(),As(jo,null,{default:_n(()=>[yt(c)]),_:1})),rx,Gt(s)?pu("",!0):(un(),As(h,{key:0,factor:.5,ease:10})),yt(Gt(ex),null,{default:_n(()=>[yt(Gt(Jy),id(sd(o)),null,16)]),_:1})]),_:1},512)]),_:1})}}},sx=ld(ix,[["__scopeId","data-v-45cf0736"]]),ox="/autoking/assets/conversation-BhZLp37N.jpeg";function ir(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Dp(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.4
 * https://gsap.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var hn={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},as={duration:.5,overwrite:!1,delay:0},qu,Ct,Ge,xn=1e8,ke=1/xn,Il=Math.PI*2,ax=Il/4,lx=0,Bp=Math.sqrt,ux=Math.cos,cx=Math.sin,ft=function(e){return typeof e=="string"},Ke=function(e){return typeof e=="function"},fr=function(e){return typeof e=="number"},Yu=function(e){return typeof e>"u"},Zn=function(e){return typeof e=="object"},$t=function(e){return e!==!1},Zu=function(){return typeof window<"u"},Ao=function(e){return Ke(e)||ft(e)},Ip=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},St=Array.isArray,Ul=/(?:-?\.?\d|\.)+/gi,Up=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Gi=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,sl=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Fp=/[+-]=-?[.\d]+/,Np=/[^,'"\[\]\s]+/gi,hx=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Ne,gn,Fl,Qu,dn={},pa={},Vp,zp=function(e){return(pa=xi(e,dn))&&Qt},Ju=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},no=function(e,t){return!t&&console.warn(e)},Hp=function(e,t){return e&&(dn[e]=t)&&pa&&(pa[e]=t)||dn},ro=function(){return 0},dx={suppressEvents:!0,isStart:!0,kill:!1},qo={suppressEvents:!0,kill:!1},px={suppressEvents:!0},ec={},Ir=[],Nl={},jp,sn={},ol={},ch=30,Yo=[],tc="",nc=function(e){var t=e[0],r,i;if(Zn(t)||Ke(t)||(e=[e]),!(r=(t._gsap||{}).harness)){for(i=Yo.length;i--&&!Yo[i].targetTest(t););r=Yo[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new ff(e[i],r)))||e.splice(i,1);return e},hi=function(e){return e._gsap||nc(Tn(e))[0]._gsap},Gp=function(e,t,r){return(r=e[t])&&Ke(r)?e[t]():Yu(r)&&e.getAttribute&&e.getAttribute(t)||r},Wt=function(e,t){return(e=e.split(",")).forEach(t)||e},Xe=function(e){return Math.round(e*1e5)/1e5||0},ht=function(e){return Math.round(e*1e7)/1e7||0},Zi=function(e,t){var r=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),r==="+"?e+i:r==="-"?e-i:r==="*"?e*i:e/i},fx=function(e,t){for(var r=t.length,i=0;e.indexOf(t[i])<0&&++i<r;);return i<r},fa=function(){var e=Ir.length,t=Ir.slice(0),r,i;for(Nl={},Ir.length=0,r=0;r<e;r++)i=t[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},Kp=function(e,t,r,i){Ir.length&&!Ct&&fa(),e.render(t,r,Ct&&t<0&&(e._initted||e._startAt)),Ir.length&&!Ct&&fa()},$p=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(Np).length<2?t:ft(e)?e.trim():e},Wp=function(e){return e},Sn=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},mx=function(e){return function(t,r){for(var i in r)i in t||i==="duration"&&e||i==="ease"||(t[i]=r[i])}},xi=function(e,t){for(var r in t)e[r]=t[r];return e},hh=function n(e,t){for(var r in t)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=Zn(t[r])?n(e[r]||(e[r]={}),t[r]):t[r]);return e},ma=function(e,t){var r={},i;for(i in e)i in t||(r[i]=e[i]);return r},Us=function(e){var t=e.parent||Ne,r=e.keyframes?mx(St(e.keyframes)):Sn;if($t(e.inherit))for(;t;)r(e,t.vars.defaults),t=t.parent||t._dp;return e},vx=function(e,t){for(var r=e.length,i=r===t.length;i&&r--&&e[r]===t[r];);return r<0},Xp=function(e,t,r,i,s){var o=e[i],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[i]=t,t._prev=o,t.parent=t._dp=e,t},Fa=function(e,t,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var s=t._prev,o=t._next;s?s._next=o:e[r]===t&&(e[r]=o),o?o._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},zr=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},di=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},gx=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Vl=function(e,t,r,i){return e._startAt&&(Ct?e._startAt.revert(qo):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},_x=function n(e){return!e||e._ts&&n(e.parent)},dh=function(e){return e._repeat?ls(e._tTime,e=e.duration()+e._rDelay)*e:0},ls=function(e,t){var r=Math.floor(e/=t);return e&&r===e?r-1:r},va=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Na=function(e){return e._end=ht(e._start+(e._tDur/Math.abs(e._ts||e._rts||ke)||0))},Va=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=ht(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Na(e),r._dirty||di(r,e)),e},qp=function(e,t){var r;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(r=va(e.rawTime(),t),(!t._dur||xo(0,t.totalDuration(),r)-t._tTime>ke)&&t.render(r,!0)),di(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-ke}},Hn=function(e,t,r,i){return t.parent&&zr(t),t._start=ht((fr(r)?r:r||e!==Ne?mn(e,r,t):e._time)+t._delay),t._end=ht(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Xp(e,t,"_first","_last",e._sort?"_start":0),zl(t)||(e._recent=t),i||qp(e,t),e._ts<0&&Va(e,e._tTime),e},Yp=function(e,t){return(dn.ScrollTrigger||Ju("scrollTrigger",t))&&dn.ScrollTrigger.create(t,e)},Zp=function(e,t,r,i,s){if(ic(e,t,s),!e._initted)return 1;if(!r&&e._pt&&!Ct&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&jp!==an.frame)return Ir.push(e),e._lazy=[s,i],1},wx=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},zl=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},bx=function(e,t,r,i){var s=e.ratio,o=t<0||!t&&(!e._start&&wx(e)&&!(!e._initted&&zl(e))||(e._ts<0||e._dp._ts<0)&&!zl(e))?0:1,a=e._rDelay,l=0,u,c,h;if(a&&e._repeat&&(l=xo(0,e._tDur,t),c=ls(l,a),e._yoyo&&c&1&&(o=1-o),c!==ls(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||Ct||i||e._zTime===ke||!t&&e._zTime){if(!e._initted&&Zp(e,t,i,r,l))return;for(h=e._zTime,e._zTime=t||(r?ke:0),r||(r=t&&!h),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,u=e._pt;u;)u.r(o,u.d),u=u._next;t<0&&Vl(e,t,r,!0),e._onUpdate&&!r&&cn(e,"onUpdate"),l&&e._repeat&&!r&&e.parent&&cn(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&zr(e,1),!r&&!Ct&&(cn(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},yx=function(e,t,r){var i;if(r>t)for(i=e._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},us=function(e,t,r,i){var s=e._repeat,o=ht(t)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:ht(o*(s+1)+e._rDelay*s):o,a>0&&!i&&Va(e,e._tTime=e._tDur*a),e.parent&&Na(e),r||di(e.parent,e),e},ph=function(e){return e instanceof Dt?di(e):us(e,e._dur)},xx={_start:0,endTime:ro,totalDuration:ro},mn=function n(e,t,r){var i=e.labels,s=e._recent||xx,o=e.duration()>=xn?s.endTime(!1):e._dur,a,l,u;return ft(t)&&(isNaN(t)||t in i)?(l=t.charAt(0),u=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(u?(a<0?s:r).totalDuration()/100:1)):a<0?(t in i||(i[t]=o),i[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),u&&r&&(l=l/100*(St(r)?r[0]:r).totalDuration()),a>1?n(e,t.substr(0,a-1),r)+l:o+l)):t==null?o:+t},Fs=function(e,t,r){var i=fr(t[1]),s=(i?2:1)+(e<2?0:1),o=t[s],a,l;if(i&&(o.duration=t[1]),o.parent=r,e){for(a=o,l=r;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=$t(l.vars.inherit)&&l.parent;o.immediateRender=$t(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new Je(t[0],o,t[s+1])},Kr=function(e,t){return e||e===0?t(e):t},xo=function(e,t,r){return r<e?e:r>t?t:r},xt=function(e,t){return!ft(e)||!(t=hx.exec(e))?"":t[1]},Tx=function(e,t,r){return Kr(r,function(i){return xo(e,t,i)})},Hl=[].slice,Qp=function(e,t){return e&&Zn(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Zn(e[0]))&&!e.nodeType&&e!==gn},Cx=function(e,t,r){return r===void 0&&(r=[]),e.forEach(function(i){var s;return ft(i)&&!t||Qp(i,1)?(s=r).push.apply(s,Tn(i)):r.push(i)})||r},Tn=function(e,t,r){return Ge&&!t&&Ge.selector?Ge.selector(e):ft(e)&&!r&&(Fl||!cs())?Hl.call((t||Qu).querySelectorAll(e),0):St(e)?Cx(e,r):Qp(e)?Hl.call(e,0):e?[e]:[]},jl=function(e){return e=Tn(e)[0]||no("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return Tn(t,r.querySelectorAll?r:r===e?no("Invalid scope")||Qu.createElement("div"):e)}},Jp=function(e){return e.sort(function(){return .5-Math.random()})},ef=function(e){if(Ke(e))return e;var t=Zn(e)?e:{each:e},r=pi(t.ease),i=t.from||0,s=parseFloat(t.base)||0,o={},a=i>0&&i<1,l=isNaN(i)||a,u=t.axis,c=i,h=i;return ft(i)?c=h={center:.5,edges:.5,end:1}[i]||0:!a&&l&&(c=i[0],h=i[1]),function(p,d,g){var f=(g||t).length,v=o[f],C,y,P,T,L,x,S,_,b;if(!v){if(b=t.grid==="auto"?0:(t.grid||[1,xn])[1],!b){for(S=-xn;S<(S=g[b++].getBoundingClientRect().left)&&b<f;);b<f&&b--}for(v=o[f]=[],C=l?Math.min(b,f)*c-.5:i%b,y=b===xn?0:l?f*h/b-.5:i/b|0,S=0,_=xn,x=0;x<f;x++)P=x%b-C,T=y-(x/b|0),v[x]=L=u?Math.abs(u==="y"?T:P):Bp(P*P+T*T),L>S&&(S=L),L<_&&(_=L);i==="random"&&Jp(v),v.max=S-_,v.min=_,v.v=f=(parseFloat(t.amount)||parseFloat(t.each)*(b>f?f-1:u?u==="y"?f/b:b:Math.max(b,f/b))||0)*(i==="edges"?-1:1),v.b=f<0?s-f:s,v.u=xt(t.amount||t.each)||0,r=r&&f<0?hf(r):r}return f=(v[p]-v.min)/v.max||0,ht(v.b+(r?r(f):f)*v.v)+v.u}},Gl=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=ht(Math.round(parseFloat(r)/e)*e*t);return(i-i%1)/t+(fr(r)?0:xt(r))}},tf=function(e,t){var r=St(e),i,s;return!r&&Zn(e)&&(i=r=e.radius||xn,e.values?(e=Tn(e.values),(s=!fr(e[0]))&&(i*=i)):e=Gl(e.increment)),Kr(t,r?Ke(e)?function(o){return s=e(o),Math.abs(s-o)<=i?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),u=xn,c=0,h=e.length,p,d;h--;)s?(p=e[h].x-a,d=e[h].y-l,p=p*p+d*d):p=Math.abs(e[h]-a),p<u&&(u=p,c=h);return c=!i||u<=i?e[c]:o,s||c===o||fr(o)?c:c+xt(o)}:Gl(e))},nf=function(e,t,r,i){return Kr(St(e)?!t:r===!0?!!(r=0):!i,function(){return St(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+r*.99))/r)*r*i)/i})},Sx=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){return t.reduce(function(s,o){return o(s)},i)}},Px=function(e,t){return function(r){return e(parseFloat(r))+(t||xt(r))}},Ex=function(e,t,r){return sf(e,t,0,1,r)},rf=function(e,t,r){return Kr(r,function(i){return e[~~t(i)]})},Mx=function n(e,t,r){var i=t-e;return St(e)?rf(e,n(0,e.length),t):Kr(r,function(s){return(i+(s-e)%i)%i+e})},Ax=function n(e,t,r){var i=t-e,s=i*2;return St(e)?rf(e,n(0,e.length-1),t):Kr(r,function(o){return o=(s+(o-e)%s)%s||0,e+(o>i?s-o:o)})},io=function(e){for(var t=0,r="",i,s,o,a;~(i=e.indexOf("random(",t));)o=e.indexOf(")",i),a=e.charAt(i+7)==="[",s=e.substr(i+7,o-i-7).match(a?Np:Ul),r+=e.substr(t,i-t)+nf(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return r+e.substr(t,e.length-t)},sf=function(e,t,r,i,s){var o=t-e,a=i-r;return Kr(s,function(l){return r+((l-e)/o*a||0)})},kx=function n(e,t,r,i){var s=isNaN(e+t)?0:function(d){return(1-d)*e+d*t};if(!s){var o=ft(e),a={},l,u,c,h,p;if(r===!0&&(i=1)&&(r=null),o)e={p:e},t={p:t};else if(St(e)&&!St(t)){for(c=[],h=e.length,p=h-2,u=1;u<h;u++)c.push(n(e[u-1],e[u]));h--,s=function(g){g*=h;var f=Math.min(p,~~g);return c[f](g-f)},r=t}else i||(e=xi(St(e)?[]:{},e));if(!c){for(l in t)rc.call(a,e,l,"get",t[l]);s=function(g){return ac(g,a)||(o?e.p:e)}}}return Kr(r,s)},fh=function(e,t,r){var i=e.labels,s=xn,o,a,l;for(o in i)a=i[o]-t,a<0==!!r&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},cn=function(e,t,r){var i=e.vars,s=i[t],o=Ge,a=e._ctx,l,u,c;if(s)return l=i[t+"Params"],u=i.callbackScope||e,r&&Ir.length&&fa(),a&&(Ge=a),c=l?s.apply(u,l):s.call(u),Ge=o,c},ks=function(e){return zr(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Ct),e.progress()<1&&cn(e,"onInterrupt"),e},Ki,of=[],af=function(e){if(Zu()&&e){e=!e.name&&e.default||e;var t=e.name,r=Ke(e),i=t&&!r&&e.init?function(){this._props=[]}:e,s={init:ro,render:ac,add:rc,kill:$x,modifier:Kx,rawVars:0},o={targetTest:0,get:0,getSetter:oc,aliases:{},register:0};if(cs(),e!==i){if(sn[t])return;Sn(i,Sn(ma(e,s),o)),xi(i.prototype,xi(s,ma(e,o))),sn[i.prop=t]=i,e.targetTest&&(Yo.push(i),ec[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}Hp(t,i),e.register&&e.register(Qt,i,Xt)}else e&&of.push(e)},Ae=255,Rs={aqua:[0,Ae,Ae],lime:[0,Ae,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ae],navy:[0,0,128],white:[Ae,Ae,Ae],olive:[128,128,0],yellow:[Ae,Ae,0],orange:[Ae,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ae,0,0],pink:[Ae,192,203],cyan:[0,Ae,Ae],transparent:[Ae,Ae,Ae,0]},al=function(e,t,r){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(r-t)*e*6:e<.5?r:e*3<2?t+(r-t)*(2/3-e)*6:t)*Ae+.5|0},lf=function(e,t,r){var i=e?fr(e)?[e>>16,e>>8&Ae,e&Ae]:0:Rs.black,s,o,a,l,u,c,h,p,d,g;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Rs[e])i=Rs[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&Ae,i&Ae,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&Ae,e&Ae]}else if(e.substr(0,3)==="hsl"){if(i=g=e.match(Ul),!t)l=+i[0]%360/360,u=+i[1]/100,c=+i[2]/100,o=c<=.5?c*(u+1):c+u-c*u,s=c*2-o,i.length>3&&(i[3]*=1),i[0]=al(l+1/3,s,o),i[1]=al(l,s,o),i[2]=al(l-1/3,s,o);else if(~e.indexOf("="))return i=e.match(Up),r&&i.length<4&&(i[3]=1),i}else i=e.match(Ul)||Rs.transparent;i=i.map(Number)}return t&&!g&&(s=i[0]/Ae,o=i[1]/Ae,a=i[2]/Ae,h=Math.max(s,o,a),p=Math.min(s,o,a),c=(h+p)/2,h===p?l=u=0:(d=h-p,u=c>.5?d/(2-h-p):d/(h+p),l=h===s?(o-a)/d+(o<a?6:0):h===o?(a-s)/d+2:(s-o)/d+4,l*=60),i[0]=~~(l+.5),i[1]=~~(u*100+.5),i[2]=~~(c*100+.5)),r&&i.length<4&&(i[3]=1),i},uf=function(e){var t=[],r=[],i=-1;return e.split(Ur).forEach(function(s){var o=s.match(Gi)||[];t.push.apply(t,o),r.push(i+=o.length+1)}),t.c=r,t},mh=function(e,t,r){var i="",s=(e+i).match(Ur),o=t?"hsla(":"rgba(",a=0,l,u,c,h;if(!s)return e;if(s=s.map(function(p){return(p=lf(p,t,1))&&o+(t?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),r&&(c=uf(e),l=r.c,l.join(i)!==c.c.join(i)))for(u=e.replace(Ur,"1").split(Gi),h=u.length-1;a<h;a++)i+=u[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(c.length?c:s.length?s:r).shift());if(!u)for(u=e.split(Ur),h=u.length-1;a<h;a++)i+=u[a]+s[a];return i+u[h]},Ur=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Rs)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),Rx=/hsl[a]?\(/,cf=function(e){var t=e.join(" "),r;if(Ur.lastIndex=0,Ur.test(t))return r=Rx.test(t),e[1]=mh(e[1],r),e[0]=mh(e[0],r,uf(e[1])),!0},so,an=function(){var n=Date.now,e=500,t=33,r=n(),i=r,s=1e3/240,o=s,a=[],l,u,c,h,p,d,g=function f(v){var C=n()-i,y=v===!0,P,T,L,x;if(C>e&&(r+=C-t),i+=C,L=i-r,P=L-o,(P>0||y)&&(x=++h.frame,p=L-h.time*1e3,h.time=L=L/1e3,o+=P+(P>=s?4:s-P),T=1),y||(l=u(f)),T)for(d=0;d<a.length;d++)a[d](L,p,x,v)};return h={time:0,frame:0,tick:function(){g(!0)},deltaRatio:function(v){return p/(1e3/(v||60))},wake:function(){Vp&&(!Fl&&Zu()&&(gn=Fl=window,Qu=gn.document||{},dn.gsap=Qt,(gn.gsapVersions||(gn.gsapVersions=[])).push(Qt.version),zp(pa||gn.GreenSockGlobals||!gn.gsap&&gn||{}),c=gn.requestAnimationFrame,of.forEach(af)),l&&h.sleep(),u=c||function(v){return setTimeout(v,o-h.time*1e3+1|0)},so=1,g(2))},sleep:function(){(c?gn.cancelAnimationFrame:clearTimeout)(l),so=0,u=ro},lagSmoothing:function(v,C){e=v||1/0,t=Math.min(C||33,e)},fps:function(v){s=1e3/(v||240),o=h.time*1e3+s},add:function(v,C,y){var P=C?function(T,L,x,S){v(T,L,x,S),h.remove(P)}:v;return h.remove(v),a[y?"unshift":"push"](P),cs(),P},remove:function(v,C){~(C=a.indexOf(v))&&a.splice(C,1)&&d>=C&&d--},_listeners:a},h}(),cs=function(){return!so&&an.wake()},he={},Lx=/^[\d.\-M][\d.\-,\s]/,Ox=/["']/g,Dx=function(e){for(var t={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,o=r.length,a,l,u;s<o;s++)l=r[s],a=s!==o-1?l.lastIndexOf(","):l.length,u=l.substr(0,a),t[i]=isNaN(u)?u.replace(Ox,"").trim():+u,i=l.substr(a+1).trim();return t},Bx=function(e){var t=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<r?e.indexOf(")",r+1):r)},Ix=function(e){var t=(e+"").split("("),r=he[t[0]];return r&&t.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[Dx(t[1])]:Bx(e).split(",").map($p)):he._CE&&Lx.test(e)?he._CE("",e):r},hf=function(e){return function(t){return 1-e(1-t)}},df=function n(e,t){for(var r=e._first,i;r;)r instanceof Dt?n(r,t):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==t&&(r.timeline?n(r.timeline,t):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=t)),r=r._next},pi=function(e,t){return e&&(Ke(e)?e:he[e]||Ix(e))||t},Ai=function(e,t,r,i){r===void 0&&(r=function(l){return 1-t(1-l)}),i===void 0&&(i=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:r,easeInOut:i},o;return Wt(e,function(a){he[a]=dn[a]=s,he[o=a.toLowerCase()]=r;for(var l in s)he[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=he[a+"."+l]=s[l]}),s},pf=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},ll=function n(e,t,r){var i=t>=1?t:1,s=(r||(e?.3:.45))/(t<1?t:1),o=s/Il*(Math.asin(1/i)||0),a=function(c){return c===1?1:i*Math.pow(2,-10*c)*cx((c-o)*s)+1},l=e==="out"?a:e==="in"?function(u){return 1-a(1-u)}:pf(a);return s=Il/s,l.config=function(u,c){return n(e,u,c)},l},ul=function n(e,t){t===void 0&&(t=1.70158);var r=function(o){return o?--o*o*((t+1)*o+t)+1:0},i=e==="out"?r:e==="in"?function(s){return 1-r(1-s)}:pf(r);return i.config=function(s){return n(e,s)},i};Wt("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;Ai(n+",Power"+(t-1),e?function(r){return Math.pow(r,t)}:function(r){return r},function(r){return 1-Math.pow(1-r,t)},function(r){return r<.5?Math.pow(r*2,t)/2:1-Math.pow((1-r)*2,t)/2})});he.Linear.easeNone=he.none=he.Linear.easeIn;Ai("Elastic",ll("in"),ll("out"),ll());(function(n,e){var t=1/e,r=2*t,i=2.5*t,s=function(a){return a<t?n*a*a:a<r?n*Math.pow(a-1.5/e,2)+.75:a<i?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};Ai("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);Ai("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});Ai("Circ",function(n){return-(Bp(1-n*n)-1)});Ai("Sine",function(n){return n===1?1:-ux(n*ax)+1});Ai("Back",ul("in"),ul("out"),ul());he.SteppedEase=he.steps=dn.SteppedEase={config:function(e,t){e===void 0&&(e=1);var r=1/e,i=e+(t?0:1),s=t?1:0,o=1-ke;return function(a){return((i*xo(0,o,a)|0)+s)*r}}};as.ease=he["quad.out"];Wt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return tc+=n+","+n+"Params,"});var ff=function(e,t){this.id=lx++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:Gp,this.set=t?t.getSetter:oc},oo=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,us(this,+t.duration,1,1),this.data=t.data,Ge&&(this._ctx=Ge,Ge.data.push(this)),so||an.wake()}var e=n.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,us(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(cs(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Va(this,r),!s._dp||s.parent||qp(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&Hn(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===ke||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),Kp(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+dh(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+dh(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?ls(this._tTime,s)+1:1},e.timeScale=function(r,i){if(!arguments.length)return this._rts===-ke?0:this._rts;if(this._rts===r)return this;var s=this.parent&&this._ts?va(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-ke?0:this._rts,this.totalTime(xo(-Math.abs(this._delay),this._tDur,s),i!==!1),Na(this),gx(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(cs(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==ke&&(this._tTime-=ke)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&Hn(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+($t(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?va(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=px);var i=Ct;return Ct=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),Ct=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,ph(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,ph(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(mn(this,r),$t(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,$t(i))},e.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-ke:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-ke,this},e.isActive=function(){var r=this.parent||this._dp,i=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-ke)},e.eventCallback=function(r,i,s){var o=this.vars;return arguments.length>1?(i?(o[r]=i,s&&(o[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=i)):delete o[r],this):o[r]},e.then=function(r){var i=this;return new Promise(function(s){var o=Ke(r)?r:Wp,a=function(){var u=i.then;i.then=null,Ke(o)&&(o=o(i))&&(o.then||o===i)&&(i.then=u),s(o),i.then=u};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?a():i._prom=a})},e.kill=function(){ks(this)},n}();Sn(oo.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-ke,_prom:0,_ps:!1,_rts:1});var Dt=function(n){Dp(e,n);function e(r,i){var s;return r===void 0&&(r={}),s=n.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=$t(r.sortChildren),Ne&&Hn(r.parent||Ne,ir(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&Yp(ir(s),r.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,o){return Fs(0,arguments,this),this},t.from=function(i,s,o){return Fs(1,arguments,this),this},t.fromTo=function(i,s,o,a){return Fs(2,arguments,this),this},t.set=function(i,s,o){return s.duration=0,s.parent=this,Us(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Je(i,s,mn(this,o),1),this},t.call=function(i,s,o){return Hn(this,Je.delayedCall(0,i,s),o)},t.staggerTo=function(i,s,o,a,l,u,c){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=u,o.onCompleteParams=c,o.parent=this,new Je(i,o,mn(this,l)),this},t.staggerFrom=function(i,s,o,a,l,u,c){return o.runBackwards=1,Us(o).immediateRender=$t(o.immediateRender),this.staggerTo(i,s,o,a,l,u,c)},t.staggerFromTo=function(i,s,o,a,l,u,c,h){return a.startAt=o,Us(a).immediateRender=$t(a.immediateRender),this.staggerTo(i,s,a,l,u,c,h)},t.render=function(i,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,u=this._dur,c=i<=0?0:ht(i),h=this._zTime<0!=i<0&&(this._initted||!u),p,d,g,f,v,C,y,P,T,L,x,S;if(this!==Ne&&c>l&&i>=0&&(c=l),c!==this._tTime||o||h){if(a!==this._time&&u&&(c+=this._time-a,i+=this._time-a),p=c,T=this._start,P=this._ts,C=!P,h&&(u||(a=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(x=this._yoyo,v=u+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(v*100+i,s,o);if(p=ht(c%v),c===l?(f=this._repeat,p=u):(f=~~(c/v),f&&f===c/v&&(p=u,f--),p>u&&(p=u)),L=ls(this._tTime,v),!a&&this._tTime&&L!==f&&this._tTime-L*v-this._dur<=0&&(L=f),x&&f&1&&(p=u-p,S=1),f!==L&&!this._lock){var _=x&&L&1,b=_===(x&&f&1);if(f<L&&(_=!_),a=_?0:c%u?u:c,this._lock=1,this.render(a||(S?0:ht(f*v)),s,!u)._lock=0,this._tTime=c,!s&&this.parent&&cn(this,"onRepeat"),this.vars.repeatRefresh&&!S&&(this.invalidate()._lock=1),a&&a!==this._time||C!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,l=this._tDur,b&&(this._lock=2,a=_?u:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!S&&this.invalidate()),this._lock=0,!this._ts&&!C)return this;df(this,S)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(y=yx(this,ht(a),ht(p)),y&&(c-=p-(p=y._start))),this._tTime=c,this._time=p,this._act=!P,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,a=0),!a&&p&&!s&&!f&&(cn(this,"onStart"),this._tTime!==c))return this;if(p>=a&&i>=0)for(d=this._first;d;){if(g=d._next,(d._act||p>=d._start)&&d._ts&&y!==d){if(d.parent!==this)return this.render(i,s,o);if(d.render(d._ts>0?(p-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(p-d._start)*d._ts,s,o),p!==this._time||!this._ts&&!C){y=0,g&&(c+=this._zTime=-ke);break}}d=g}else{d=this._last;for(var m=i<0?i:p;d;){if(g=d._prev,(d._act||m<=d._end)&&d._ts&&y!==d){if(d.parent!==this)return this.render(i,s,o);if(d.render(d._ts>0?(m-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(m-d._start)*d._ts,s,o||Ct&&(d._initted||d._startAt)),p!==this._time||!this._ts&&!C){y=0,g&&(c+=this._zTime=m?-ke:ke);break}}d=g}}if(y&&!s&&(this.pause(),y.render(p>=a?0:-ke)._zTime=p>=a?1:-1,this._ts))return this._start=T,Na(this),this.render(i,s,o);this._onUpdate&&!s&&cn(this,"onUpdate",!0),(c===l&&this._tTime>=this.totalDuration()||!c&&a)&&(T===this._start||Math.abs(P)!==Math.abs(this._ts))&&(this._lock||((i||!u)&&(c===l&&this._ts>0||!c&&this._ts<0)&&zr(this,1),!s&&!(i<0&&!a)&&(c||a||!l)&&(cn(this,c===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var o=this;if(fr(s)||(s=mn(this,s,i)),!(i instanceof oo)){if(St(i))return i.forEach(function(a){return o.add(a,s)}),this;if(ft(i))return this.addLabel(i,s);if(Ke(i))i=Je.delayedCall(0,i);else return this}return this!==i?Hn(this,i,s):this},t.getChildren=function(i,s,o,a){i===void 0&&(i=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-xn);for(var l=[],u=this._first;u;)u._start>=a&&(u instanceof Je?s&&l.push(u):(o&&l.push(u),i&&l.push.apply(l,u.getChildren(!0,s,o)))),u=u._next;return l},t.getById=function(i){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===i)return s[o]},t.remove=function(i){return ft(i)?this.removeLabel(i):Ke(i)?this.killTweensOf(i):(Fa(this,i),i===this._recent&&(this._recent=this._last),di(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ht(an.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),n.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=mn(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,o){var a=Je.delayedCall(0,s||ro,o);return a.data="isPause",this._hasPause=1,Hn(this,a,mn(this,i))},t.removePause=function(i){var s=this._first;for(i=mn(this,i);s;)s._start===i&&s.data==="isPause"&&zr(s),s=s._next},t.killTweensOf=function(i,s,o){for(var a=this.getTweensOf(i,o),l=a.length;l--;)Ar!==a[l]&&a[l].kill(i,s);return this},t.getTweensOf=function(i,s){for(var o=[],a=Tn(i),l=this._first,u=fr(s),c;l;)l instanceof Je?fx(l._targets,a)&&(u?(!Ar||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(c=l.getTweensOf(a,s)).length&&o.push.apply(o,c),l=l._next;return o},t.tweenTo=function(i,s){s=s||{};var o=this,a=mn(o,i),l=s,u=l.startAt,c=l.onStart,h=l.onStartParams,p=l.immediateRender,d,g=Je.to(o,Sn({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale())||ke,onStart:function(){if(o.pause(),!d){var v=s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale());g._dur!==v&&us(g,v,0,1).render(g._time,!0,!0),d=1}c&&c.apply(g,h||[])}},s));return p?g.render(0):g},t.tweenFromTo=function(i,s,o){return this.tweenTo(s,Sn({startAt:{time:mn(this,i)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),fh(this,mn(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),fh(this,mn(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+ke)},t.shiftChildren=function(i,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,u;a;)a._start>=o&&(a._start+=i,a._end+=i),a=a._next;if(s)for(u in l)l[u]>=o&&(l[u]+=i);return di(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return n.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),di(this)},t.totalDuration=function(i){var s=0,o=this,a=o._last,l=xn,u,c,h;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(h=o.parent;a;)u=a._prev,a._dirty&&a.totalDuration(),c=a._start,c>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,Hn(o,a,c-a._delay,1)._lock=0):l=c,c<0&&a._ts&&(s-=c,(!h&&!o._dp||h&&h.smoothChildTiming)&&(o._start+=c/o._ts,o._time-=c,o._tTime-=c),o.shiftChildren(-c,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=u;us(o,o===Ne&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if(Ne._ts&&(Kp(Ne,va(i,Ne)),jp=an.frame),an.frame>=ch){ch+=hn.autoSleep||120;var s=Ne._first;if((!s||!s._ts)&&hn.autoSleep&&an._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||an.sleep()}}},e}(oo);Sn(Dt.prototype,{_lock:0,_hasPause:0,_forcing:0});var Ux=function(e,t,r,i,s,o,a){var l=new Xt(this._pt,e,t,0,1,bf,null,s),u=0,c=0,h,p,d,g,f,v,C,y;for(l.b=r,l.e=i,r+="",i+="",(C=~i.indexOf("random("))&&(i=io(i)),o&&(y=[r,i],o(y,e,t),r=y[0],i=y[1]),p=r.match(sl)||[];h=sl.exec(i);)g=h[0],f=i.substring(u,h.index),d?d=(d+1)%5:f.substr(-5)==="rgba("&&(d=1),g!==p[c++]&&(v=parseFloat(p[c-1])||0,l._pt={_next:l._pt,p:f||c===1?f:",",s:v,c:g.charAt(1)==="="?Zi(v,g)-v:parseFloat(g)-v,m:d&&d<4?Math.round:0},u=sl.lastIndex);return l.c=u<i.length?i.substring(u,i.length):"",l.fp=a,(Fp.test(i)||C)&&(l.e=0),this._pt=l,l},rc=function(e,t,r,i,s,o,a,l,u,c){Ke(i)&&(i=i(s||0,e,o));var h=e[t],p=r!=="get"?r:Ke(h)?u?e[t.indexOf("set")||!Ke(e["get"+t.substr(3)])?t:"get"+t.substr(3)](u):e[t]():h,d=Ke(h)?u?Hx:_f:sc,g;if(ft(i)&&(~i.indexOf("random(")&&(i=io(i)),i.charAt(1)==="="&&(g=Zi(p,i)+(xt(p)||0),(g||g===0)&&(i=g))),!c||p!==i||Kl)return!isNaN(p*i)&&i!==""?(g=new Xt(this._pt,e,t,+p||0,i-(p||0),typeof h=="boolean"?Gx:wf,0,d),u&&(g.fp=u),a&&g.modifier(a,this,e),this._pt=g):(!h&&!(t in e)&&Ju(t,i),Ux.call(this,e,t,p,i,d,l||hn.stringFilter,u))},Fx=function(e,t,r,i,s){if(Ke(e)&&(e=Ns(e,s,t,r,i)),!Zn(e)||e.style&&e.nodeType||St(e)||Ip(e))return ft(e)?Ns(e,s,t,r,i):e;var o={},a;for(a in e)o[a]=Ns(e[a],s,t,r,i);return o},mf=function(e,t,r,i,s,o){var a,l,u,c;if(sn[e]&&(a=new sn[e]).init(s,a.rawVars?t[e]:Fx(t[e],i,s,o,r),r,i,o)!==!1&&(r._pt=l=new Xt(r._pt,s,e,0,1,a.render,a,0,a.priority),r!==Ki))for(u=r._ptLookup[r._targets.indexOf(s)],c=a._props.length;c--;)u[a._props[c]]=l;return a},Ar,Kl,ic=function n(e,t,r){var i=e.vars,s=i.ease,o=i.startAt,a=i.immediateRender,l=i.lazy,u=i.onUpdate,c=i.runBackwards,h=i.yoyoEase,p=i.keyframes,d=i.autoRevert,g=e._dur,f=e._startAt,v=e._targets,C=e.parent,y=C&&C.data==="nested"?C.vars.targets:v,P=e._overwrite==="auto"&&!qu,T=e.timeline,L,x,S,_,b,m,M,A,V,B,z,U,H;if(T&&(!p||!s)&&(s="none"),e._ease=pi(s,as.ease),e._yEase=h?hf(pi(h===!0?s:h,as.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!T&&!!i.runBackwards,!T||p&&!i.stagger){if(A=v[0]?hi(v[0]).harness:0,U=A&&i[A.prop],L=ma(i,ec),f&&(f._zTime<0&&f.progress(1),t<0&&c&&a&&!d?f.render(-1,!0):f.revert(c&&g?qo:dx),f._lazy=0),o){if(zr(e._startAt=Je.set(v,Sn({data:"isStart",overwrite:!1,parent:C,immediateRender:!0,lazy:!f&&$t(l),startAt:null,delay:0,onUpdate:u&&function(){return cn(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Ct||!a&&!d)&&e._startAt.revert(qo),a&&g&&t<=0&&r<=0){t&&(e._zTime=t);return}}else if(c&&g&&!f){if(t&&(a=!1),S=Sn({overwrite:!1,data:"isFromStart",lazy:a&&!f&&$t(l),immediateRender:a,stagger:0,parent:C},L),U&&(S[A.prop]=U),zr(e._startAt=Je.set(v,S)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Ct?e._startAt.revert(qo):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,ke,ke);else if(!t)return}for(e._pt=e._ptCache=0,l=g&&$t(l)||l&&!g,x=0;x<v.length;x++){if(b=v[x],M=b._gsap||nc(v)[x]._gsap,e._ptLookup[x]=B={},Nl[M.id]&&Ir.length&&fa(),z=y===v?x:y.indexOf(b),A&&(V=new A).init(b,U||L,e,z,y)!==!1&&(e._pt=_=new Xt(e._pt,b,V.name,0,1,V.render,V,0,V.priority),V._props.forEach(function(K){B[K]=_}),V.priority&&(m=1)),!A||U)for(S in L)sn[S]&&(V=mf(S,L,e,z,b,y))?V.priority&&(m=1):B[S]=_=rc.call(e,b,S,"get",L[S],z,y,0,i.stringFilter);e._op&&e._op[x]&&e.kill(b,e._op[x]),P&&e._pt&&(Ar=e,Ne.killTweensOf(b,B,e.globalTime(t)),H=!e.parent,Ar=0),e._pt&&l&&(Nl[M.id]=1)}m&&yf(e),e._onInit&&e._onInit(e)}e._onUpdate=u,e._initted=(!e._op||e._pt)&&!H,p&&t<=0&&T.render(xn,!0,!0)},Nx=function(e,t,r,i,s,o,a,l){var u=(e._pt&&e._ptCache||(e._ptCache={}))[t],c,h,p,d;if(!u)for(u=e._ptCache[t]=[],p=e._ptLookup,d=e._targets.length;d--;){if(c=p[d][t],c&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==t&&c.fp!==t;)c=c._next;if(!c)return Kl=1,e.vars[t]="+=0",ic(e,a),Kl=0,l?no(t+" not eligible for reset"):1;u.push(c)}for(d=u.length;d--;)h=u[d],c=h._pt||h,c.s=(i||i===0)&&!s?i:c.s+(i||0)+o*c.c,c.c=r-c.s,h.e&&(h.e=Xe(r)+xt(h.e)),h.b&&(h.b=c.s+xt(h.b))},Vx=function(e,t){var r=e[0]?hi(e[0]).harness:0,i=r&&r.aliases,s,o,a,l;if(!i)return t;s=xi({},t);for(o in i)if(o in s)for(l=i[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},zx=function(e,t,r,i){var s=t.ease||i||"power1.inOut",o,a;if(St(t))a=r[e]||(r[e]=[]),t.forEach(function(l,u){return a.push({t:u/(t.length-1)*100,v:l,e:s})});else for(o in t)a=r[o]||(r[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},Ns=function(e,t,r,i,s){return Ke(e)?e.call(t,r,i,s):ft(e)&&~e.indexOf("random(")?io(e):e},vf=tc+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",gf={};Wt(vf+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return gf[n]=1});var Je=function(n){Dp(e,n);function e(r,i,s,o){var a;typeof i=="number"&&(s.duration=i,i=s,s=null),a=n.call(this,o?i:Us(i))||this;var l=a.vars,u=l.duration,c=l.delay,h=l.immediateRender,p=l.stagger,d=l.overwrite,g=l.keyframes,f=l.defaults,v=l.scrollTrigger,C=l.yoyoEase,y=i.parent||Ne,P=(St(r)||Ip(r)?fr(r[0]):"length"in i)?[r]:Tn(r),T,L,x,S,_,b,m,M;if(a._targets=P.length?nc(P):no("GSAP target "+r+" not found. https://gsap.com",!hn.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=d,g||p||Ao(u)||Ao(c)){if(i=a.vars,T=a.timeline=new Dt({data:"nested",defaults:f||{},targets:y&&y.data==="nested"?y.vars.targets:P}),T.kill(),T.parent=T._dp=ir(a),T._start=0,p||Ao(u)||Ao(c)){if(S=P.length,m=p&&ef(p),Zn(p))for(_ in p)~vf.indexOf(_)&&(M||(M={}),M[_]=p[_]);for(L=0;L<S;L++)x=ma(i,gf),x.stagger=0,C&&(x.yoyoEase=C),M&&xi(x,M),b=P[L],x.duration=+Ns(u,ir(a),L,b,P),x.delay=(+Ns(c,ir(a),L,b,P)||0)-a._delay,!p&&S===1&&x.delay&&(a._delay=c=x.delay,a._start+=c,x.delay=0),T.to(b,x,m?m(L,b,P):0),T._ease=he.none;T.duration()?u=c=0:a.timeline=0}else if(g){Us(Sn(T.vars.defaults,{ease:"none"})),T._ease=pi(g.ease||i.ease||"none");var A=0,V,B,z;if(St(g))g.forEach(function(U){return T.to(P,U,">")}),T.duration();else{x={};for(_ in g)_==="ease"||_==="easeEach"||zx(_,g[_],x,g.easeEach);for(_ in x)for(V=x[_].sort(function(U,H){return U.t-H.t}),A=0,L=0;L<V.length;L++)B=V[L],z={ease:B.e,duration:(B.t-(L?V[L-1].t:0))/100*u},z[_]=B.v,T.to(P,z,A),A+=z.duration;T.duration()<u&&T.to({},{duration:u-T.duration()})}}u||a.duration(u=T.duration())}else a.timeline=0;return d===!0&&!qu&&(Ar=ir(a),Ne.killTweensOf(P),Ar=0),Hn(y,ir(a),s),i.reversed&&a.reverse(),i.paused&&a.paused(!0),(h||!u&&!g&&a._start===ht(y._time)&&$t(h)&&_x(ir(a))&&y.data!=="nested")&&(a._tTime=-ke,a.render(Math.max(0,-c)||0)),v&&Yp(ir(a),v),a}var t=e.prototype;return t.render=function(i,s,o){var a=this._time,l=this._tDur,u=this._dur,c=i<0,h=i>l-ke&&!c?l:i<ke?0:i,p,d,g,f,v,C,y,P,T;if(!u)bx(this,i,s,o);else if(h!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c){if(p=h,P=this.timeline,this._repeat){if(f=u+this._rDelay,this._repeat<-1&&c)return this.totalTime(f*100+i,s,o);if(p=ht(h%f),h===l?(g=this._repeat,p=u):(g=~~(h/f),g&&g===ht(h/f)&&(p=u,g--),p>u&&(p=u)),C=this._yoyo&&g&1,C&&(T=this._yEase,p=u-p),v=ls(this._tTime,f),p===a&&!o&&this._initted&&g===v)return this._tTime=h,this;g!==v&&(P&&this._yEase&&df(P,C),this.vars.repeatRefresh&&!C&&!this._lock&&this._time!==u&&this._initted&&(this._lock=o=1,this.render(ht(f*g),!0).invalidate()._lock=0))}if(!this._initted){if(Zp(this,c?i:p,o,s,h))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&g!==v))return this;if(u!==this._dur)return this.render(i,s,o)}if(this._tTime=h,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=y=(T||this._ease)(p/u),this._from&&(this.ratio=y=1-y),p&&!a&&!s&&!g&&(cn(this,"onStart"),this._tTime!==h))return this;for(d=this._pt;d;)d.r(y,d.d),d=d._next;P&&P.render(i<0?i:!p&&C?-ke:P._dur*P._ease(p/this._dur),s,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(c&&Vl(this,i,s,o),cn(this,"onUpdate")),this._repeat&&g!==v&&this.vars.onRepeat&&!s&&this.parent&&cn(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(c&&!this._onUpdate&&Vl(this,i,!0,!0),(i||!u)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&zr(this,1),!s&&!(c&&!a)&&(h||a||C)&&(cn(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),n.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,o,a,l){so||an.wake(),this._ts||this.play();var u=Math.min(this._dur,(this._dp._time-this._start)*this._ts),c;return this._initted||ic(this,u),c=this._ease(u/this._dur),Nx(this,i,s,o,a,c,u,l)?this.resetTo(i,s,o,a,1):(Va(this,0),this.parent||Xp(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?ks(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,Ar&&Ar.vars.overwrite!==!0)._first||ks(this),this.parent&&o!==this.timeline.totalDuration()&&us(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=i?Tn(i):a,u=this._ptLookup,c=this._pt,h,p,d,g,f,v,C;if((!s||s==="all")&&vx(a,l))return s==="all"&&(this._pt=0),ks(this);for(h=this._op=this._op||[],s!=="all"&&(ft(s)&&(f={},Wt(s,function(y){return f[y]=1}),s=f),s=Vx(a,s)),C=a.length;C--;)if(~l.indexOf(a[C])){p=u[C],s==="all"?(h[C]=s,g=p,d={}):(d=h[C]=h[C]||{},g=s);for(f in g)v=p&&p[f],v&&((!("kill"in v.d)||v.d.kill(f)===!0)&&Fa(this,v,"_pt"),delete p[f]),d!=="all"&&(d[f]=1)}return this._initted&&!this._pt&&c&&ks(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return Fs(1,arguments)},e.delayedCall=function(i,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(i,s,o){return Fs(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,o){return Ne.killTweensOf(i,s,o)},e}(oo);Sn(Je.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Wt("staggerTo,staggerFrom,staggerFromTo",function(n){Je[n]=function(){var e=new Dt,t=Hl.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var sc=function(e,t,r){return e[t]=r},_f=function(e,t,r){return e[t](r)},Hx=function(e,t,r,i){return e[t](i.fp,r)},jx=function(e,t,r){return e.setAttribute(t,r)},oc=function(e,t){return Ke(e[t])?_f:Yu(e[t])&&e.setAttribute?jx:sc},wf=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},Gx=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},bf=function(e,t){var r=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+i,r=r._next;i+=t.c}t.set(t.t,t.p,i,t)},ac=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},Kx=function(e,t,r,i){for(var s=this._pt,o;s;)o=s._next,s.p===i&&s.modifier(e,t,r),s=o},$x=function(e){for(var t=this._pt,r,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?Fa(this,t,"_pt"):t.dep||(r=1),t=i;return!r},Wx=function(e,t,r,i){i.mSet(e,t,i.m.call(i.tween,r,i.mt),i)},yf=function(e){for(var t=e._pt,r,i,s,o;t;){for(r=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:o)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:o=t,t=r}e._pt=s},Xt=function(){function n(t,r,i,s,o,a,l,u,c){this.t=r,this.s=s,this.c=o,this.p=i,this.r=a||wf,this.d=l||this,this.set=u||sc,this.pr=c||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=Wx,this.m=r,this.mt=s,this.tween=i},n}();Wt(tc+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return ec[n]=1});dn.TweenMax=dn.TweenLite=Je;dn.TimelineLite=dn.TimelineMax=Dt;Ne=new Dt({sortChildren:!1,defaults:as,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});hn.stringFilter=cf;var fi=[],Zo={},Xx=[],vh=0,qx=0,cl=function(e){return(Zo[e]||Xx).map(function(t){return t()})},$l=function(){var e=Date.now(),t=[];e-vh>2&&(cl("matchMediaInit"),fi.forEach(function(r){var i=r.queries,s=r.conditions,o,a,l,u;for(a in i)o=gn.matchMedia(i[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,u=1);u&&(r.revert(),l&&t.push(r))}),cl("matchMediaRevert"),t.forEach(function(r){return r.onMatch(r,function(i){return r.add(null,i)})}),vh=e,cl("matchMedia"))},xf=function(){function n(t,r){this.selector=r&&jl(r),this.data=[],this._r=[],this.isReverted=!1,this.id=qx++,t&&this.add(t)}var e=n.prototype;return e.add=function(r,i,s){Ke(r)&&(s=i,i=r,r=Ke);var o=this,a=function(){var u=Ge,c=o.selector,h;return u&&u!==o&&u.data.push(o),s&&(o.selector=jl(s)),Ge=o,h=i.apply(o,arguments),Ke(h)&&o._r.push(h),Ge=u,o.selector=c,o.isReverted=!1,h};return o.last=a,r===Ke?a(o,function(l){return o.add(null,l)}):r?o[r]=a:a},e.ignore=function(r){var i=Ge;Ge=null,r(this),Ge=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof n?r.push.apply(r,i.getTweens()):i instanceof Je&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r?function(){for(var a=s.getTweens(),l=s.data.length,u;l--;)u=s.data[l],u.data==="isFlip"&&(u.revert(),u.getChildren(!0,!0,!1).forEach(function(c){return a.splice(a.indexOf(c),1)}));for(a.map(function(c){return{g:c._dur||c._delay||c._sat&&!c._sat.vars.immediateRender?c.globalTime(0):-1/0,t:c}}).sort(function(c,h){return h.g-c.g||-1/0}).forEach(function(c){return c.t.revert(r)}),l=s.data.length;l--;)u=s.data[l],u instanceof Dt?u.data!=="nested"&&(u.scrollTrigger&&u.scrollTrigger.revert(),u.kill()):!(u instanceof Je)&&u.revert&&u.revert(r);s._r.forEach(function(c){return c(r,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),i)for(var o=fi.length;o--;)fi[o].id===this.id&&fi.splice(o,1)},e.revert=function(r){this.kill(r||{})},n}(),Yx=function(){function n(t){this.contexts=[],this.scope=t}var e=n.prototype;return e.add=function(r,i,s){Zn(r)||(r={matches:r});var o=new xf(0,s||this.scope),a=o.conditions={},l,u,c;Ge&&!o.selector&&(o.selector=Ge.selector),this.contexts.push(o),i=o.add("onMatch",i),o.queries=r;for(u in r)u==="all"?c=1:(l=gn.matchMedia(r[u]),l&&(fi.indexOf(o)<0&&fi.push(o),(a[u]=l.matches)&&(c=1),l.addListener?l.addListener($l):l.addEventListener("change",$l)));return c&&i(o,function(h){return o.add(null,h)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},n}(),ga={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(i){return af(i)})},timeline:function(e){return new Dt(e)},getTweensOf:function(e,t){return Ne.getTweensOf(e,t)},getProperty:function(e,t,r,i){ft(e)&&(e=Tn(e)[0]);var s=hi(e||{}).get,o=r?Wp:$p;return r==="native"&&(r=""),e&&(t?o((sn[t]&&sn[t].get||s)(e,t,r,i)):function(a,l,u){return o((sn[a]&&sn[a].get||s)(e,a,l,u))})},quickSetter:function(e,t,r){if(e=Tn(e),e.length>1){var i=e.map(function(c){return Qt.quickSetter(c,t,r)}),s=i.length;return function(c){for(var h=s;h--;)i[h](c)}}e=e[0]||{};var o=sn[t],a=hi(e),l=a.harness&&(a.harness.aliases||{})[t]||t,u=o?function(c){var h=new o;Ki._pt=0,h.init(e,r?c+r:c,Ki,0,[e]),h.render(1,h),Ki._pt&&ac(1,Ki)}:a.set(e,l);return o?u:function(c){return u(e,l,r?c+r:c,a,1)}},quickTo:function(e,t,r){var i,s=Qt.to(e,xi((i={},i[t]="+=0.1",i.paused=!0,i),r||{})),o=function(l,u,c){return s.resetTo(t,l,u,c)};return o.tween=s,o},isTweening:function(e){return Ne.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=pi(e.ease,as.ease)),hh(as,e||{})},config:function(e){return hh(hn,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,i=e.plugins,s=e.defaults,o=e.extendTimeline;(i||"").split(",").forEach(function(a){return a&&!sn[a]&&!dn[a]&&no(t+" effect requires "+a+" plugin.")}),ol[t]=function(a,l,u){return r(Tn(a),Sn(l||{},s),u)},o&&(Dt.prototype[t]=function(a,l,u){return this.add(ol[t](a,Zn(l)?l:(u=l)&&{},this),u)})},registerEase:function(e,t){he[e]=pi(t)},parseEase:function(e,t){return arguments.length?pi(e,t):he},getById:function(e){return Ne.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var r=new Dt(e),i,s;for(r.smoothChildTiming=$t(e.smoothChildTiming),Ne.remove(r),r._dp=0,r._time=r._tTime=Ne._time,i=Ne._first;i;)s=i._next,(t||!(!i._dur&&i instanceof Je&&i.vars.onComplete===i._targets[0]))&&Hn(r,i,i._start-i._delay),i=s;return Hn(Ne,r,0),r},context:function(e,t){return e?new xf(e,t):Ge},matchMedia:function(e){return new Yx(e)},matchMediaRefresh:function(){return fi.forEach(function(e){var t=e.conditions,r,i;for(i in t)t[i]&&(t[i]=!1,r=1);r&&e.revert()})||$l()},addEventListener:function(e,t){var r=Zo[e]||(Zo[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=Zo[e],i=r&&r.indexOf(t);i>=0&&r.splice(i,1)},utils:{wrap:Mx,wrapYoyo:Ax,distribute:ef,random:nf,snap:tf,normalize:Ex,getUnit:xt,clamp:Tx,splitColor:lf,toArray:Tn,selector:jl,mapRange:sf,pipe:Sx,unitize:Px,interpolate:kx,shuffle:Jp},install:zp,effects:ol,ticker:an,updateRoot:Dt.updateRoot,plugins:sn,globalTimeline:Ne,core:{PropTween:Xt,globals:Hp,Tween:Je,Timeline:Dt,Animation:oo,getCache:hi,_removeLinkedListItem:Fa,reverting:function(){return Ct},context:function(e){return e&&Ge&&(Ge.data.push(e),e._ctx=Ge),Ge},suppressOverwrites:function(e){return qu=e}}};Wt("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return ga[n]=Je[n]});an.add(Dt.updateRoot);Ki=ga.to({},{duration:0});var Zx=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},Qx=function(e,t){var r=e._targets,i,s,o;for(i in t)for(s=r.length;s--;)o=e._ptLookup[s][i],o&&(o=o.d)&&(o._pt&&(o=Zx(o,i)),o&&o.modifier&&o.modifier(t[i],e,r[s],i))},hl=function(e,t){return{name:e,rawVars:1,init:function(i,s,o){o._onInit=function(a){var l,u;if(ft(s)&&(l={},Wt(s,function(c){return l[c]=1}),s=l),t){l={};for(u in s)l[u]=t(s[u]);s=l}Qx(a,s)}}}},Qt=ga.registerPlugin({name:"attr",init:function(e,t,r,i,s){var o,a,l;this.tween=r;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],i,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var r=t._pt;r;)Ct?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},hl("roundProps",Gl),hl("modifiers"),hl("snap",tf))||ga;Je.version=Dt.version=Qt.version="3.12.4";Vp=1;Zu()&&cs();he.Power0;he.Power1;he.Power2;he.Power3;he.Power4;he.Linear;he.Quad;he.Cubic;he.Quart;he.Quint;he.Strong;he.Elastic;he.Back;he.SteppedEase;he.Bounce;he.Sine;he.Expo;he.Circ;/*!
 * CSSPlugin 3.12.4
 * https://gsap.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var gh,kr,Qi,lc,si,_h,uc,Jx=function(){return typeof window<"u"},mr={},ni=180/Math.PI,Ji=Math.PI/180,Ui=Math.atan2,wh=1e8,cc=/([A-Z])/g,e1=/(left|right|width|margin|padding|x)/i,t1=/[\s,\(]\S/,Kn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Wl=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},n1=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},r1=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},i1=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},Tf=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Cf=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},s1=function(e,t,r){return e.style[t]=r},o1=function(e,t,r){return e.style.setProperty(t,r)},a1=function(e,t,r){return e._gsap[t]=r},l1=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},u1=function(e,t,r,i,s){var o=e._gsap;o.scaleX=o.scaleY=r,o.renderTransform(s,o)},c1=function(e,t,r,i,s){var o=e._gsap;o[t]=r,o.renderTransform(s,o)},Ve="transform",qt=Ve+"Origin",h1=function n(e,t){var r=this,i=this.target,s=i.style,o=i._gsap;if(e in mr&&s){if(this.tfm=this.tfm||{},e!=="transform")e=Kn[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return r.tfm[a]=sr(i,a)}):this.tfm[e]=o.x?o[e]:sr(i,e),e===qt&&(this.tfm.zOrigin=o.zOrigin);else return Kn.transform.split(",").forEach(function(a){return n.call(r,a,t)});if(this.props.indexOf(Ve)>=0)return;o.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(qt,t,"")),e=Ve}(s||t)&&this.props.push(e,t,s[e])},Sf=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},d1=function(){var e=this.props,t=this.target,r=t.style,i=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(cc,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=uc(),(!s||!s.isStart)&&!r[Ve]&&(Sf(r),i.zOrigin&&r[qt]&&(r[qt]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},Pf=function(e,t){var r={target:e,props:[],revert:d1,save:h1};return e._gsap||Qt.core.getCache(e),t&&t.split(",").forEach(function(i){return r.save(i)}),r},Ef,Xl=function(e,t){var r=kr.createElementNS?kr.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):kr.createElement(e);return r&&r.style?r:kr.createElement(e)},Wn=function n(e,t,r){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(cc,"-$1").toLowerCase())||i.getPropertyValue(t)||!r&&n(e,hs(t)||t,1)||""},bh="O,Moz,ms,Ms,Webkit".split(","),hs=function(e,t,r){var i=t||si,s=i.style,o=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(bh[o]+e in s););return o<0?null:(o===3?"ms":o>=0?bh[o]:"")+e},ql=function(){Jx()&&window.document&&(gh=window,kr=gh.document,Qi=kr.documentElement,si=Xl("div")||{style:{}},Xl("div"),Ve=hs(Ve),qt=Ve+"Origin",si.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Ef=!!hs("perspective"),uc=Qt.core.reverting,lc=1)},dl=function n(e){var t=Xl("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,i=this.nextSibling,s=this.style.cssText,o;if(Qi.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return r&&(i?r.insertBefore(this,i):r.appendChild(this)),Qi.removeChild(t),this.style.cssText=s,o},yh=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},Mf=function(e){var t;try{t=e.getBBox()}catch{t=dl.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===dl||(t=dl.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+yh(e,["x","cx","x1"])||0,y:+yh(e,["y","cy","y1"])||0,width:0,height:0}:t},Af=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Mf(e))},Ti=function(e,t){if(t){var r=e.style,i;t in mr&&t!==qt&&(t=Ve),r.removeProperty?(i=t.substr(0,2),(i==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),r.removeProperty(i==="--"?t:t.replace(cc,"-$1").toLowerCase())):r.removeAttribute(t)}},Rr=function(e,t,r,i,s,o){var a=new Xt(e._pt,t,r,0,1,o?Cf:Tf);return e._pt=a,a.b=i,a.e=s,e._props.push(r),a},xh={deg:1,rad:1,turn:1},p1={grid:1,flex:1},Hr=function n(e,t,r,i){var s=parseFloat(r)||0,o=(r+"").trim().substr((s+"").length)||"px",a=si.style,l=e1.test(t),u=e.tagName.toLowerCase()==="svg",c=(u?"client":"offset")+(l?"Width":"Height"),h=100,p=i==="px",d=i==="%",g,f,v,C;if(i===o||!s||xh[i]||xh[o])return s;if(o!=="px"&&!p&&(s=n(e,t,r,"px")),C=e.getCTM&&Af(e),(d||o==="%")&&(mr[t]||~t.indexOf("adius")))return g=C?e.getBBox()[l?"width":"height"]:e[c],Xe(d?s/g*h:s/100*g);if(a[l?"width":"height"]=h+(p?o:i),f=~t.indexOf("adius")||i==="em"&&e.appendChild&&!u?e:e.parentNode,C&&(f=(e.ownerSVGElement||{}).parentNode),(!f||f===kr||!f.appendChild)&&(f=kr.body),v=f._gsap,v&&d&&v.width&&l&&v.time===an.time&&!v.uncache)return Xe(s/v.width*h);if(d&&(t==="height"||t==="width")){var y=e.style[t];e.style[t]=h+i,g=e[c],y?e.style[t]=y:Ti(e,t)}else(d||o==="%")&&!p1[Wn(f,"display")]&&(a.position=Wn(e,"position")),f===e&&(a.position="static"),f.appendChild(si),g=si[c],f.removeChild(si),a.position="absolute";return l&&d&&(v=hi(f),v.time=an.time,v.width=f[c]),Xe(p?g*s/h:g&&s?h/g*s:0)},sr=function(e,t,r,i){var s;return lc||ql(),t in Kn&&t!=="transform"&&(t=Kn[t],~t.indexOf(",")&&(t=t.split(",")[0])),mr[t]&&t!=="transform"?(s=lo(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:wa(Wn(e,qt))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=_a[t]&&_a[t](e,t,r)||Wn(e,t)||Gp(e,t)||(t==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?Hr(e,t,s,r)+r:s},f1=function(e,t,r,i){if(!r||r==="none"){var s=hs(t,e,1),o=s&&Wn(e,s,1);o&&o!==r?(t=s,r=o):t==="borderColor"&&(r=Wn(e,"borderTopColor"))}var a=new Xt(this._pt,e.style,t,0,1,bf),l=0,u=0,c,h,p,d,g,f,v,C,y,P,T,L;if(a.b=r,a.e=i,r+="",i+="",i==="auto"&&(f=e.style[t],e.style[t]=i,i=Wn(e,t)||i,f?e.style[t]=f:Ti(e,t)),c=[r,i],cf(c),r=c[0],i=c[1],p=r.match(Gi)||[],L=i.match(Gi)||[],L.length){for(;h=Gi.exec(i);)v=h[0],y=i.substring(l,h.index),g?g=(g+1)%5:(y.substr(-5)==="rgba("||y.substr(-5)==="hsla(")&&(g=1),v!==(f=p[u++]||"")&&(d=parseFloat(f)||0,T=f.substr((d+"").length),v.charAt(1)==="="&&(v=Zi(d,v)+T),C=parseFloat(v),P=v.substr((C+"").length),l=Gi.lastIndex-P.length,P||(P=P||hn.units[t]||T,l===i.length&&(i+=P,a.e+=P)),T!==P&&(d=Hr(e,t,f,P)||0),a._pt={_next:a._pt,p:y||u===1?y:",",s:d,c:C-d,m:g&&g<4||t==="zIndex"?Math.round:0});a.c=l<i.length?i.substring(l,i.length):""}else a.r=t==="display"&&i==="none"?Cf:Tf;return Fp.test(i)&&(a.e=0),this._pt=a,a},Th={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},m1=function(e){var t=e.split(" "),r=t[0],i=t[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(e=r,r=i,i=e),t[0]=Th[r]||r,t[1]=Th[i]||i,t.join(" ")},v1=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r=t.t,i=r.style,s=t.u,o=r._gsap,a,l,u;if(s==="all"||s===!0)i.cssText="",l=1;else for(s=s.split(","),u=s.length;--u>-1;)a=s[u],mr[a]&&(l=1,a=a==="transformOrigin"?qt:Ve),Ti(r,a);l&&(Ti(r,Ve),o&&(o.svg&&r.removeAttribute("transform"),lo(r,1),o.uncache=1,Sf(i)))}},_a={clearProps:function(e,t,r,i,s){if(s.data!=="isFromStart"){var o=e._pt=new Xt(e._pt,t,r,0,0,v1);return o.u=i,o.pr=-10,o.tween=s,e._props.push(r),1}}},ao=[1,0,0,1,0,0],kf={},Rf=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Ch=function(e){var t=Wn(e,Ve);return Rf(t)?ao:t.substr(7).match(Up).map(Xe)},hc=function(e,t){var r=e._gsap||hi(e),i=e.style,s=Ch(e),o,a,l,u;return r.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?ao:s):(s===ao&&!e.offsetParent&&e!==Qi&&!r.svg&&(l=i.display,i.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(u=1,a=e.nextElementSibling,Qi.appendChild(e)),s=Ch(e),l?i.display=l:Ti(e,"display"),u&&(a?o.insertBefore(e,a):o?o.appendChild(e):Qi.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},Yl=function(e,t,r,i,s,o){var a=e._gsap,l=s||hc(e,!0),u=a.xOrigin||0,c=a.yOrigin||0,h=a.xOffset||0,p=a.yOffset||0,d=l[0],g=l[1],f=l[2],v=l[3],C=l[4],y=l[5],P=t.split(" "),T=parseFloat(P[0])||0,L=parseFloat(P[1])||0,x,S,_,b;r?l!==ao&&(S=d*v-g*f)&&(_=T*(v/S)+L*(-f/S)+(f*y-v*C)/S,b=T*(-g/S)+L*(d/S)-(d*y-g*C)/S,T=_,L=b):(x=Mf(e),T=x.x+(~P[0].indexOf("%")?T/100*x.width:T),L=x.y+(~(P[1]||P[0]).indexOf("%")?L/100*x.height:L)),i||i!==!1&&a.smooth?(C=T-u,y=L-c,a.xOffset=h+(C*d+y*f)-C,a.yOffset=p+(C*g+y*v)-y):a.xOffset=a.yOffset=0,a.xOrigin=T,a.yOrigin=L,a.smooth=!!i,a.origin=t,a.originIsAbsolute=!!r,e.style[qt]="0px 0px",o&&(Rr(o,a,"xOrigin",u,T),Rr(o,a,"yOrigin",c,L),Rr(o,a,"xOffset",h,a.xOffset),Rr(o,a,"yOffset",p,a.yOffset)),e.setAttribute("data-svg-origin",T+" "+L)},lo=function(e,t){var r=e._gsap||new ff(e);if("x"in r&&!t&&!r.uncache)return r;var i=e.style,s=r.scaleX<0,o="px",a="deg",l=getComputedStyle(e),u=Wn(e,qt)||"0",c,h,p,d,g,f,v,C,y,P,T,L,x,S,_,b,m,M,A,V,B,z,U,H,K,X,R,ie,qe,Ye,J,Ce;return c=h=p=f=v=C=y=P=T=0,d=g=1,r.svg=!!(e.getCTM&&Af(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[Ve]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[Ve]!=="none"?l[Ve]:"")),i.scale=i.rotate=i.translate="none"),S=hc(e,r.svg),r.svg&&(r.uncache?(K=e.getBBox(),u=r.xOrigin-K.x+"px "+(r.yOrigin-K.y)+"px",H=""):H=!t&&e.getAttribute("data-svg-origin"),Yl(e,H||u,!!H||r.originIsAbsolute,r.smooth!==!1,S)),L=r.xOrigin||0,x=r.yOrigin||0,S!==ao&&(M=S[0],A=S[1],V=S[2],B=S[3],c=z=S[4],h=U=S[5],S.length===6?(d=Math.sqrt(M*M+A*A),g=Math.sqrt(B*B+V*V),f=M||A?Ui(A,M)*ni:0,y=V||B?Ui(V,B)*ni+f:0,y&&(g*=Math.abs(Math.cos(y*Ji))),r.svg&&(c-=L-(L*M+x*V),h-=x-(L*A+x*B))):(Ce=S[6],Ye=S[7],R=S[8],ie=S[9],qe=S[10],J=S[11],c=S[12],h=S[13],p=S[14],_=Ui(Ce,qe),v=_*ni,_&&(b=Math.cos(-_),m=Math.sin(-_),H=z*b+R*m,K=U*b+ie*m,X=Ce*b+qe*m,R=z*-m+R*b,ie=U*-m+ie*b,qe=Ce*-m+qe*b,J=Ye*-m+J*b,z=H,U=K,Ce=X),_=Ui(-V,qe),C=_*ni,_&&(b=Math.cos(-_),m=Math.sin(-_),H=M*b-R*m,K=A*b-ie*m,X=V*b-qe*m,J=B*m+J*b,M=H,A=K,V=X),_=Ui(A,M),f=_*ni,_&&(b=Math.cos(_),m=Math.sin(_),H=M*b+A*m,K=z*b+U*m,A=A*b-M*m,U=U*b-z*m,M=H,z=K),v&&Math.abs(v)+Math.abs(f)>359.9&&(v=f=0,C=180-C),d=Xe(Math.sqrt(M*M+A*A+V*V)),g=Xe(Math.sqrt(U*U+Ce*Ce)),_=Ui(z,U),y=Math.abs(_)>2e-4?_*ni:0,T=J?1/(J<0?-J:J):0),r.svg&&(H=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!Rf(Wn(e,Ve)),H&&e.setAttribute("transform",H))),Math.abs(y)>90&&Math.abs(y)<270&&(s?(d*=-1,y+=f<=0?180:-180,f+=f<=0?180:-180):(g*=-1,y+=y<=0?180:-180)),t=t||r.uncache,r.x=c-((r.xPercent=c&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-c)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+o,r.y=h-((r.yPercent=h&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+o,r.z=p+o,r.scaleX=Xe(d),r.scaleY=Xe(g),r.rotation=Xe(f)+a,r.rotationX=Xe(v)+a,r.rotationY=Xe(C)+a,r.skewX=y+a,r.skewY=P+a,r.transformPerspective=T+o,(r.zOrigin=parseFloat(u.split(" ")[2])||!t&&r.zOrigin||0)&&(i[qt]=wa(u)),r.xOffset=r.yOffset=0,r.force3D=hn.force3D,r.renderTransform=r.svg?_1:Ef?Lf:g1,r.uncache=0,r},wa=function(e){return(e=e.split(" "))[0]+" "+e[1]},pl=function(e,t,r){var i=xt(t);return Xe(parseFloat(t)+parseFloat(Hr(e,"x",r+"px",i)))+i},g1=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Lf(e,t)},ei="0deg",Ss="0px",ti=") ",Lf=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.z,u=r.rotation,c=r.rotationY,h=r.rotationX,p=r.skewX,d=r.skewY,g=r.scaleX,f=r.scaleY,v=r.transformPerspective,C=r.force3D,y=r.target,P=r.zOrigin,T="",L=C==="auto"&&e&&e!==1||C===!0;if(P&&(h!==ei||c!==ei)){var x=parseFloat(c)*Ji,S=Math.sin(x),_=Math.cos(x),b;x=parseFloat(h)*Ji,b=Math.cos(x),o=pl(y,o,S*b*-P),a=pl(y,a,-Math.sin(x)*-P),l=pl(y,l,_*b*-P+P)}v!==Ss&&(T+="perspective("+v+ti),(i||s)&&(T+="translate("+i+"%, "+s+"%) "),(L||o!==Ss||a!==Ss||l!==Ss)&&(T+=l!==Ss||L?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+ti),u!==ei&&(T+="rotate("+u+ti),c!==ei&&(T+="rotateY("+c+ti),h!==ei&&(T+="rotateX("+h+ti),(p!==ei||d!==ei)&&(T+="skew("+p+", "+d+ti),(g!==1||f!==1)&&(T+="scale("+g+", "+f+ti),y.style[Ve]=T||"translate(0, 0)"},_1=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.rotation,u=r.skewX,c=r.skewY,h=r.scaleX,p=r.scaleY,d=r.target,g=r.xOrigin,f=r.yOrigin,v=r.xOffset,C=r.yOffset,y=r.forceCSS,P=parseFloat(o),T=parseFloat(a),L,x,S,_,b;l=parseFloat(l),u=parseFloat(u),c=parseFloat(c),c&&(c=parseFloat(c),u+=c,l+=c),l||u?(l*=Ji,u*=Ji,L=Math.cos(l)*h,x=Math.sin(l)*h,S=Math.sin(l-u)*-p,_=Math.cos(l-u)*p,u&&(c*=Ji,b=Math.tan(u-c),b=Math.sqrt(1+b*b),S*=b,_*=b,c&&(b=Math.tan(c),b=Math.sqrt(1+b*b),L*=b,x*=b)),L=Xe(L),x=Xe(x),S=Xe(S),_=Xe(_)):(L=h,_=p,x=S=0),(P&&!~(o+"").indexOf("px")||T&&!~(a+"").indexOf("px"))&&(P=Hr(d,"x",o,"px"),T=Hr(d,"y",a,"px")),(g||f||v||C)&&(P=Xe(P+g-(g*L+f*S)+v),T=Xe(T+f-(g*x+f*_)+C)),(i||s)&&(b=d.getBBox(),P=Xe(P+i/100*b.width),T=Xe(T+s/100*b.height)),b="matrix("+L+","+x+","+S+","+_+","+P+","+T+")",d.setAttribute("transform",b),y&&(d.style[Ve]=b)},w1=function(e,t,r,i,s){var o=360,a=ft(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?ni:1),u=l-i,c=i+u+"deg",h,p;return a&&(h=s.split("_")[1],h==="short"&&(u%=o,u!==u%(o/2)&&(u+=u<0?o:-o)),h==="cw"&&u<0?u=(u+o*wh)%o-~~(u/o)*o:h==="ccw"&&u>0&&(u=(u-o*wh)%o-~~(u/o)*o)),e._pt=p=new Xt(e._pt,t,r,i,u,n1),p.e=c,p.u="deg",e._props.push(r),p},Sh=function(e,t){for(var r in t)e[r]=t[r];return e},b1=function(e,t,r){var i=Sh({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=r.style,a,l,u,c,h,p,d,g;i.svg?(u=r.getAttribute("transform"),r.setAttribute("transform",""),o[Ve]=t,a=lo(r,1),Ti(r,Ve),r.setAttribute("transform",u)):(u=getComputedStyle(r)[Ve],o[Ve]=t,a=lo(r,1),o[Ve]=u);for(l in mr)u=i[l],c=a[l],u!==c&&s.indexOf(l)<0&&(d=xt(u),g=xt(c),h=d!==g?Hr(r,l,u,g):parseFloat(u),p=parseFloat(c),e._pt=new Xt(e._pt,a,l,h,p-h,Wl),e._pt.u=g||0,e._props.push(l));Sh(a,i)};Wt("padding,margin,Width,Radius",function(n,e){var t="Top",r="Right",i="Bottom",s="Left",o=(e<3?[t,r,i,s]:[t+s,t+r,i+r,i+s]).map(function(a){return e<2?n+a:"border"+a+n});_a[e>1?"border"+n:n]=function(a,l,u,c,h){var p,d;if(arguments.length<4)return p=o.map(function(g){return sr(a,g,u)}),d=p.join(" "),d.split(p[0]).length===5?p[0]:d;p=(c+"").split(" "),d={},o.forEach(function(g,f){return d[g]=p[f]=p[f]||p[(f-1)/2|0]}),a.init(l,d,h)}});var Of={name:"css",register:ql,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,i,s){var o=this._props,a=e.style,l=r.vars.startAt,u,c,h,p,d,g,f,v,C,y,P,T,L,x,S,_;lc||ql(),this.styles=this.styles||Pf(e),_=this.styles.props,this.tween=r;for(f in t)if(f!=="autoRound"&&(c=t[f],!(sn[f]&&mf(f,t,r,i,e,s)))){if(d=typeof c,g=_a[f],d==="function"&&(c=c.call(r,i,e,s),d=typeof c),d==="string"&&~c.indexOf("random(")&&(c=io(c)),g)g(this,e,f,c,r)&&(S=1);else if(f.substr(0,2)==="--")u=(getComputedStyle(e).getPropertyValue(f)+"").trim(),c+="",Ur.lastIndex=0,Ur.test(u)||(v=xt(u),C=xt(c)),C?v!==C&&(u=Hr(e,f,u,C)+C):v&&(c+=v),this.add(a,"setProperty",u,c,i,s,0,0,f),o.push(f),_.push(f,0,a[f]);else if(d!=="undefined"){if(l&&f in l?(u=typeof l[f]=="function"?l[f].call(r,i,e,s):l[f],ft(u)&&~u.indexOf("random(")&&(u=io(u)),xt(u+"")||u==="auto"||(u+=hn.units[f]||xt(sr(e,f))||""),(u+"").charAt(1)==="="&&(u=sr(e,f))):u=sr(e,f),p=parseFloat(u),y=d==="string"&&c.charAt(1)==="="&&c.substr(0,2),y&&(c=c.substr(2)),h=parseFloat(c),f in Kn&&(f==="autoAlpha"&&(p===1&&sr(e,"visibility")==="hidden"&&h&&(p=0),_.push("visibility",0,a.visibility),Rr(this,a,"visibility",p?"inherit":"hidden",h?"inherit":"hidden",!h)),f!=="scale"&&f!=="transform"&&(f=Kn[f],~f.indexOf(",")&&(f=f.split(",")[0]))),P=f in mr,P){if(this.styles.save(f),T||(L=e._gsap,L.renderTransform&&!t.parseTransform||lo(e,t.parseTransform),x=t.smoothOrigin!==!1&&L.smooth,T=this._pt=new Xt(this._pt,a,Ve,0,1,L.renderTransform,L,0,-1),T.dep=1),f==="scale")this._pt=new Xt(this._pt,L,"scaleY",L.scaleY,(y?Zi(L.scaleY,y+h):h)-L.scaleY||0,Wl),this._pt.u=0,o.push("scaleY",f),f+="X";else if(f==="transformOrigin"){_.push(qt,0,a[qt]),c=m1(c),L.svg?Yl(e,c,0,x,0,this):(C=parseFloat(c.split(" ")[2])||0,C!==L.zOrigin&&Rr(this,L,"zOrigin",L.zOrigin,C),Rr(this,a,f,wa(u),wa(c)));continue}else if(f==="svgOrigin"){Yl(e,c,1,x,0,this);continue}else if(f in kf){w1(this,L,f,p,y?Zi(p,y+c):c);continue}else if(f==="smoothOrigin"){Rr(this,L,"smooth",L.smooth,c);continue}else if(f==="force3D"){L[f]=c;continue}else if(f==="transform"){b1(this,c,e);continue}}else f in a||(f=hs(f)||f);if(P||(h||h===0)&&(p||p===0)&&!t1.test(c)&&f in a)v=(u+"").substr((p+"").length),h||(h=0),C=xt(c)||(f in hn.units?hn.units[f]:v),v!==C&&(p=Hr(e,f,u,C)),this._pt=new Xt(this._pt,P?L:a,f,p,(y?Zi(p,y+h):h)-p,!P&&(C==="px"||f==="zIndex")&&t.autoRound!==!1?i1:Wl),this._pt.u=C||0,v!==C&&C!=="%"&&(this._pt.b=u,this._pt.r=r1);else if(f in a)f1.call(this,e,f,u,y?y+c:c);else if(f in e)this.add(e,f,u||e[f],y?y+c:c,i,s);else if(f!=="parseTransform"){Ju(f,c);continue}P||(f in a?_.push(f,0,a[f]):_.push(f,1,u||e[f])),o.push(f)}}S&&yf(this)},render:function(e,t){if(t.tween._time||!uc())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:sr,aliases:Kn,getSetter:function(e,t,r){var i=Kn[t];return i&&i.indexOf(",")<0&&(t=i),t in mr&&t!==qt&&(e._gsap.x||sr(e,"x"))?r&&_h===r?t==="scale"?l1:a1:(_h=r||{})&&(t==="scale"?u1:c1):e.style&&!Yu(e.style[t])?s1:~t.indexOf("-")?o1:oc(e,t)},core:{_removeProperty:Ti,_getMatrix:hc}};Qt.utils.checkPrefix=hs;Qt.core.getStyleSaver=Pf;(function(n,e,t,r){var i=Wt(n+","+e+","+t,function(s){mr[s]=1});Wt(e,function(s){hn.units[s]="deg",kf[s]=1}),Kn[i[13]]=n+","+e,Wt(r,function(s){var o=s.split(":");Kn[o[1]]=i[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Wt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){hn.units[n]="px"});Qt.registerPlugin(Of);var tn=Qt.registerPlugin(Of)||Qt;tn.core.Tween;function y1(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function x1(n,e,t){return e&&y1(n.prototype,e),n}/*!
 * Observer 3.12.4
 * https://gsap.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var vt,Qo,ln,Lr,Or,es,Df,ri,Vs,Bf,lr,Ln,If,Uf=function(){return vt||typeof window<"u"&&(vt=window.gsap)&&vt.registerPlugin&&vt},Ff=1,$i=[],ae=[],Xn=[],zs=Date.now,Zl=function(e,t){return t},T1=function(){var e=Vs.core,t=e.bridge||{},r=e._scrollers,i=e._proxies;r.push.apply(r,ae),i.push.apply(i,Xn),ae=r,Xn=i,Zl=function(o,a){return t[o](a)}},Fr=function(e,t){return~Xn.indexOf(e)&&Xn[Xn.indexOf(e)+1][t]},Hs=function(e){return!!~Bf.indexOf(e)},At=function(e,t,r,i,s){return e.addEventListener(t,r,{passive:!i,capture:!!s})},Mt=function(e,t,r,i){return e.removeEventListener(t,r,!!i)},ko="scrollLeft",Ro="scrollTop",Ql=function(){return lr&&lr.isPressed||ae.cache++},ba=function(e,t){var r=function i(s){if(s||s===0){Ff&&(ln.history.scrollRestoration="manual");var o=lr&&lr.isPressed;s=i.v=Math.round(s)||(lr&&lr.iOS?1:0),e(s),i.cacheID=ae.cache,o&&Zl("ss",s)}else(t||ae.cache!==i.cacheID||Zl("ref"))&&(i.cacheID=ae.cache,i.v=e());return i.v+i.offset};return r.offset=0,e&&r},Bt={s:ko,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:ba(function(n){return arguments.length?ln.scrollTo(n,rt.sc()):ln.pageXOffset||Lr[ko]||Or[ko]||es[ko]||0})},rt={s:Ro,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Bt,sc:ba(function(n){return arguments.length?ln.scrollTo(Bt.sc(),n):ln.pageYOffset||Lr[Ro]||Or[Ro]||es[Ro]||0})},jt=function(e,t){return(t&&t._ctx&&t._ctx.selector||vt.utils.toArray)(e)[0]||(typeof e=="string"&&vt.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},jr=function(e,t){var r=t.s,i=t.sc;Hs(e)&&(e=Lr.scrollingElement||Or);var s=ae.indexOf(e),o=i===rt.sc?1:2;!~s&&(s=ae.push(e)-1),ae[s+o]||At(e,"scroll",Ql);var a=ae[s+o],l=a||(ae[s+o]=ba(Fr(e,r),!0)||(Hs(e)?i:ba(function(u){return arguments.length?e[r]=u:e[r]})));return l.target=e,a||(l.smooth=vt.getProperty(e,"scrollBehavior")==="smooth"),l},Jl=function(e,t,r){var i=e,s=e,o=zs(),a=o,l=t||50,u=Math.max(500,l*3),c=function(g,f){var v=zs();f||v-o>l?(s=i,i=g,a=o,o=v):r?i+=g:i=s+(g-s)/(v-a)*(o-a)},h=function(){s=i=r?0:i,a=o=0},p=function(g){var f=a,v=s,C=zs();return(g||g===0)&&g!==i&&c(g),o===a||C-a>u?0:(i+(r?v:-v))/((r?C:o)-f)*1e3};return{update:c,reset:h,getVelocity:p}},Ps=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},Ph=function(e){var t=Math.max.apply(Math,e),r=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(r)?t:r},Nf=function(){Vs=vt.core.globals().ScrollTrigger,Vs&&Vs.core&&T1()},Vf=function(e){return vt=e||Uf(),!Qo&&vt&&typeof document<"u"&&document.body&&(ln=window,Lr=document,Or=Lr.documentElement,es=Lr.body,Bf=[ln,Lr,Or,es],vt.utils.clamp,If=vt.core.context||function(){},ri="onpointerenter"in es?"pointer":"mouse",Df=et.isTouch=ln.matchMedia&&ln.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in ln||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,Ln=et.eventTypes=("ontouchstart"in Or?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in Or?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return Ff=0},500),Nf(),Qo=1),Qo};Bt.op=rt;ae.cache=0;var et=function(){function n(t){this.init(t)}var e=n.prototype;return e.init=function(r){Qo||Vf(vt)||console.warn("Please gsap.registerPlugin(Observer)"),Vs||Nf();var i=r.tolerance,s=r.dragMinimum,o=r.type,a=r.target,l=r.lineHeight,u=r.debounce,c=r.preventDefault,h=r.onStop,p=r.onStopDelay,d=r.ignore,g=r.wheelSpeed,f=r.event,v=r.onDragStart,C=r.onDragEnd,y=r.onDrag,P=r.onPress,T=r.onRelease,L=r.onRight,x=r.onLeft,S=r.onUp,_=r.onDown,b=r.onChangeX,m=r.onChangeY,M=r.onChange,A=r.onToggleX,V=r.onToggleY,B=r.onHover,z=r.onHoverEnd,U=r.onMove,H=r.ignoreCheck,K=r.isNormalizer,X=r.onGestureStart,R=r.onGestureEnd,ie=r.onWheel,qe=r.onEnable,Ye=r.onDisable,J=r.onClick,Ce=r.scrollSpeed,Re=r.capture,xe=r.allowClicks,N=r.lockAxis,w=r.onLockAxis;this.target=a=jt(a)||Or,this.vars=r,d&&(d=vt.utils.toArray(d)),i=i||1e-9,s=s||0,g=g||1,Ce=Ce||1,o=o||"wheel,touch,pointer",u=u!==!1,l||(l=parseFloat(ln.getComputedStyle(es).lineHeight)||22);var E,k,I,D,F,$,te,O=this,Se=0,Pe=0,Le=jr(a,Bt),ee=jr(a,rt),we=Le(),gt=ee(),In=~o.indexOf("touch")&&!~o.indexOf("pointer")&&Ln[0]==="pointerdown",$e=Hs(a),Be=a.ownerDocument||Lr,tt=[0,0,0],En=[0,0,0],$r=0,er=function(){return $r=zs()},Un=function(q,ve){return(O.event=q)&&d&&~d.indexOf(q.target)||ve&&In&&q.pointerType!=="touch"||H&&H(q,ve)},Nt=function(){O._vx.reset(),O._vy.reset(),k.pause(),h&&h(O)},Wr=function(){var q=O.deltaX=Ph(tt),ve=O.deltaY=Ph(En),Ze=Math.abs(q)>=i,j=Math.abs(ve)>=i;M&&(Ze||j)&&M(O,q,ve,tt,En),Ze&&(L&&O.deltaX>0&&L(O),x&&O.deltaX<0&&x(O),b&&b(O),A&&O.deltaX<0!=Se<0&&A(O),Se=O.deltaX,tt[0]=tt[1]=tt[2]=0),j&&(_&&O.deltaY>0&&_(O),S&&O.deltaY<0&&S(O),m&&m(O),V&&O.deltaY<0!=Pe<0&&V(O),Pe=O.deltaY,En[0]=En[1]=En[2]=0),(D||I)&&(U&&U(O),I&&(y(O),I=!1),D=!1),$&&!($=!1)&&w&&w(O),F&&(ie(O),F=!1),E=0},ki=function(q,ve,Ze){tt[Ze]+=q,En[Ze]+=ve,O._vx.update(q),O._vy.update(ve),u?E||(E=requestAnimationFrame(Wr)):Wr()},Ri=function(q,ve){N&&!te&&(O.axis=te=Math.abs(q)>Math.abs(ve)?"x":"y",$=!0),te!=="y"&&(tt[2]+=q,O._vx.update(q,!0)),te!=="x"&&(En[2]+=ve,O._vy.update(ve,!0)),u?E||(E=requestAnimationFrame(Wr)):Wr()},Xr=function(q){if(!Un(q,1)){q=Ps(q,c);var ve=q.clientX,Ze=q.clientY,j=ve-O.x,se=Ze-O.y,Y=O.isDragging;O.x=ve,O.y=Ze,(Y||Math.abs(O.startX-ve)>=s||Math.abs(O.startY-Ze)>=s)&&(y&&(I=!0),Y||(O.isDragging=!0),Ri(j,se),Y||v&&v(O))}},vr=O.onPress=function(Q){Un(Q,1)||Q&&Q.button||(O.axis=te=null,k.pause(),O.isPressed=!0,Q=Ps(Q),Se=Pe=0,O.startX=O.x=Q.clientX,O.startY=O.y=Q.clientY,O._vx.reset(),O._vy.reset(),At(K?a:Be,Ln[1],Xr,c,!0),O.deltaX=O.deltaY=0,P&&P(O))},gr=O.onRelease=function(Q){if(!Un(Q,1)){Mt(K?a:Be,Ln[1],Xr,!0);var q=!isNaN(O.y-O.startY),ve=O.isDragging,Ze=ve&&(Math.abs(O.x-O.startX)>3||Math.abs(O.y-O.startY)>3),j=Ps(Q);!Ze&&q&&(O._vx.reset(),O._vy.reset(),c&&xe&&vt.delayedCall(.08,function(){if(zs()-$r>300&&!Q.defaultPrevented){if(Q.target.click)Q.target.click();else if(Be.createEvent){var se=Be.createEvent("MouseEvents");se.initMouseEvent("click",!0,!0,ln,1,j.screenX,j.screenY,j.clientX,j.clientY,!1,!1,!1,!1,0,null),Q.target.dispatchEvent(se)}}})),O.isDragging=O.isGesturing=O.isPressed=!1,h&&ve&&!K&&k.restart(!0),C&&ve&&C(O),T&&T(O,Ze)}},de=function(q){return q.touches&&q.touches.length>1&&(O.isGesturing=!0)&&X(q,O.isDragging)},qr=function(){return(O.isGesturing=!1)||R(O)},Mn=function(q){if(!Un(q)){var ve=Le(),Ze=ee();ki((ve-we)*Ce,(Ze-gt)*Ce,1),we=ve,gt=Ze,h&&k.restart(!0)}},An=function(q){if(!Un(q)){q=Ps(q,c),ie&&(F=!0);var ve=(q.deltaMode===1?l:q.deltaMode===2?ln.innerHeight:1)*g;ki(q.deltaX*ve,q.deltaY*ve,0),h&&!K&&k.restart(!0)}},kn=function(q){if(!Un(q)){var ve=q.clientX,Ze=q.clientY,j=ve-O.x,se=Ze-O.y;O.x=ve,O.y=Ze,D=!0,h&&k.restart(!0),(j||se)&&Ri(j,se)}},Yr=function(q){O.event=q,B(O)},Li=function(q){O.event=q,z(O)},tr=function(q){return Un(q)||Ps(q,c)&&J(O)};k=O._dc=vt.delayedCall(p||.25,Nt).pause(),O.deltaX=O.deltaY=0,O._vx=Jl(0,50,!0),O._vy=Jl(0,50,!0),O.scrollX=Le,O.scrollY=ee,O.isDragging=O.isGesturing=O.isPressed=!1,If(this),O.enable=function(Q){return O.isEnabled||(At($e?Be:a,"scroll",Ql),o.indexOf("scroll")>=0&&At($e?Be:a,"scroll",Mn,c,Re),o.indexOf("wheel")>=0&&At(a,"wheel",An,c,Re),(o.indexOf("touch")>=0&&Df||o.indexOf("pointer")>=0)&&(At(a,Ln[0],vr,c,Re),At(Be,Ln[2],gr),At(Be,Ln[3],gr),xe&&At(a,"click",er,!1,!0),J&&At(a,"click",tr),X&&At(Be,"gesturestart",de),R&&At(Be,"gestureend",qr),B&&At(a,ri+"enter",Yr),z&&At(a,ri+"leave",Li),U&&At(a,ri+"move",kn)),O.isEnabled=!0,Q&&Q.type&&vr(Q),qe&&qe(O)),O},O.disable=function(){O.isEnabled&&($i.filter(function(Q){return Q!==O&&Hs(Q.target)}).length||Mt($e?Be:a,"scroll",Ql),O.isPressed&&(O._vx.reset(),O._vy.reset(),Mt(K?a:Be,Ln[1],Xr,!0)),Mt($e?Be:a,"scroll",Mn,Re),Mt(a,"wheel",An,Re),Mt(a,Ln[0],vr,Re),Mt(Be,Ln[2],gr),Mt(Be,Ln[3],gr),Mt(a,"click",er,!0),Mt(a,"click",tr),Mt(Be,"gesturestart",de),Mt(Be,"gestureend",qr),Mt(a,ri+"enter",Yr),Mt(a,ri+"leave",Li),Mt(a,ri+"move",kn),O.isEnabled=O.isPressed=O.isDragging=!1,Ye&&Ye(O))},O.kill=O.revert=function(){O.disable();var Q=$i.indexOf(O);Q>=0&&$i.splice(Q,1),lr===O&&(lr=0)},$i.push(O),K&&Hs(a)&&(lr=O),O.enable(f)},x1(n,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),n}();et.version="3.12.4";et.create=function(n){return new et(n)};et.register=Vf;et.getAll=function(){return $i.slice()};et.getById=function(n){return $i.filter(function(e){return e.vars.id===n})[0]};Uf()&&vt.registerPlugin(et);/*!
 * ScrollTrigger 3.12.4
 * https://gsap.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var G,Vi,ue,Fe,On,Oe,zf,ya,uo,Wi,Jo,Lo,bt,za,eu,Rt,Eh,Mh,zi,Hf,fl,jf,kt,Gf,Kf,$f,Sr,tu,dc,ts,pc,xa,nu,ml,Oo=1,Ot=Date.now,vl=Ot(),Cn=0,Ls=0,Ah=function(e,t,r){var i=rn(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return r["_"+t+"Clamp"]=i,i?e.substr(6,e.length-7):e},kh=function(e,t){return t&&(!rn(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},C1=function n(){return Ls&&requestAnimationFrame(n)},Rh=function(){return za=1},Lh=function(){return za=0},zn=function(e){return e},Os=function(e){return Math.round(e*1e5)/1e5||0},Wf=function(){return typeof window<"u"},Xf=function(){return G||Wf()&&(G=window.gsap)&&G.registerPlugin&&G},Ci=function(e){return!!~zf.indexOf(e)},qf=function(e){return(e==="Height"?pc:ue["inner"+e])||On["client"+e]||Oe["client"+e]},Yf=function(e){return Fr(e,"getBoundingClientRect")||(Ci(e)?function(){return sa.width=ue.innerWidth,sa.height=pc,sa}:function(){return or(e)})},S1=function(e,t,r){var i=r.d,s=r.d2,o=r.a;return(o=Fr(e,"getBoundingClientRect"))?function(){return o()[i]}:function(){return(t?qf(s):e["client"+s])||0}},P1=function(e,t){return!t||~Xn.indexOf(e)?Yf(e):function(){return sa}},$n=function(e,t){var r=t.s,i=t.d2,s=t.d,o=t.a;return Math.max(0,(r="scroll"+i)&&(o=Fr(e,r))?o()-Yf(e)()[s]:Ci(e)?(On[r]||Oe[r])-qf(i):e[r]-e["offset"+i])},Do=function(e,t){for(var r=0;r<zi.length;r+=3)(!t||~t.indexOf(zi[r+1]))&&e(zi[r],zi[r+1],zi[r+2])},rn=function(e){return typeof e=="string"},It=function(e){return typeof e=="function"},ea=function(e){return typeof e=="number"},ii=function(e){return typeof e=="object"},Es=function(e,t,r){return e&&e.progress(t?0:1)&&r&&e.pause()},gl=function(e,t){if(e.enabled){var r=e._ctx?e._ctx.add(function(){return t(e)}):t(e);r&&r.totalTime&&(e.callbackAnimation=r)}},Fi=Math.abs,Zf="left",Qf="top",fc="right",mc="bottom",mi="width",vi="height",js="Right",Gs="Left",Ks="Top",$s="Bottom",Qe="padding",wn="margin",ds="Width",vc="Height",at="px",bn=function(e){return ue.getComputedStyle(e)},E1=function(e){var t=bn(e).position;e.style.position=t==="absolute"||t==="fixed"?t:"relative"},Oh=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},or=function(e,t){var r=t&&bn(e)[eu]!=="matrix(1, 0, 0, 1, 0, 0)"&&G.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),i=e.getBoundingClientRect();return r&&r.progress(0).kill(),i},ru=function(e,t){var r=t.d2;return e["offset"+r]||e["client"+r]||0},Jf=function(e){var t=[],r=e.labels,i=e.duration(),s;for(s in r)t.push(r[s]/i);return t},M1=function(e){return function(t){return G.utils.snap(Jf(e),t)}},gc=function(e){var t=G.utils.snap(e),r=Array.isArray(e)&&e.slice(0).sort(function(i,s){return i-s});return r?function(i,s,o){o===void 0&&(o=.001);var a;if(!s)return t(i);if(s>0){for(i-=o,a=0;a<r.length;a++)if(r[a]>=i)return r[a];return r[a-1]}else for(a=r.length,i+=o;a--;)if(r[a]<=i)return r[a];return r[0]}:function(i,s,o){o===void 0&&(o=.001);var a=t(i);return!s||Math.abs(a-i)<o||a-i<0==s<0?a:t(s<0?i-e:i+e)}},A1=function(e){return function(t,r){return gc(Jf(e))(t,r.direction)}},Bo=function(e,t,r,i){return r.split(",").forEach(function(s){return e(t,s,i)})},ut=function(e,t,r,i,s){return e.addEventListener(t,r,{passive:!i,capture:!!s})},lt=function(e,t,r,i){return e.removeEventListener(t,r,!!i)},Io=function(e,t,r){r=r&&r.wheelHandler,r&&(e(t,"wheel",r),e(t,"touchmove",r))},Dh={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},Uo={toggleActions:"play",anticipatePin:0},Ta={top:0,left:0,center:.5,bottom:1,right:1},ta=function(e,t){if(rn(e)){var r=e.indexOf("="),i=~r?+(e.charAt(r-1)+1)*parseFloat(e.substr(r+1)):0;~r&&(e.indexOf("%")>r&&(i*=t/100),e=e.substr(0,r-1)),e=i+(e in Ta?Ta[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},Fo=function(e,t,r,i,s,o,a,l){var u=s.startColor,c=s.endColor,h=s.fontSize,p=s.indent,d=s.fontWeight,g=Fe.createElement("div"),f=Ci(r)||Fr(r,"pinType")==="fixed",v=e.indexOf("scroller")!==-1,C=f?Oe:r,y=e.indexOf("start")!==-1,P=y?u:c,T="border-color:"+P+";font-size:"+h+";color:"+P+";font-weight:"+d+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return T+="position:"+((v||l)&&f?"fixed;":"absolute;"),(v||l||!f)&&(T+=(i===rt?fc:mc)+":"+(o+parseFloat(p))+"px;"),a&&(T+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),g._isStart=y,g.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),g.style.cssText=T,g.innerText=t||t===0?e+"-"+t:e,C.children[0]?C.insertBefore(g,C.children[0]):C.appendChild(g),g._offset=g["offset"+i.op.d2],na(g,0,i,y),g},na=function(e,t,r,i){var s={display:"block"},o=r[i?"os2":"p2"],a=r[i?"p2":"os2"];e._isFlipped=i,s[r.a+"Percent"]=i?-100:0,s[r.a]=i?"1px":0,s["border"+o+ds]=1,s["border"+a+ds]=0,s[r.p]=t+"px",G.set(e,s)},ne=[],iu={},co,Bh=function(){return Ot()-Cn>34&&(co||(co=requestAnimationFrame(cr)))},Ni=function(){(!kt||!kt.isPressed||kt.startX>Oe.clientWidth)&&(ae.cache++,kt?co||(co=requestAnimationFrame(cr)):cr(),Cn||Pi("scrollStart"),Cn=Ot())},_l=function(){$f=ue.innerWidth,Kf=ue.innerHeight},Ds=function(){ae.cache++,!bt&&!jf&&!Fe.fullscreenElement&&!Fe.webkitFullscreenElement&&(!Gf||$f!==ue.innerWidth||Math.abs(ue.innerHeight-Kf)>ue.innerHeight*.25)&&ya.restart(!0)},Si={},k1=[],em=function n(){return lt(re,"scrollEnd",n)||oi(!0)},Pi=function(e){return Si[e]&&Si[e].map(function(t){return t()})||k1},nn=[],tm=function(e){for(var t=0;t<nn.length;t+=5)(!e||nn[t+4]&&nn[t+4].query===e)&&(nn[t].style.cssText=nn[t+1],nn[t].getBBox&&nn[t].setAttribute("transform",nn[t+2]||""),nn[t+3].uncache=1)},_c=function(e,t){var r;for(Rt=0;Rt<ne.length;Rt++)r=ne[Rt],r&&(!t||r._ctx===t)&&(e?r.kill(1):r.revert(!0,!0));xa=!0,t&&tm(t),t||Pi("revert")},nm=function(e,t){ae.cache++,(t||!Lt)&&ae.forEach(function(r){return It(r)&&r.cacheID++&&(r.rec=0)}),rn(e)&&(ue.history.scrollRestoration=dc=e)},Lt,gi=0,Ih,R1=function(){if(Ih!==gi){var e=Ih=gi;requestAnimationFrame(function(){return e===gi&&oi(!0)})}},rm=function(){Oe.appendChild(ts),pc=!kt&&ts.offsetHeight||ue.innerHeight,Oe.removeChild(ts)},Uh=function(e){return uo(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},oi=function(e,t){if(Cn&&!e&&!xa){ut(re,"scrollEnd",em);return}rm(),Lt=re.isRefreshing=!0,ae.forEach(function(i){return It(i)&&++i.cacheID&&(i.rec=i())});var r=Pi("refreshInit");Hf&&re.sort(),t||_c(),ae.forEach(function(i){It(i)&&(i.smooth&&(i.target.style.scrollBehavior="auto"),i(0))}),ne.slice(0).forEach(function(i){return i.refresh()}),xa=!1,ne.forEach(function(i){if(i._subPinOffset&&i.pin){var s=i.vars.horizontal?"offsetWidth":"offsetHeight",o=i.pin[s];i.revert(!0,1),i.adjustPinSpacing(i.pin[s]-o),i.refresh()}}),nu=1,Uh(!0),ne.forEach(function(i){var s=$n(i.scroller,i._dir),o=i.vars.end==="max"||i._endClamp&&i.end>s,a=i._startClamp&&i.start>=s;(o||a)&&i.setPositions(a?s-1:i.start,o?Math.max(a?s:i.start+1,s):i.end,!0)}),Uh(!1),nu=0,r.forEach(function(i){return i&&i.render&&i.render(-1)}),ae.forEach(function(i){It(i)&&(i.smooth&&requestAnimationFrame(function(){return i.target.style.scrollBehavior="smooth"}),i.rec&&i(i.rec))}),nm(dc,1),ya.pause(),gi++,Lt=2,cr(2),ne.forEach(function(i){return It(i.vars.onRefresh)&&i.vars.onRefresh(i)}),Lt=re.isRefreshing=!1,Pi("refresh")},su=0,ra=1,Ws,cr=function(e){if(e===2||!Lt&&!xa){re.isUpdating=!0,Ws&&Ws.update(0);var t=ne.length,r=Ot(),i=r-vl>=50,s=t&&ne[0].scroll();if(ra=su>s?-1:1,Lt||(su=s),i&&(Cn&&!za&&r-Cn>200&&(Cn=0,Pi("scrollEnd")),Jo=vl,vl=r),ra<0){for(Rt=t;Rt-- >0;)ne[Rt]&&ne[Rt].update(0,i);ra=1}else for(Rt=0;Rt<t;Rt++)ne[Rt]&&ne[Rt].update(0,i);re.isUpdating=!1}co=0},ou=[Zf,Qf,mc,fc,wn+$s,wn+js,wn+Ks,wn+Gs,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],ia=ou.concat([mi,vi,"boxSizing","max"+ds,"max"+vc,"position",wn,Qe,Qe+Ks,Qe+js,Qe+$s,Qe+Gs]),L1=function(e,t,r){ns(r);var i=e._gsap;if(i.spacerIsNative)ns(i.spacerState);else if(e._gsap.swappedIn){var s=t.parentNode;s&&(s.insertBefore(e,t),s.removeChild(t))}e._gsap.swappedIn=!1},wl=function(e,t,r,i){if(!e._gsap.swappedIn){for(var s=ou.length,o=t.style,a=e.style,l;s--;)l=ou[s],o[l]=r[l];o.position=r.position==="absolute"?"absolute":"relative",r.display==="inline"&&(o.display="inline-block"),a[mc]=a[fc]="auto",o.flexBasis=r.flexBasis||"auto",o.overflow="visible",o.boxSizing="border-box",o[mi]=ru(e,Bt)+at,o[vi]=ru(e,rt)+at,o[Qe]=a[wn]=a[Qf]=a[Zf]="0",ns(i),a[mi]=a["max"+ds]=r[mi],a[vi]=a["max"+vc]=r[vi],a[Qe]=r[Qe],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},O1=/([A-Z])/g,ns=function(e){if(e){var t=e.t.style,r=e.length,i=0,s,o;for((e.t._gsap||G.core.getCache(e.t)).uncache=1;i<r;i+=2)o=e[i+1],s=e[i],o?t[s]=o:t[s]&&t.removeProperty(s.replace(O1,"-$1").toLowerCase())}},No=function(e){for(var t=ia.length,r=e.style,i=[],s=0;s<t;s++)i.push(ia[s],r[ia[s]]);return i.t=e,i},D1=function(e,t,r){for(var i=[],s=e.length,o=r?8:0,a;o<s;o+=2)a=e[o],i.push(a,a in t?t[a]:e[o+1]);return i.t=e.t,i},sa={left:0,top:0},Fh=function(e,t,r,i,s,o,a,l,u,c,h,p,d,g){It(e)&&(e=e(l)),rn(e)&&e.substr(0,3)==="max"&&(e=p+(e.charAt(4)==="="?ta("0"+e.substr(3),r):0));var f=d?d.time():0,v,C,y;if(d&&d.seek(0),isNaN(e)||(e=+e),ea(e))d&&(e=G.utils.mapRange(d.scrollTrigger.start,d.scrollTrigger.end,0,p,e)),a&&na(a,r,i,!0);else{It(t)&&(t=t(l));var P=(e||"0").split(" "),T,L,x,S;y=jt(t,l)||Oe,T=or(y)||{},(!T||!T.left&&!T.top)&&bn(y).display==="none"&&(S=y.style.display,y.style.display="block",T=or(y),S?y.style.display=S:y.style.removeProperty("display")),L=ta(P[0],T[i.d]),x=ta(P[1]||"0",r),e=T[i.p]-u[i.p]-c+L+s-x,a&&na(a,x,i,r-x<20||a._isStart&&x>20),r-=r-x}if(g&&(l[g]=e||-.001,e<0&&(e=0)),o){var _=e+r,b=o._isStart;v="scroll"+i.d2,na(o,_,i,b&&_>20||!b&&(h?Math.max(Oe[v],On[v]):o.parentNode[v])<=_+1),h&&(u=or(a),h&&(o.style[i.op.p]=u[i.op.p]-i.op.m-o._offset+at))}return d&&y&&(v=or(y),d.seek(p),C=or(y),d._caScrollDist=v[i.p]-C[i.p],e=e/d._caScrollDist*p),d&&d.seek(f),d?e:Math.round(e)},B1=/(webkit|moz|length|cssText|inset)/i,Nh=function(e,t,r,i){if(e.parentNode!==t){var s=e.style,o,a;if(t===Oe){e._stOrig=s.cssText,a=bn(e);for(o in a)!+o&&!B1.test(o)&&a[o]&&typeof s[o]=="string"&&o!=="0"&&(s[o]=a[o]);s.top=r,s.left=i}else s.cssText=e._stOrig;G.core.getCache(e).uncache=1,t.appendChild(e)}},im=function(e,t,r){var i=t,s=i;return function(o){var a=Math.round(e());return a!==i&&a!==s&&Math.abs(a-i)>3&&Math.abs(a-s)>3&&(o=a,r&&r()),s=i,i=o,o}},Vo=function(e,t,r){var i={};i[t.p]="+="+r,G.set(e,i)},Vh=function(e,t){var r=jr(e,t),i="_scroll"+t.p2,s=function o(a,l,u,c,h){var p=o.tween,d=l.onComplete,g={};u=u||r();var f=im(r,u,function(){p.kill(),o.tween=0});return h=c&&h||0,c=c||a-u,p&&p.kill(),l[i]=a,l.modifiers=g,g[i]=function(){return f(u+c*p.ratio+h*p.ratio*p.ratio)},l.onUpdate=function(){ae.cache++,o.tween&&cr()},l.onComplete=function(){o.tween=0,d&&d.call(p)},p=o.tween=G.to(e,l),p};return e[i]=r,r.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},ut(e,"wheel",r.wheelHandler),re.isTouch&&ut(e,"touchmove",r.wheelHandler),s},re=function(){function n(t,r){Vi||n.register(G)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),tu(this),this.init(t,r)}var e=n.prototype;return e.init=function(r,i){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Ls){this.update=this.refresh=this.kill=zn;return}r=Oh(rn(r)||ea(r)||r.nodeType?{trigger:r}:r,Uo);var s=r,o=s.onUpdate,a=s.toggleClass,l=s.id,u=s.onToggle,c=s.onRefresh,h=s.scrub,p=s.trigger,d=s.pin,g=s.pinSpacing,f=s.invalidateOnRefresh,v=s.anticipatePin,C=s.onScrubComplete,y=s.onSnapComplete,P=s.once,T=s.snap,L=s.pinReparent,x=s.pinSpacer,S=s.containerAnimation,_=s.fastScrollEnd,b=s.preventOverlaps,m=r.horizontal||r.containerAnimation&&r.horizontal!==!1?Bt:rt,M=!h&&h!==0,A=jt(r.scroller||ue),V=G.core.getCache(A),B=Ci(A),z=("pinType"in r?r.pinType:Fr(A,"pinType")||B&&"fixed")==="fixed",U=[r.onEnter,r.onLeave,r.onEnterBack,r.onLeaveBack],H=M&&r.toggleActions.split(" "),K="markers"in r?r.markers:Uo.markers,X=B?0:parseFloat(bn(A)["border"+m.p2+ds])||0,R=this,ie=r.onRefreshInit&&function(){return r.onRefreshInit(R)},qe=S1(A,B,m),Ye=P1(A,B),J=0,Ce=0,Re=0,xe=jr(A,m),N,w,E,k,I,D,F,$,te,O,Se,Pe,Le,ee,we,gt,In,$e,Be,tt,En,$r,er,Un,Nt,Wr,ki,Ri,Xr,vr,gr,de,qr,Mn,An,kn,Yr,Li,tr;if(R._startClamp=R._endClamp=!1,R._dir=m,v*=45,R.scroller=A,R.scroll=S?S.time.bind(S):xe,k=xe(),R.vars=r,i=i||r.animation,"refreshPriority"in r&&(Hf=1,r.refreshPriority===-9999&&(Ws=R)),V.tweenScroll=V.tweenScroll||{top:Vh(A,rt),left:Vh(A,Bt)},R.tweenTo=N=V.tweenScroll[m.p],R.scrubDuration=function(j){qr=ea(j)&&j,qr?de?de.duration(j):de=G.to(i,{ease:"expo",totalProgress:"+=0",duration:qr,paused:!0,onComplete:function(){return C&&C(R)}}):(de&&de.progress(1).kill(),de=0)},i&&(i.vars.lazy=!1,i._initted&&!R.isReverted||i.vars.immediateRender!==!1&&r.immediateRender!==!1&&i.duration()&&i.render(0,!0,!0),R.animation=i.pause(),i.scrollTrigger=R,R.scrubDuration(h),vr=0,l||(l=i.vars.id)),T&&((!ii(T)||T.push)&&(T={snapTo:T}),"scrollBehavior"in Oe.style&&G.set(B?[Oe,On]:A,{scrollBehavior:"auto"}),ae.forEach(function(j){return It(j)&&j.target===(B?Fe.scrollingElement||On:A)&&(j.smooth=!1)}),E=It(T.snapTo)?T.snapTo:T.snapTo==="labels"?M1(i):T.snapTo==="labelsDirectional"?A1(i):T.directional!==!1?function(j,se){return gc(T.snapTo)(j,Ot()-Ce<500?0:se.direction)}:G.utils.snap(T.snapTo),Mn=T.duration||{min:.1,max:2},Mn=ii(Mn)?Wi(Mn.min,Mn.max):Wi(Mn,Mn),An=G.delayedCall(T.delay||qr/2||.1,function(){var j=xe(),se=Ot()-Ce<500,Y=N.tween;if((se||Math.abs(R.getVelocity())<10)&&!Y&&!za&&J!==j){var oe=(j-D)/ee,st=i&&!M?i.totalProgress():oe,pe=se?0:(st-gr)/(Ot()-Jo)*1e3||0,We=G.utils.clamp(-oe,1-oe,Fi(pe/2)*pe/.185),Et=oe+(T.inertia===!1?0:We),ot=Wi(0,1,E(Et,R)),Ie=Math.round(D+ot*ee),Me=T,Rn=Me.onStart,Ue=Me.onInterrupt,en=Me.onComplete;if(j<=F&&j>=D&&Ie!==j){if(Y&&!Y._initted&&Y.data<=Fi(Ie-j))return;T.inertia===!1&&(We=ot-oe),N(Ie,{duration:Mn(Fi(Math.max(Fi(Et-st),Fi(ot-st))*.185/pe/.05||0)),ease:T.ease||"power3",data:Fi(Ie-j),onInterrupt:function(){return An.restart(!0)&&Ue&&Ue(R)},onComplete:function(){R.update(),J=xe(),de&&i&&i.progress(ot),vr=gr=i&&!M?i.totalProgress():R.progress,y&&y(R),en&&en(R)}},j,We*ee,Ie-j-We*ee),Rn&&Rn(R,N.tween)}}else R.isActive&&J!==j&&An.restart(!0)}).pause()),l&&(iu[l]=R),p=R.trigger=jt(p||d!==!0&&d),tr=p&&p._gsap&&p._gsap.stRevert,tr&&(tr=tr(R)),d=d===!0?p:jt(d),rn(a)&&(a={targets:p,className:a}),d&&(g===!1||g===wn||(g=!g&&d.parentNode&&d.parentNode.style&&bn(d.parentNode).display==="flex"?!1:Qe),R.pin=d,w=G.core.getCache(d),w.spacer?we=w.pinState:(x&&(x=jt(x),x&&!x.nodeType&&(x=x.current||x.nativeElement),w.spacerIsNative=!!x,x&&(w.spacerState=No(x))),w.spacer=$e=x||Fe.createElement("div"),$e.classList.add("pin-spacer"),l&&$e.classList.add("pin-spacer-"+l),w.pinState=we=No(d)),r.force3D!==!1&&G.set(d,{force3D:!0}),R.spacer=$e=w.spacer,Xr=bn(d),Un=Xr[g+m.os2],tt=G.getProperty(d),En=G.quickSetter(d,m.a,at),wl(d,$e,Xr),In=No(d)),K){Pe=ii(K)?Oh(K,Dh):Dh,O=Fo("scroller-start",l,A,m,Pe,0),Se=Fo("scroller-end",l,A,m,Pe,0,O),Be=O["offset"+m.op.d2];var Q=jt(Fr(A,"content")||A);$=this.markerStart=Fo("start",l,Q,m,Pe,Be,0,S),te=this.markerEnd=Fo("end",l,Q,m,Pe,Be,0,S),S&&(Li=G.quickSetter([$,te],m.a,at)),!z&&!(Xn.length&&Fr(A,"fixedMarkers")===!0)&&(E1(B?Oe:A),G.set([O,Se],{force3D:!0}),Wr=G.quickSetter(O,m.a,at),Ri=G.quickSetter(Se,m.a,at))}if(S){var q=S.vars.onUpdate,ve=S.vars.onUpdateParams;S.eventCallback("onUpdate",function(){R.update(0,0,1),q&&q.apply(S,ve||[])})}if(R.previous=function(){return ne[ne.indexOf(R)-1]},R.next=function(){return ne[ne.indexOf(R)+1]},R.revert=function(j,se){if(!se)return R.kill(!0);var Y=j!==!1||!R.enabled,oe=bt;Y!==R.isReverted&&(Y&&(kn=Math.max(xe(),R.scroll.rec||0),Re=R.progress,Yr=i&&i.progress()),$&&[$,te,O,Se].forEach(function(st){return st.style.display=Y?"none":"block"}),Y&&(bt=R,R.update(Y)),d&&(!L||!R.isActive)&&(Y?L1(d,$e,we):wl(d,$e,bn(d),Nt)),Y||R.update(Y),bt=oe,R.isReverted=Y)},R.refresh=function(j,se,Y,oe){if(!((bt||!R.enabled)&&!se)){if(d&&j&&Cn){ut(n,"scrollEnd",em);return}!Lt&&ie&&ie(R),bt=R,N.tween&&!Y&&(N.tween.kill(),N.tween=0),de&&de.pause(),f&&i&&i.revert({kill:!1}).invalidate(),R.isReverted||R.revert(!0,!0),R._subPinOffset=!1;var st=qe(),pe=Ye(),We=S?S.duration():$n(A,m),Et=ee<=.01,ot=0,Ie=oe||0,Me=ii(Y)?Y.end:r.end,Rn=r.endTrigger||p,Ue=ii(Y)?Y.start:r.start||(r.start===0||!p?0:d?"0 0":"0 100%"),en=R.pinnedContainer=r.pinnedContainer&&jt(r.pinnedContainer,R),Fn=p&&Math.max(0,ne.indexOf(R))||0,Vt=Fn,mt,_t,Zr,To,wt,nt,Nn,Ha,wc,vs,Vn,gs,Co;for(K&&ii(Y)&&(gs=G.getProperty(O,m.p),Co=G.getProperty(Se,m.p));Vt--;)nt=ne[Vt],nt.end||nt.refresh(0,1)||(bt=R),Nn=nt.pin,Nn&&(Nn===p||Nn===d||Nn===en)&&!nt.isReverted&&(vs||(vs=[]),vs.unshift(nt),nt.revert(!0,!0)),nt!==ne[Vt]&&(Fn--,Vt--);for(It(Ue)&&(Ue=Ue(R)),Ue=Ah(Ue,"start",R),D=Fh(Ue,p,st,m,xe(),$,O,R,pe,X,z,We,S,R._startClamp&&"_startClamp")||(d?-.001:0),It(Me)&&(Me=Me(R)),rn(Me)&&!Me.indexOf("+=")&&(~Me.indexOf(" ")?Me=(rn(Ue)?Ue.split(" ")[0]:"")+Me:(ot=ta(Me.substr(2),st),Me=rn(Ue)?Ue:(S?G.utils.mapRange(0,S.duration(),S.scrollTrigger.start,S.scrollTrigger.end,D):D)+ot,Rn=p)),Me=Ah(Me,"end",R),F=Math.max(D,Fh(Me||(Rn?"100% 0":We),Rn,st,m,xe()+ot,te,Se,R,pe,X,z,We,S,R._endClamp&&"_endClamp"))||-.001,ot=0,Vt=Fn;Vt--;)nt=ne[Vt],Nn=nt.pin,Nn&&nt.start-nt._pinPush<=D&&!S&&nt.end>0&&(mt=nt.end-(R._startClamp?Math.max(0,nt.start):nt.start),(Nn===p&&nt.start-nt._pinPush<D||Nn===en)&&isNaN(Ue)&&(ot+=mt*(1-nt.progress)),Nn===d&&(Ie+=mt));if(D+=ot,F+=ot,R._startClamp&&(R._startClamp+=ot),R._endClamp&&!Lt&&(R._endClamp=F||-.001,F=Math.min(F,$n(A,m))),ee=F-D||(D-=.01)&&.001,Et&&(Re=G.utils.clamp(0,1,G.utils.normalize(D,F,kn))),R._pinPush=Ie,$&&ot&&(mt={},mt[m.a]="+="+ot,en&&(mt[m.p]="-="+xe()),G.set([$,te],mt)),d&&!(nu&&R.end>=$n(A,m)))mt=bn(d),To=m===rt,Zr=xe(),$r=parseFloat(tt(m.a))+Ie,!We&&F>1&&(Vn=(B?Fe.scrollingElement||On:A).style,Vn={style:Vn,value:Vn["overflow"+m.a.toUpperCase()]},B&&bn(Oe)["overflow"+m.a.toUpperCase()]!=="scroll"&&(Vn.style["overflow"+m.a.toUpperCase()]="scroll")),wl(d,$e,mt),In=No(d),_t=or(d,!0),Ha=z&&jr(A,To?Bt:rt)(),g&&(Nt=[g+m.os2,ee+Ie+at],Nt.t=$e,Vt=g===Qe?ru(d,m)+ee+Ie:0,Vt&&(Nt.push(m.d,Vt+at),$e.style.flexBasis!=="auto"&&($e.style.flexBasis=Vt+at)),ns(Nt),en&&ne.forEach(function(_s){_s.pin===en&&_s.vars.pinSpacing!==!1&&(_s._subPinOffset=!0)}),z&&xe(kn)),z&&(wt={top:_t.top+(To?Zr-D:Ha)+at,left:_t.left+(To?Ha:Zr-D)+at,boxSizing:"border-box",position:"fixed"},wt[mi]=wt["max"+ds]=Math.ceil(_t.width)+at,wt[vi]=wt["max"+vc]=Math.ceil(_t.height)+at,wt[wn]=wt[wn+Ks]=wt[wn+js]=wt[wn+$s]=wt[wn+Gs]="0",wt[Qe]=mt[Qe],wt[Qe+Ks]=mt[Qe+Ks],wt[Qe+js]=mt[Qe+js],wt[Qe+$s]=mt[Qe+$s],wt[Qe+Gs]=mt[Qe+Gs],gt=D1(we,wt,L),Lt&&xe(0)),i?(wc=i._initted,fl(1),i.render(i.duration(),!0,!0),er=tt(m.a)-$r+ee+Ie,ki=Math.abs(ee-er)>1,z&&ki&&gt.splice(gt.length-2,2),i.render(0,!0,!0),wc||i.invalidate(!0),i.parent||i.totalTime(i.totalTime()),fl(0)):er=ee,Vn&&(Vn.value?Vn.style["overflow"+m.a.toUpperCase()]=Vn.value:Vn.style.removeProperty("overflow-"+m.a));else if(p&&xe()&&!S)for(_t=p.parentNode;_t&&_t!==Oe;)_t._pinOffset&&(D-=_t._pinOffset,F-=_t._pinOffset),_t=_t.parentNode;vs&&vs.forEach(function(_s){return _s.revert(!1,!0)}),R.start=D,R.end=F,k=I=Lt?kn:xe(),!S&&!Lt&&(k<kn&&xe(kn),R.scroll.rec=0),R.revert(!1,!0),Ce=Ot(),An&&(J=-1,An.restart(!0)),bt=0,i&&M&&(i._initted||Yr)&&i.progress()!==Yr&&i.progress(Yr||0,!0).render(i.time(),!0,!0),(Et||Re!==R.progress||S)&&(i&&!M&&i.totalProgress(S&&D<-.001&&!Re?G.utils.normalize(D,F,0):Re,!0),R.progress=Et||(k-D)/ee===Re?0:Re),d&&g&&($e._pinOffset=Math.round(R.progress*er)),de&&de.invalidate(),isNaN(gs)||(gs-=G.getProperty(O,m.p),Co-=G.getProperty(Se,m.p),Vo(O,m,gs),Vo($,m,gs-(oe||0)),Vo(Se,m,Co),Vo(te,m,Co-(oe||0))),Et&&!Lt&&R.update(),c&&!Lt&&!Le&&(Le=!0,c(R),Le=!1)}},R.getVelocity=function(){return(xe()-I)/(Ot()-Jo)*1e3||0},R.endAnimation=function(){Es(R.callbackAnimation),i&&(de?de.progress(1):i.paused()?M||Es(i,R.direction<0,1):Es(i,i.reversed()))},R.labelToScroll=function(j){return i&&i.labels&&(D||R.refresh()||D)+i.labels[j]/i.duration()*ee||0},R.getTrailing=function(j){var se=ne.indexOf(R),Y=R.direction>0?ne.slice(0,se).reverse():ne.slice(se+1);return(rn(j)?Y.filter(function(oe){return oe.vars.preventOverlaps===j}):Y).filter(function(oe){return R.direction>0?oe.end<=D:oe.start>=F})},R.update=function(j,se,Y){if(!(S&&!Y&&!j)){var oe=Lt===!0?kn:R.scroll(),st=j?0:(oe-D)/ee,pe=st<0?0:st>1?1:st||0,We=R.progress,Et,ot,Ie,Me,Rn,Ue,en,Fn;if(se&&(I=k,k=S?xe():oe,T&&(gr=vr,vr=i&&!M?i.totalProgress():pe)),v&&!pe&&d&&!bt&&!Oo&&Cn&&D<oe+(oe-I)/(Ot()-Jo)*v&&(pe=1e-4),pe!==We&&R.enabled){if(Et=R.isActive=!!pe&&pe<1,ot=!!We&&We<1,Ue=Et!==ot,Rn=Ue||!!pe!=!!We,R.direction=pe>We?1:-1,R.progress=pe,Rn&&!bt&&(Ie=pe&&!We?0:pe===1?1:We===1?2:3,M&&(Me=!Ue&&H[Ie+1]!=="none"&&H[Ie+1]||H[Ie],Fn=i&&(Me==="complete"||Me==="reset"||Me in i))),b&&(Ue||Fn)&&(Fn||h||!i)&&(It(b)?b(R):R.getTrailing(b).forEach(function(Zr){return Zr.endAnimation()})),M||(de&&!bt&&!Oo?(de._dp._time-de._start!==de._time&&de.render(de._dp._time-de._start),de.resetTo?de.resetTo("totalProgress",pe,i._tTime/i._tDur):(de.vars.totalProgress=pe,de.invalidate().restart())):i&&i.totalProgress(pe,!!(bt&&(Ce||j)))),d){if(j&&g&&($e.style[g+m.os2]=Un),!z)En(Os($r+er*pe));else if(Rn){if(en=!j&&pe>We&&F+1>oe&&oe+1>=$n(A,m),L)if(!j&&(Et||en)){var Vt=or(d,!0),mt=oe-D;Nh(d,Oe,Vt.top+(m===rt?mt:0)+at,Vt.left+(m===rt?0:mt)+at)}else Nh(d,$e);ns(Et||en?gt:In),ki&&pe<1&&Et||En($r+(pe===1&&!en?er:0))}}T&&!N.tween&&!bt&&!Oo&&An.restart(!0),a&&(Ue||P&&pe&&(pe<1||!ml))&&uo(a.targets).forEach(function(Zr){return Zr.classList[Et||P?"add":"remove"](a.className)}),o&&!M&&!j&&o(R),Rn&&!bt?(M&&(Fn&&(Me==="complete"?i.pause().totalProgress(1):Me==="reset"?i.restart(!0).pause():Me==="restart"?i.restart(!0):i[Me]()),o&&o(R)),(Ue||!ml)&&(u&&Ue&&gl(R,u),U[Ie]&&gl(R,U[Ie]),P&&(pe===1?R.kill(!1,1):U[Ie]=0),Ue||(Ie=pe===1?1:3,U[Ie]&&gl(R,U[Ie]))),_&&!Et&&Math.abs(R.getVelocity())>(ea(_)?_:2500)&&(Es(R.callbackAnimation),de?de.progress(1):Es(i,Me==="reverse"?1:!pe,1))):M&&o&&!bt&&o(R)}if(Ri){var _t=S?oe/S.duration()*(S._caScrollDist||0):oe;Wr(_t+(O._isFlipped?1:0)),Ri(_t)}Li&&Li(-oe/S.duration()*(S._caScrollDist||0))}},R.enable=function(j,se){R.enabled||(R.enabled=!0,ut(A,"resize",Ds),B||ut(A,"scroll",Ni),ie&&ut(n,"refreshInit",ie),j!==!1&&(R.progress=Re=0,k=I=J=xe()),se!==!1&&R.refresh())},R.getTween=function(j){return j&&N?N.tween:de},R.setPositions=function(j,se,Y,oe){if(S){var st=S.scrollTrigger,pe=S.duration(),We=st.end-st.start;j=st.start+We*j/pe,se=st.start+We*se/pe}R.refresh(!1,!1,{start:kh(j,Y&&!!R._startClamp),end:kh(se,Y&&!!R._endClamp)},oe),R.update()},R.adjustPinSpacing=function(j){if(Nt&&j){var se=Nt.indexOf(m.d)+1;Nt[se]=parseFloat(Nt[se])+j+at,Nt[1]=parseFloat(Nt[1])+j+at,ns(Nt)}},R.disable=function(j,se){if(R.enabled&&(j!==!1&&R.revert(!0,!0),R.enabled=R.isActive=!1,se||de&&de.pause(),kn=0,w&&(w.uncache=1),ie&&lt(n,"refreshInit",ie),An&&(An.pause(),N.tween&&N.tween.kill()&&(N.tween=0)),!B)){for(var Y=ne.length;Y--;)if(ne[Y].scroller===A&&ne[Y]!==R)return;lt(A,"resize",Ds),B||lt(A,"scroll",Ni)}},R.kill=function(j,se){R.disable(j,se),de&&!se&&de.kill(),l&&delete iu[l];var Y=ne.indexOf(R);Y>=0&&ne.splice(Y,1),Y===Rt&&ra>0&&Rt--,Y=0,ne.forEach(function(oe){return oe.scroller===R.scroller&&(Y=1)}),Y||Lt||(R.scroll.rec=0),i&&(i.scrollTrigger=null,j&&i.revert({kill:!1}),se||i.kill()),$&&[$,te,O,Se].forEach(function(oe){return oe.parentNode&&oe.parentNode.removeChild(oe)}),Ws===R&&(Ws=0),d&&(w&&(w.uncache=1),Y=0,ne.forEach(function(oe){return oe.pin===d&&Y++}),Y||(w.spacer=0)),r.onKill&&r.onKill(R)},ne.push(R),R.enable(!1,!1),tr&&tr(R),i&&i.add&&!ee){var Ze=R.update;R.update=function(){R.update=Ze,D||F||R.refresh()},G.delayedCall(.01,R.update),ee=.01,D=F=0}else R.refresh();d&&R1()},n.register=function(r){return Vi||(G=r||Xf(),Wf()&&window.document&&n.enable(),Vi=Ls),Vi},n.defaults=function(r){if(r)for(var i in r)Uo[i]=r[i];return Uo},n.disable=function(r,i){Ls=0,ne.forEach(function(o){return o[i?"kill":"disable"](r)}),lt(ue,"wheel",Ni),lt(Fe,"scroll",Ni),clearInterval(Lo),lt(Fe,"touchcancel",zn),lt(Oe,"touchstart",zn),Bo(lt,Fe,"pointerdown,touchstart,mousedown",Rh),Bo(lt,Fe,"pointerup,touchend,mouseup",Lh),ya.kill(),Do(lt);for(var s=0;s<ae.length;s+=3)Io(lt,ae[s],ae[s+1]),Io(lt,ae[s],ae[s+2])},n.enable=function(){if(ue=window,Fe=document,On=Fe.documentElement,Oe=Fe.body,G&&(uo=G.utils.toArray,Wi=G.utils.clamp,tu=G.core.context||zn,fl=G.core.suppressOverwrites||zn,dc=ue.history.scrollRestoration||"auto",su=ue.pageYOffset,G.core.globals("ScrollTrigger",n),Oe)){Ls=1,ts=document.createElement("div"),ts.style.height="100vh",ts.style.position="absolute",rm(),C1(),et.register(G),n.isTouch=et.isTouch,Sr=et.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),ut(ue,"wheel",Ni),zf=[ue,Fe,On,Oe],G.matchMedia?(n.matchMedia=function(l){var u=G.matchMedia(),c;for(c in l)u.add(c,l[c]);return u},G.addEventListener("matchMediaInit",function(){return _c()}),G.addEventListener("matchMediaRevert",function(){return tm()}),G.addEventListener("matchMedia",function(){oi(0,1),Pi("matchMedia")}),G.matchMedia("(orientation: portrait)",function(){return _l(),_l})):console.warn("Requires GSAP 3.11.0 or later"),_l(),ut(Fe,"scroll",Ni);var r=Oe.style,i=r.borderTopStyle,s=G.core.Animation.prototype,o,a;for(s.revert||Object.defineProperty(s,"revert",{value:function(){return this.time(-.01,!0)}}),r.borderTopStyle="solid",o=or(Oe),rt.m=Math.round(o.top+rt.sc())||0,Bt.m=Math.round(o.left+Bt.sc())||0,i?r.borderTopStyle=i:r.removeProperty("border-top-style"),Lo=setInterval(Bh,250),G.delayedCall(.5,function(){return Oo=0}),ut(Fe,"touchcancel",zn),ut(Oe,"touchstart",zn),Bo(ut,Fe,"pointerdown,touchstart,mousedown",Rh),Bo(ut,Fe,"pointerup,touchend,mouseup",Lh),eu=G.utils.checkPrefix("transform"),ia.push(eu),Vi=Ot(),ya=G.delayedCall(.2,oi).pause(),zi=[Fe,"visibilitychange",function(){var l=ue.innerWidth,u=ue.innerHeight;Fe.hidden?(Eh=l,Mh=u):(Eh!==l||Mh!==u)&&Ds()},Fe,"DOMContentLoaded",oi,ue,"load",oi,ue,"resize",Ds],Do(ut),ne.forEach(function(l){return l.enable(0,1)}),a=0;a<ae.length;a+=3)Io(lt,ae[a],ae[a+1]),Io(lt,ae[a],ae[a+2])}},n.config=function(r){"limitCallbacks"in r&&(ml=!!r.limitCallbacks);var i=r.syncInterval;i&&clearInterval(Lo)||(Lo=i)&&setInterval(Bh,i),"ignoreMobileResize"in r&&(Gf=n.isTouch===1&&r.ignoreMobileResize),"autoRefreshEvents"in r&&(Do(lt)||Do(ut,r.autoRefreshEvents||"none"),jf=(r.autoRefreshEvents+"").indexOf("resize")===-1)},n.scrollerProxy=function(r,i){var s=jt(r),o=ae.indexOf(s),a=Ci(s);~o&&ae.splice(o,a?6:2),i&&(a?Xn.unshift(ue,i,Oe,i,On,i):Xn.unshift(s,i))},n.clearMatchMedia=function(r){ne.forEach(function(i){return i._ctx&&i._ctx.query===r&&i._ctx.kill(!0,!0)})},n.isInViewport=function(r,i,s){var o=(rn(r)?jt(r):r).getBoundingClientRect(),a=o[s?mi:vi]*i||0;return s?o.right-a>0&&o.left+a<ue.innerWidth:o.bottom-a>0&&o.top+a<ue.innerHeight},n.positionInViewport=function(r,i,s){rn(r)&&(r=jt(r));var o=r.getBoundingClientRect(),a=o[s?mi:vi],l=i==null?a/2:i in Ta?Ta[i]*a:~i.indexOf("%")?parseFloat(i)*a/100:parseFloat(i)||0;return s?(o.left+l)/ue.innerWidth:(o.top+l)/ue.innerHeight},n.killAll=function(r){if(ne.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),r!==!0){var i=Si.killAll||[];Si={},i.forEach(function(s){return s()})}},n}();re.version="3.12.4";re.saveStyles=function(n){return n?uo(n).forEach(function(e){if(e&&e.style){var t=nn.indexOf(e);t>=0&&nn.splice(t,5),nn.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),G.core.getCache(e),tu())}}):nn};re.revert=function(n,e){return _c(!n,e)};re.create=function(n,e){return new re(n,e)};re.refresh=function(n){return n?Ds():(Vi||re.register())&&oi(!0)};re.update=function(n){return++ae.cache&&cr(n===!0?2:0)};re.clearScrollMemory=nm;re.maxScroll=function(n,e){return $n(n,e?Bt:rt)};re.getScrollFunc=function(n,e){return jr(jt(n),e?Bt:rt)};re.getById=function(n){return iu[n]};re.getAll=function(){return ne.filter(function(n){return n.vars.id!=="ScrollSmoother"})};re.isScrolling=function(){return!!Cn};re.snapDirectional=gc;re.addEventListener=function(n,e){var t=Si[n]||(Si[n]=[]);~t.indexOf(e)||t.push(e)};re.removeEventListener=function(n,e){var t=Si[n],r=t&&t.indexOf(e);r>=0&&t.splice(r,1)};re.batch=function(n,e){var t=[],r={},i=e.interval||.016,s=e.batchMax||1e9,o=function(u,c){var h=[],p=[],d=G.delayedCall(i,function(){c(h,p),h=[],p=[]}).pause();return function(g){h.length||d.restart(!0),h.push(g.trigger),p.push(g),s<=h.length&&d.progress(1)}},a;for(a in e)r[a]=a.substr(0,2)==="on"&&It(e[a])&&a!=="onRefreshInit"?o(a,e[a]):e[a];return It(s)&&(s=s(),ut(re,"refresh",function(){return s=e.batchMax()})),uo(n).forEach(function(l){var u={};for(a in r)u[a]=r[a];u.trigger=l,t.push(re.create(u))}),t};var zh=function(e,t,r,i){return t>i?e(i):t<0&&e(0),r>i?(i-t)/(r-t):r<0?t/(t-r):1},bl=function n(e,t){t===!0?e.style.removeProperty("touch-action"):e.style.touchAction=t===!0?"auto":t?"pan-"+t+(et.isTouch?" pinch-zoom":""):"none",e===On&&n(Oe,t)},zo={auto:1,scroll:1},I1=function(e){var t=e.event,r=e.target,i=e.axis,s=(t.changedTouches?t.changedTouches[0]:t).target,o=s._gsap||G.core.getCache(s),a=Ot(),l;if(!o._isScrollT||a-o._isScrollT>2e3){for(;s&&s!==Oe&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(zo[(l=bn(s)).overflowY]||zo[l.overflowX]));)s=s.parentNode;o._isScroll=s&&s!==r&&!Ci(s)&&(zo[(l=bn(s)).overflowY]||zo[l.overflowX]),o._isScrollT=a}(o._isScroll||i==="x")&&(t.stopPropagation(),t._gsapAllow=!0)},sm=function(e,t,r,i){return et.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:i=i&&I1,onPress:i,onDrag:i,onScroll:i,onEnable:function(){return r&&ut(Fe,et.eventTypes[0],jh,!1,!0)},onDisable:function(){return lt(Fe,et.eventTypes[0],jh,!0)}})},U1=/(input|label|select|textarea)/i,Hh,jh=function(e){var t=U1.test(e.target.tagName);(t||Hh)&&(e._gsapAllow=!0,Hh=t)},F1=function(e){ii(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t=e,r=t.normalizeScrollX,i=t.momentum,s=t.allowNestedScroll,o=t.onRelease,a,l,u=jt(e.target)||On,c=G.core.globals().ScrollSmoother,h=c&&c.get(),p=Sr&&(e.content&&jt(e.content)||h&&e.content!==!1&&!h.smooth()&&h.content()),d=jr(u,rt),g=jr(u,Bt),f=1,v=(et.isTouch&&ue.visualViewport?ue.visualViewport.scale*ue.visualViewport.width:ue.outerWidth)/ue.innerWidth,C=0,y=It(i)?function(){return i(a)}:function(){return i||2.8},P,T,L=sm(u,e.type,!0,s),x=function(){return T=!1},S=zn,_=zn,b=function(){l=$n(u,rt),_=Wi(Sr?1:0,l),r&&(S=Wi(0,$n(u,Bt))),P=gi},m=function(){p._gsap.y=Os(parseFloat(p._gsap.y)+d.offset)+"px",p.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(p._gsap.y)+", 0, 1)",d.offset=d.cacheID=0},M=function(){if(T){requestAnimationFrame(x);var K=Os(a.deltaY/2),X=_(d.v-K);if(p&&X!==d.v+d.offset){d.offset=X-d.v;var R=Os((parseFloat(p&&p._gsap.y)||0)-d.offset);p.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+R+", 0, 1)",p._gsap.y=R+"px",d.cacheID=ae.cache,cr()}return!0}d.offset&&m(),T=!0},A,V,B,z,U=function(){b(),A.isActive()&&A.vars.scrollY>l&&(d()>l?A.progress(1)&&d(l):A.resetTo("scrollY",l))};return p&&G.set(p,{y:"+=0"}),e.ignoreCheck=function(H){return Sr&&H.type==="touchmove"&&M()||f>1.05&&H.type!=="touchstart"||a.isGesturing||H.touches&&H.touches.length>1},e.onPress=function(){T=!1;var H=f;f=Os((ue.visualViewport&&ue.visualViewport.scale||1)/v),A.pause(),H!==f&&bl(u,f>1.01?!0:r?!1:"x"),V=g(),B=d(),b(),P=gi},e.onRelease=e.onGestureStart=function(H,K){if(d.offset&&m(),!K)z.restart(!0);else{ae.cache++;var X=y(),R,ie;r&&(R=g(),ie=R+X*.05*-H.velocityX/.227,X*=zh(g,R,ie,$n(u,Bt)),A.vars.scrollX=S(ie)),R=d(),ie=R+X*.05*-H.velocityY/.227,X*=zh(d,R,ie,$n(u,rt)),A.vars.scrollY=_(ie),A.invalidate().duration(X).play(.01),(Sr&&A.vars.scrollY>=l||R>=l-1)&&G.to({},{onUpdate:U,duration:X})}o&&o(H)},e.onWheel=function(){A._ts&&A.pause(),Ot()-C>1e3&&(P=0,C=Ot())},e.onChange=function(H,K,X,R,ie){if(gi!==P&&b(),K&&r&&g(S(R[2]===K?V+(H.startX-H.x):g()+K-R[1])),X){d.offset&&m();var qe=ie[2]===X,Ye=qe?B+H.startY-H.y:d()+X-ie[1],J=_(Ye);qe&&Ye!==J&&(B+=J-Ye),d(J)}(X||K)&&cr()},e.onEnable=function(){bl(u,r?!1:"x"),re.addEventListener("refresh",U),ut(ue,"resize",U),d.smooth&&(d.target.style.scrollBehavior="auto",d.smooth=g.smooth=!1),L.enable()},e.onDisable=function(){bl(u,!0),lt(ue,"resize",U),re.removeEventListener("refresh",U),L.kill()},e.lockAxis=e.lockAxis!==!1,a=new et(e),a.iOS=Sr,Sr&&!d()&&d(1),Sr&&G.ticker.add(zn),z=a._dc,A=G.to(a,{ease:"power4",paused:!0,scrollX:r?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:im(d,d(),function(){return A.pause()})},onUpdate:cr,onComplete:z.vars.onComplete}),a};re.sort=function(n){return ne.sort(n||function(e,t){return(e.vars.refreshPriority||0)*-1e6+e.start-(t.start+(t.vars.refreshPriority||0)*-1e6)})};re.observe=function(n){return new et(n)};re.normalizeScroll=function(n){if(typeof n>"u")return kt;if(n===!0&&kt)return kt.enable();if(n===!1){kt&&kt.kill(),kt=n;return}var e=n instanceof et?n:F1(n);return kt&&kt.target===e.target&&kt.kill(),Ci(e.target)&&(kt=e),e};re.core={_getVelocityProp:Jl,_inputObserver:sm,_scrollers:ae,_proxies:Xn,bridge:{ss:function(){Cn||Pi("scrollStart"),Cn=Ot()},ref:function(){return bt}}};Xf()&&G.registerPlugin(re);const Jt=n=>(hd("data-v-047d0db7"),n=n(),dd(),n),N1={key:0,id:"loading"},V1={class:"container-xxl px-4 py-5"},z1={class:"hero-container"},H1={class:"d-flex"},j1={class:"hero-card px-4 px-md-5 py-5 card mx-5 flex-grow-1 flex-md-grow-0"},G1=Jt(()=>W("h1",{class:"display-5 fw-bold mb-3 brand-name"},"Auto King",-1)),K1=Jt(()=>W("p",{class:"lead mb-5"},"Driven by Passion, Powered by Expertise",-1)),$1={class:"d-grid gap-2 d-md-flex justify-content-md-start"},W1={class:"container-xl h-100 px-4 py-2 py-md-4 text-center"},X1=Jt(()=>W("span",null,"[ About Us ]",-1)),q1=[X1],Y1={class:"row flex-lg-row py-md-5 mx-auto g-2 g-md-5 justify-content-center justify-content-md-start"},Z1=Jt(()=>W("div",{id:"about-us-img-container",class:"col col-12 col-sm-10 col-md-6"},[W("img",{src:ox,class:"d-block mx-lg-auto img-fluid",id:"about-us-img",alt:"about us",loading:"lazy"})],-1)),Q1={class:"col col-md-6 justify-content-start"},J1={class:"container"},eT=Jt(()=>W("h2",{class:"text-start fw-bold mb-3 mask-fill"},[W("span",null,[rr(" Unmatched Expertise,"),W("br"),rr("Unwavering Commitment ")])],-1)),tT=Jt(()=>W("p",{class:"text-start text-body-secondary fs-6 fw-light word-fill"}," AutoKing, located at 223 Bolsover St. in Cairville, offers expert car repairs with over 18 years of experience. We provide high-quality service and a convenient courtesy drop-off for all your automotive needs. ",-1)),nT={class:"d-grid d-md-flex justify-content-md-start"},rT={id:"services",class:"page-container"},iT={class:"panel"},sT={class:"container-xl h-100 px-4 py-2"},oT=fv('<h6 class="text-center fw-bold mb-3 mb-md-5 section-heading mask-fill" data-v-047d0db7><span data-v-047d0db7>[ Our Services ]</span></h6><h2 class="text-start fw-bold mb-3 mb-md-5 mask-fill" data-v-047d0db7><span data-v-047d0db7> Explore Our Services </span></h2><div class="cards-container mb-3 mb-md-5" data-v-047d0db7><div class="card" data-v-047d0db7><img src="'+mv+'" class="card-img-top" alt="maintainance" data-v-047d0db7><div class="card-body" data-v-047d0db7><h5 class="card-title" data-v-047d0db7>Car Maintainance</h5><p class="card-text" data-v-047d0db7> Our comprehensive services include oil changes, filter replacements, tire rotations, and brake inspections, ensuring your vehicle&#39;s top performance. </p></div></div><div class="card" data-v-047d0db7><img src="'+vv+'" class="card-img-top" alt="repairs" data-v-047d0db7><div class="card-body" data-v-047d0db7><h5 class="card-title" data-v-047d0db7>Mechanical Repairs</h5><p class="card-text" data-v-047d0db7> Trust us for quick, safe mechanical repairs, ranging from minor leaks to major engine component replacements, with expert diagnostics. </p></div></div><div class="card" data-v-047d0db7><img src="'+gv+'" class="card-img-top" alt="servicing" data-v-047d0db7><div class="card-body" data-v-047d0db7><h5 class="card-title" data-v-047d0db7>Car Servicing</h5><p class="card-text" data-v-047d0db7> We provide thorough car check-ups, covering all components, fluids, and systems, ensuring your vehicle&#39;s smooth, safe operation for confident driving. </p></div></div><div class="card" data-v-047d0db7><img src="'+_v+'" class="card-img-top" alt="inspection" data-v-047d0db7><div class="card-body" data-v-047d0db7><h5 class="card-title" data-v-047d0db7>Security Inspection</h5><p class="card-text" data-v-047d0db7> Our AIS conducts roadworthy inspections for light vehicles and hire cars, checking brakes, steering, suspension, tires, and lights for Australian legal compliance. </p></div></div></div>',3),aT={class:"d-grid d-md-flex justify-content-md-start mt-md-1 ms-md-1"},lT={id:"deals",style:{"background-color":"#1e5aea"},class:"page-container"},uT={class:"panel"},cT={class:"container-xl h-100 px-4 py-2"},hT=Jt(()=>W("h6",{class:"text-center fw-bold mb-3 mb-md-5 section-heading text mask-fill"},[W("span",null,"[ Special Deals ]")],-1)),dT=Jt(()=>W("h1",{class:"text-center fw-bold mb-5 mask-fill"},[W("span",null,"Deals like you never seen before")],-1)),pT={class:"d-grid gap-5 d-md-flex justify-content-center"},fT={class:"card deal shadow py-3 px-4","data-bs-theme":"light"},mT={class:"card-body"},vT=Jt(()=>W("h5",{class:"card-title text-center fw-bold display-1 mb-3"},"-10%",-1)),gT=Jt(()=>W("h6",{class:"card-subtitle text-center mb-2 fs-4 fw-semibold text-body mb-3"}," April Special ",-1)),_T=Jt(()=>W("p",{class:"card-text text-center text-body-secondary mb-4"}," 10% off for all online booking ",-1)),wT={class:"d-grid"},bT={class:"card deal shadow py-3 px-4","data-bs-theme":"light"},yT={class:"card-body"},xT=Jt(()=>W("h5",{class:"card-title text-center fw-bold display-1 mb-3"},"$159",-1)),TT=Jt(()=>W("h6",{class:"card-subtitle text-center mb-2 fs-4 fw-semibold text-body mb-3"}," Special Offer Extended ",-1)),CT=Jt(()=>W("p",{class:"card-text text-center text-body-secondary mb-4"}," Vehicle Servicing Package for only $159 ",-1)),ST={class:"d-grid"},PT=5,ET={__name:"Home",setup(n){const e=ct(),t=ct(),r=ct(),i=ct(),s=ct(),o=ct(),a=ct(!0),l=()=>{h=!0};let u=0,c=0,h=!1,p=.5;const d=()=>{if(u+=p,h){const y=100-c,P=y/PT;c=c+P,(c>=100||Math.abs(y)<.1)&&(c=100)}else c=Math.atan(u)/(Math.PI/2)*100;o.value.innerText=`${c.toFixed(0)}%`,s.value.style.backgroundSize=`${c}% 100%`,c>=70&&(p=.2),c<100?window.requestAnimationFrame(d):tn.timeline().to("#loading",{opacity:0,duration:.5,onComplete:()=>{a.value=!1}},.5)},g=y=>{const T=y.innerText.split(" ");y.innerText="",T.forEach((L,x)=>{const S=document.createElement("span");S.innerText=x>=T.length-1?L:`${L} `,S.classList.add("word"),y.appendChild(S)})},f=()=>{tn.utils.toArray(".mask-fill>span").forEach(y=>{re.create({trigger:y,start:"top 80%",end:"bottom top",onEnter:()=>{tn.fromTo(y,{backgroundSize:"0% 100%"},{backgroundSize:"100% 100%",ease:"power1.out"})},onLeaveBack:()=>{tn.fromTo(y,{backgroundSize:"100% 100%"},{backgroundSize:"0% 100%",ease:"power1.out"})}})})},v=()=>{document.querySelectorAll(".word-fill").forEach(y=>{g(y),tn.timeline({scrollTrigger:{trigger:y,start:"top 80%",end:"top 60%",scrub:1}}).fromTo(y.querySelectorAll(".word"),{opacity:0},{opacity:1,ease:"power1.out",stagger:.05,overwrite:!0})})};let C;return dv(()=>{tn.registerPlugin(re),f(),v(),C=document.querySelector(".navbar-bg");const y=tn.timeline({scrollTrigger:{trigger:e.value,start:"top top",end:"bottom top",scrub:1,pin:!0}}),P=ud("(max-width: 768px)");if(y.fromTo(t.value,{y:"100%",scale:.7},{y:"0%",scale:1,ease:"power2.inOut"},0),P.value||y.fromTo(C,{opacity:0},{opacity:1,ease:"power1.inOut",duration:.4},.05),y.fromTo(r.value,{filter:"blur(0px) brightness(100%)"},{filter:"blur(10px) brightness(50%)",ease:"power2.out"},.1),y.fromTo("#about-us-btn",{opacity:0},{opacity:1,ease:"power2.out",duration:.2},.7),y.fromTo("#about-us-img",{clipPath:"polygon(0 0, 100% 0, 100% 0, 0 0)"},{clipPath:"polygon(0 0, 100% 0, 100% 100%, 0 100%)",ease:"power2.out",duration:.2},.4),y.fromTo(i.value,{y:"-100%"},{y:"0%",ease:"power2.out",duration:.2},.35),P.value){let T=tn.utils.toArray(".cards-container .card");tn.to(T,{x:`-${20*(T.length-1)}rem`,ease:"none",scrollTrigger:{trigger:"#services",scrub:1,snap:{snapTo:1/(T.length-1)-.005,delay:.5,duration:.5},pin:!0,start:"top top",end:()=>"+="+document.querySelector(".cards-container").offsetWidth}})}tn.fromTo("#deals",{clipPath:"inset(6% 18% 0)"},{clipPath:"inset(0% 0% 0)",ease:"power2.out",scrollTrigger:{trigger:"#deals",start:"top bottom",end:"top 40%",scrub:1}}),re.sort(),window.requestAnimationFrame(d)}),Ea(()=>{tn.killTweensOf(C),tn.to(C,{opacity:1,duration:.2})}),(y,P)=>{const T=cd("router-link"),L=sx;return un(),Nr(pv,null,[Gt(a)?(un(),Nr("div",N1,[W("h1",{class:"fw-bold",ref_key:"loadingText",ref:s,style:{"white-space":"nowrap"}},[rr(" LOADING "),W("span",{class:"fw-light",ref_key:"loadingPercentage",ref:o},null,512)],512)])):pu("",!0),W("div",{ref_key:"page",ref:e,class:"page-container"},[W("div",{ref_key:"hero",ref:r,class:"panel"},[W("div",V1,[W("div",z1,[W("div",H1,[W("div",j1,[G1,K1,W("div",$1,[yt(T,{to:{name:"Book"},class:"btn btn-primary btn-lg px-4 me-md-2"},{default:_n(()=>[rr(" Book Now ")]),_:1}),yt(T,{to:{name:"Services"},class:"btn btn-outline-secondary btn-lg px-4"},{default:_n(()=>[rr("Learn More")]),_:1})])])])])]),(un(),As(jo,{onResolve:l},{default:_n(()=>[yt(L)]),_:1}))],512),W("section",{id:"about",ref_key:"slideUpPanel",ref:t,class:"panel bg-body"},[W("div",W1,[W("h6",{class:"fw-bold mb-2 section-heading mask-fill",ref_key:"aboutUsHeading",ref:i},q1,512),W("div",Y1,[Z1,W("div",Q1,[W("div",J1,[eT,tT,W("div",nT,[yt(T,{to:{name:"About"},id:"about-us-btn",class:"btn btn-outline-secondary btn-lg px-4"},{default:_n(()=>[rr("Learn More")]),_:1})])])])])])],512)],512),W("section",rT,[W("div",iT,[W("div",sT,[oT,W("div",aT,[yt(T,{to:{name:"Services"},class:"btn btn-primary btn-lg px-4 me-md-2"},{default:_n(()=>[rr("Show All Services")]),_:1})])])])]),W("section",lT,[W("div",uT,[W("div",cT,[hT,dT,W("div",pT,[W("div",fT,[W("div",mT,[vT,gT,_T,W("div",wT,[yt(T,{to:{name:"Book"},class:"btn btn-primary btn-lg px-4 me-md-2"},{default:_n(()=>[rr(" Book Now ")]),_:1})])])]),W("div",bT,[W("div",yT,[xT,TT,CT,W("div",ST,[yt(T,{to:{name:"Book"},class:"btn btn-primary btn-lg px-4 me-md-2"},{default:_n(()=>[rr("Get the deal")]),_:1})])])])])])])])],64)}}},RT=ld(ET,[["__scopeId","data-v-047d0db7"]]);export{RT as default};
